!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e()
else if("function"==typeof define&&define.amd)define([],e)
else{var t
t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.$rdf=e()}}(function(){var e
return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require
if(!s&&u)return u(a,!0)
if(o)return o(a,!0)
var l=new Error("Cannot find module '"+a+"'")
throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}}
t[a][0].call(c.exports,function(e){var r=t[a][1][e]
return i(r||e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a])
return i}({1:[function(t,r,n){(function(t){!function(){function n(e){var t=!1
return function(){if(t)throw new Error("Callback was already called.")
t=!0,e.apply(i,arguments)}}var i,o,a={}
i=this,null!=i&&(o=i.async),a.noConflict=function(){return i.async=o,a}
var s=Object.prototype.toString,u=Array.isArray||function(e){return"[object Array]"===s.call(e)},l=function(e,t){for(var r=0;r<e.length;r+=1)t(e[r],r,e)},c=function(e,t){if(e.map)return e.map(t)
var r=[]
return l(e,function(e,n,i){r.push(t(e,n,i))}),r},f=function(e,t,r){return e.reduce?e.reduce(t,r):(l(e,function(e,n,i){r=t(r,e,n,i)}),r)},h=function(e){if(Object.keys)return Object.keys(e)
var t=[]
for(var r in e)e.hasOwnProperty(r)&&t.push(r)
return t}
void 0!==t&&t.nextTick?(a.nextTick=t.nextTick,"undefined"!=typeof setImmediate?a.setImmediate=function(e){setImmediate(e)}:a.setImmediate=a.nextTick):"function"==typeof setImmediate?(a.nextTick=function(e){setImmediate(e)},a.setImmediate=a.nextTick):(a.nextTick=function(e){setTimeout(e,0)},a.setImmediate=a.nextTick),a.each=function(e,t,r){function i(t){t?(r(t),r=function(){}):(o+=1)>=e.length&&r()}if(r=r||function(){},!e.length)return r()
var o=0
l(e,function(e){t(e,n(i))})},a.forEach=a.each,a.eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r()
var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():i())})}
i()},a.forEachSeries=a.eachSeries,a.eachLimit=function(e,t,r,n){d(t).apply(null,[e,r,n])},a.forEachLimit=a.eachLimit
var d=function(e){return function(t,r,n){if(n=n||function(){},!t.length||e<=0)return n()
var i=0,o=0,a=0
!function s(){if(i>=t.length)return n()
for(;a<e&&o<t.length;)o+=1,a+=1,r(t[o-1],function(e){e?(n(e),n=function(){}):(i+=1,a-=1,i>=t.length?n():s())})}()}},p=function(e){return function(){var t=Array.prototype.slice.call(arguments)
return e.apply(null,[a.each].concat(t))}},v=function(e,t){return function(){var r=Array.prototype.slice.call(arguments)
return t.apply(null,[d(e)].concat(r))}},g=function(e){return function(){var t=Array.prototype.slice.call(arguments)
return e.apply(null,[a.eachSeries].concat(t))}},m=function(e,t,r,n){if(t=c(t,function(e,t){return{index:t,value:e}}),n){var i=[]
e(t,function(e,t){r(e.value,function(r,n){i[e.index]=n,t(r)})},function(e){n(e,i)})}else e(t,function(e,t){r(e.value,function(e){t(e)})})}
a.map=p(m),a.mapSeries=g(m),a.mapLimit=function(e,t,r,n){return y(t)(e,r,n)}
var y=function(e){return v(e,m)}
a.reduce=function(e,t,r,n){a.eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},a.inject=a.reduce,a.foldl=a.reduce,a.reduceRight=function(e,t,r,n){var i=c(e,function(e){return e}).reverse()
a.reduce(i,t,r,n)},a.foldr=a.reduceRight
var b=function(e,t,r,n){var i=[]
t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r&&i.push(e),t()})},function(e){n(c(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}
a.filter=p(b),a.filterSeries=g(b),a.select=a.filter,a.selectSeries=a.filterSeries
var w=function(e,t,r,n){var i=[]
t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r||i.push(e),t()})},function(e){n(c(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}
a.reject=p(w),a.rejectSeries=g(w)
var x=function(e,t,r,n){e(t,function(e,t){r(e,function(r){r?(n(e),n=function(){}):t()})},function(e){n()})}
a.detect=p(x),a.detectSeries=g(x),a.some=function(e,t,r){a.each(e,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},a.any=a.some,a.every=function(e,t,r){a.each(e,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},a.all=a.every,a.sortBy=function(e,t,r){a.map(e,function(e,r){t(e,function(t,n){t?r(t):r(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e)
var n=function(e,t){var r=e.criteria,n=t.criteria
return r<n?-1:r>n?1:0}
r(null,c(t.sort(n),function(e){return e.value}))})},a.auto=function(e,t){t=t||function(){}
var r=h(e),n=r.length
if(!n)return t()
var i={},o=[],s=function(e){o.unshift(e)},c=function(e){for(var t=0;t<o.length;t+=1)if(o[t]===e)return void o.splice(t,1)},d=function(){n--,l(o.slice(0),function(e){e()})}
s(function(){if(!n){var e=t
t=function(){},e(null,i)}}),l(r,function(r){var n=u(e[r])?e[r]:[e[r]],o=function(e){var n=Array.prototype.slice.call(arguments,1)
if(n.length<=1&&(n=n[0]),e){var o={}
l(h(i),function(e){o[e]=i[e]}),o[r]=n,t(e,o),t=function(){}}else i[r]=n,a.setImmediate(d)},p=n.slice(0,Math.abs(n.length-1))||[],v=function(){return f(p,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(r)}
if(v())n[n.length-1](o,i)
else{var g=function(){v()&&(c(g),n[n.length-1](o,i))}
s(g)}})},a.retry=function(e,t,r){var n=[]
"function"==typeof e&&(r=t,t=e,e=5),e=parseInt(e,10)||5
var i=function(i,o){for(;e;)n.push(function(e,t){return function(r){e(function(e,n){r(!e||t,{err:e,result:n})},o)}}(t,!(e-=1)))
a.series(n,function(e,t){t=t[t.length-1],(i||r)(t.err,t.result)})}
return r?i():i},a.waterfall=function(e,t){if(t=t||function(){},!u(e)){var r=new Error("First argument to waterfall must be an array of functions")
return t(r)}if(!e.length)return t()
var n=function(e){return function(r){if(r)t.apply(null,arguments),t=function(){}
else{var i=Array.prototype.slice.call(arguments,1),o=e.next()
o?i.push(n(o)):i.push(t),a.setImmediate(function(){e.apply(null,i)})}}}
n(a.iterator(e))()}
var _=function(e,t,r){if(r=r||function(){},u(t))e.map(t,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1)
r.length<=1&&(r=r[0]),t.call(null,e,r)})},r)
else{var n={}
e.each(h(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1)
i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(e){r(e,n)})}}
a.parallel=function(e,t){_({map:a.map,each:a.each},e,t)},a.parallelLimit=function(e,t,r){_({map:y(t),each:d(t)},e,r)},a.series=function(e,t){if(t=t||function(){},u(e))a.mapSeries(e,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1)
r.length<=1&&(r=r[0]),t.call(null,e,r)})},t)
else{var r={}
a.eachSeries(h(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1)
i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(e){t(e,r)})}},a.iterator=function(e){var t=function(r){var n=function(){return e.length&&e[r].apply(null,arguments),n.next()}
return n.next=function(){return r<e.length-1?t(r+1):null},n}
return t(0)},a.apply=function(e){var t=Array.prototype.slice.call(arguments,1)
return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}}
var T=function(e,t,r,n){var i=[]
e(t,function(e,t){r(e,function(e,r){i=i.concat(r||[]),t(e)})},function(e){n(e,i)})}
a.concat=p(T),a.concatSeries=g(T),a.whilst=function(e,t,r){e()?t(function(n){if(n)return r(n)
a.whilst(e,t,r)}):r()},a.doWhilst=function(e,t,r){e(function(n){if(n)return r(n)
var i=Array.prototype.slice.call(arguments,1)
t.apply(null,i)?a.doWhilst(e,t,r):r()})},a.until=function(e,t,r){e()?r():t(function(n){if(n)return r(n)
a.until(e,t,r)})},a.doUntil=function(e,t,r){e(function(n){if(n)return r(n)
var i=Array.prototype.slice.call(arguments,1)
t.apply(null,i)?r():a.doUntil(e,t,r)})},a.queue=function(e,t){function r(e,t,r,n){if(e.started||(e.started=!0),u(t)||(t=[t]),0==t.length)return a.setImmediate(function(){e.drain&&e.drain()})
l(t,function(t){var i={data:t,callback:"function"==typeof n?n:null}
r?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),a.setImmediate(e.process)})}void 0===t&&(t=1)
var i=0,o={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){r(o,e,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(e,t){r(o,e,!0,t)},process:function(){if(!o.paused&&i<o.concurrency&&o.tasks.length){var t=o.tasks.shift()
o.empty&&0===o.tasks.length&&o.empty(),i+=1
var r=function(){i-=1,t.callback&&t.callback.apply(t,arguments),o.drain&&o.tasks.length+i===0&&o.drain(),o.process()},a=n(r)
e(t.data,a)}},length:function(){return o.tasks.length},running:function(){return i},idle:function(){return o.tasks.length+i===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1
for(var e=1;e<=o.concurrency;e++)a.setImmediate(o.process)}}}
return o},a.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}function n(e,t,r){for(var n=-1,i=e.length-1;n<i;){var o=n+(i-n+1>>>1)
r(t,e[o])>=0?n=o:i=o-1}return n}function i(e,t,i,o){if(e.started||(e.started=!0),u(t)||(t=[t]),0==t.length)return a.setImmediate(function(){e.drain&&e.drain()})
l(t,function(t){var s={data:t,priority:i,callback:"function"==typeof o?o:null}
e.tasks.splice(n(e.tasks,s,r)+1,0,s),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),a.setImmediate(e.process)})}var o=a.queue(e,t)
return o.push=function(e,t,r){i(o,e,t,r)},delete o.unshift,o},a.cargo=function(e,t){var r=!1,n=[],i={tasks:n,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,r){u(e)||(e=[e]),l(e,function(e){n.push({data:e,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===t&&i.saturated()}),a.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0)
var a="number"==typeof t?n.splice(0,t):n.splice(0,n.length),s=c(a,function(e){return e.data})
i.empty&&i.empty(),r=!0,e(s,function(){r=!1
var e=arguments
l(a,function(t){t.callback&&t.callback.apply(null,e)}),o()})}},length:function(){return n.length},running:function(){return r}}
return i}
var k=function(e){return function(t){var r=Array.prototype.slice.call(arguments,1)
t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1)
"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&l(r,function(t){console[e](t)}))}]))}}
a.log=k("log"),a.dir=k("dir"),a.memoize=function(e,t){var r={},n={}
t=t||function(e){return e}
var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=t.apply(null,i)
s in r?a.nextTick(function(){o.apply(null,r[s])}):s in n?n[s].push(o):(n[s]=[o],e.apply(null,i.concat([function(){r[s]=arguments
var e=n[s]
delete n[s]
for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))}
return i.memo=r,i.unmemoized=e,i},a.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},a.times=function(e,t,r){for(var n=[],i=0;i<e;i++)n.push(i)
return a.map(n,t,r)},a.timesSeries=function(e,t,r){for(var n=[],i=0;i<e;i++)n.push(i)
return a.mapSeries(n,t,r)},a.seq=function(){var e=arguments
return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop()
a.reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1)
n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},a.compose=function(){return a.seq.apply(null,Array.prototype.reverse.call(arguments))}
var N=function(e,t){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop()
return e(t,function(e,t){e.apply(r,n.concat([t]))},i)}
if(arguments.length>2){return r.apply(this,Array.prototype.slice.call(arguments,2))}return r}
a.applyEach=p(N),a.applyEachSeries=g(N),a.forever=function(e,t){function r(n){if(n){if(t)return t(n)
throw n}e(r)}r()},void 0!==r&&r.exports?r.exports=a:void 0!==e&&e.amd?e([],function(){return a}):i.async=a}()}).call(this,t("_process"))},{_process:10}],2:[function(e,t,r){},{}],3:[function(e,t,r){(function(t){"use strict"
function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length")
return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r)
if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string")
return l(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number')
return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,r,n):"string"==typeof t?c(e,t,r):d(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number')}function u(e,t,r,n){return s(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function l(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;r++)e[r]=0
return e}function c(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding')
return e=i(e,0|g(t,r)),e.write(t,r),e}function f(e,t){var r=0|p(t.length)
e=i(e,r)
for(var n=0;n<r;n+=1)e[n]=255&t[n]
return e}function h(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds")
if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds")
return t=void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function d(e,t){if(o.isBuffer(t)){var r=0|p(t.length)
return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?i(e,0):f(e,t)
if("Buffer"===t.type&&G(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes")
return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length
if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength
"string"!=typeof e&&(e=""+e)
var r=e.length
if(0===r)return 0
for(var n=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return r
case"utf8":case"utf-8":case void 0:return z(e).length
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r
case"hex":return r>>>1
case"base64":return W(e).length
default:if(n)return z(e).length
t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1
if((void 0===t||t<0)&&(t=0),t>this.length)return""
if((void 0===r||r>this.length)&&(r=this.length),r<=0)return""
if(r>>>=0,t>>>=0,r<=t)return""
for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r)
case"utf8":case"utf-8":return j(this,t,r)
case"ascii":return I(this,t,r)
case"binary":return R(this,t,r)
case"base64":return E(this,t,r)
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r)
default:if(n)throw new TypeError("Unknown encoding: "+e)
e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t]
e[t]=e[r],e[r]=n}function b(e,t,r,n){function i(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,a=e.length,s=t.length
if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1
o=2,a/=2,s/=2,r/=2}for(var u=-1,l=0;r+l<a;l++)if(i(e,r+l)===i(t,-1===u?0:l-u)){if(-1===u&&(u=l),l-u+1===s)return(r+u)*o}else-1!==u&&(l-=l-u),u=-1
return-1}function w(e,t,r,n){r=Number(r)||0
var i=e.length-r
n?(n=Number(n))>i&&(n=i):n=i
var o=t.length
if(o%2!=0)throw new Error("Invalid hex string")
n>o/2&&(n=o/2)
for(var a=0;a<n;a++){var s=parseInt(t.substr(2*a,2),16)
if(isNaN(s))return a
e[r+a]=s}return a}function x(e,t,r,n){return J(z(t,e.length-r),e,r,n)}function _(e,t,r,n){return J(X(t),e,r,n)}function T(e,t,r,n){return _(e,t,r,n)}function k(e,t,r,n){return J(W(t),e,r,n)}function N(e,t,r,n){return J(V(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,r))}function j(e,t,r){r=Math.min(e.length,r)
for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1
if(i+s<=r){var u,l,c,f
switch(s){case 1:o<128&&(a=o)
break
case 2:u=e[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(a=f)
break
case 3:u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&(f=(15&o)<<12|(63&u)<<6|63&l)>2047&&(f<55296||f>57343)&&(a=f)
break
case 4:u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(f=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return S(n)}function S(e){var t=e.length
if(t<=Z)return String.fromCharCode.apply(String,e)
for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z))
return r}function I(e,t,r){var n=""
r=Math.min(e.length,r)
for(var i=t;i<r;i++)n+=String.fromCharCode(127&e[i])
return n}function R(e,t,r){var n=""
r=Math.min(e.length,r)
for(var i=t;i<r;i++)n+=String.fromCharCode(e[i])
return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n)
for(var i="",o=t;o<r;o++)i+=H(e[o])
return i}function C(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1])
return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint")
if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance')
if(t>i||t<a)throw new RangeError('"value" argument is out of bounds')
if(r+n>e.length)throw new RangeError("Index out of range")}function A(e,t,r,n){t<0&&(t=65535+t+1)
for(var i=0,o=Math.min(e.length-r,2);i<o;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(e,t,r,n){t<0&&(t=4294967295+t+1)
for(var i=0,o=Math.min(e.length-r,4);i<o;i++)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range")
if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,n,i){return i||U(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,r,n,23,4),r+4}function q(e,t,r,n,i){return i||U(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,r,n,52,8),r+8}function F(e){if(e=B(e).replace(K,""),e.length<2)return""
for(;e.length%4!=0;)e+="="
return e}function B(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0
for(var r,n=e.length,i=null,o=[],a=0;a<n;a++){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189)
continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189)
continue}i=r
continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r
continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189)
if(i=null,r<128){if((t-=1)<0)break
o.push(r)}else if(r<2048){if((t-=2)<0)break
o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break
o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point")
if((t-=4)<0)break
o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function X(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r))
return t}function V(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n)
return o}function W(e){return Y.toByteArray(F(e))}function J(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i]
return i}function $(e){return e!==e}var Y=e("base64-js"),Q=e("ieee754"),G=e("isarray")
r.Buffer=o,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1)
return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),r.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return a(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return u(null,e,t,r)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers")
if(e===t)return 0
for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i]
break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0
default:return!1}},o.concat=function(e,t){if(!G(e))throw new TypeError('"list" argument must be an Array of Buffers')
if(0===e.length)return o.alloc(0)
var r
if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length
var n=o.allocUnsafe(t),i=0
for(r=0;r<e.length;r++){var a=e[r]
if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers')
a.copy(n,i),i+=a.length}return n},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length
if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits")
for(var t=0;t<e;t+=2)y(this,t,t+1)
return this},o.prototype.swap32=function(){var e=this.length
if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits")
for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2)
return this},o.prototype.toString=function(){var e=0|this.length
return 0===e?"":0===arguments.length?j(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer")
return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES
return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer")
if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index")
if(n>=i&&t>=r)return 0
if(n>=i)return-1
if(t>=r)return 1
if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0
for(var a=i-n,s=r-t,u=Math.min(a,s),l=this.slice(n,i),c=e.slice(t,r),f=0;f<u;++f)if(l[f]!==c[f]){a=l[f],s=c[f]
break}return a<s?-1:s<a?1:0},o.prototype.indexOf=function(e,t,r){if("string"==typeof t?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1
if(t>=this.length)return-1
if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:b(this,e,t,r)
if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):b(this,[e],t,r)
throw new TypeError("val must be string, number or Buffer")},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0
else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0
else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")
t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t
if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds")
n||(n="utf8")
for(var o=!1;;)switch(n){case"hex":return w(this,e,t,r)
case"utf8":case"utf-8":return x(this,e,t,r)
case"ascii":return _(this,e,t,r)
case"binary":return T(this,e,t,r)
case"base64":return k(this,e,t,r)
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,r)
default:if(o)throw new TypeError("Unknown encoding: "+n)
n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}}
var Z=4096
o.prototype.slice=function(e,t){var r=this.length
e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e)
var n
if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype
else{var i=t-e
n=new o(i,void 0)
for(var a=0;a<i;a++)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length)
for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i
return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length)
for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i
return n},o.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length)
for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i
return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length)
for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i
return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||L(e,2,this.length)
var r=this[e]|this[e+1]<<8
return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||L(e,2,this.length)
var r=this[e+1]|this[e]<<8
return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0
for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255
return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1
for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255
return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1)
D(this,e,t,r,i-1,-i)}var o=0,a=1,s=0
for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255
return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1)
D(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0
for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255
return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return q(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return q(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0
if(0===e.length||0===this.length)return 0
if(t<0)throw new RangeError("targetStart out of bounds")
if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds")
if(n<0)throw new RangeError("sourceEnd out of bounds")
n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r)
var i,a=n-r
if(this===e&&r<t&&t<n)for(i=a-1;i>=0;i--)e[i+t]=this[i+r]
else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;i++)e[i+t]=this[i+r]
else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t)
return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0)
i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string")
if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255)
if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index")
if(r<=t)return this
t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0)
var a
if("number"==typeof e)for(a=t;a<r;a++)this[a]=e
else{var s=o.isBuffer(e)?e:z(new o(e,n).toString()),u=s.length
for(a=0;a<r-t;a++)this[a+t]=s[a%u]}return this}
var K=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":4,ieee754:5,isarray:6}],4:[function(e,t,r){"use strict"
function n(e){var t,r,n,i,o,a,s=e.length
if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4")
o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new l(3*s/4-o),n=o>0?s-4:s
var c=0
for(t=0,r=0;t<n;t+=4,r+=3)i=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i
return 2===o?(i=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,a[c++]=255&i):1===o&&(i=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a}function i(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function o(e,t,r){for(var n,o=[],a=t;a<r;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(i(n))
return o.join("")}function a(e){for(var t,r=e.length,n=r%3,i="",a=[],u=0,l=r-n;u<l;u+=16383)a.push(o(e,u,u+16383>l?l:u+16383))
return 1===n?(t=e[r-1],i+=s[t>>2],i+=s[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=s[t>>10],i+=s[t>>4&63],i+=s[t<<2&63],i+="="),a.push(i),a.join("")}r.toByteArray=n,r.fromByteArray=a
var s=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array
!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)s[t]=e[t],u[e.charCodeAt(t)]=t
u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}()},{}],5:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f]
for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l
else{if(o===u)return a?NaN:1/0*(d?-1:1)
a+=Math.pow(2,n),o-=l}return(d?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0
for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+d]=255&a,d+=p,a/=256,l-=8);e[r+d-p]|=128*v}},{}],6:[function(e,t,r){var n={}.toString
t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],7:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number")
return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,l
if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t
throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1
if(i(r))switch(arguments.length){case 1:r.call(this)
break
case 2:r.call(this,arguments[1])
break
case 3:r.call(this,arguments[1],arguments[2])
break
default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,u=0;u<n;u++)l[u].apply(this,o)
return!0},n.prototype.addListener=function(e,t){var r
if(!i(t))throw TypeError("listener must be a function")
return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function")
var n=!1
return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,s
if(!i(t))throw TypeError("listener must be a function")
if(!this._events||!this._events[e])return this
if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t)
else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s
break}if(n<0)return this
1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r
if(!this._events)return this
if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this
if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t)
return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r)
else if(r)for(;r.length;)this.removeListener(e,r[r.length-1])
return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e]
if(i(t))return 1
if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],8:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t
var r=function(){}
r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],9:[function(e,t,r){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],10:[function(e,t,r){function n(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&i())}function i(){if(!c){var e=setTimeout(n)
c=!0
for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run()
f=-1,t=l.length}s=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,u=t.exports={},l=[],c=!1,f=-1
u.nextTick=function(e){var t=new Array(arguments.length-1)
if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r]
l.push(new o(e,t)),1!==l.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],11:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":12}],12:[function(e,t,r){"use strict"
function n(e){if(!(this instanceof n))return new n(e)
l.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[]
for(var r in e)t.push(r)
return t}
t.exports=n
var s=e("process-nextick-args"),u=e("core-util-is")
u.inherits=e("inherits")
var l=e("./_stream_readable"),c=e("./_stream_writable")
u.inherits(n,l)
for(var f=a(c.prototype),h=0;h<f.length;h++){var d=f[h]
n.prototype[d]||(n.prototype[d]=c.prototype[d])}},{"./_stream_readable":14,"./_stream_writable":16,"core-util-is":17,inherits:8,"process-nextick-args":19}],13:[function(e,t,r){"use strict"
function n(e){if(!(this instanceof n))return new n(e)
i.call(this,e)}t.exports=n
var i=e("./_stream_transform"),o=e("core-util-is")
o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":15,"core-util-is":17,inherits:8}],14:[function(e,t,r){(function(r){"use strict"
function n(t,r){D=D||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof D&&(this.objectMode=this.objectMode||!!t.readableObjectMode)
var n=t.highWaterMark,i=this.objectMode?16:16384
this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(L||(L=e("string_decoder/").StringDecoder),this.decoder=new L(t.encoding),this.encoding=t.encoding)}function i(t){if(D=D||e("./_stream_duplex"),!(this instanceof i))return new i(t)
this._readableState=new n(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),S.call(this)}function o(e,t,r,n,i){var o=l(t,r)
if(o)e.emit("error",o)
else if(null===r)t.reading=!1,c(e,t)
else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF")
e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event")
e.emit("error",s)}else{var u
!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&f(e))),d(e,t)}else i||(t.reading=!1)
return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function l(e,t){var r=null
return j.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end()
r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,f(e)}}function f(e){var t=e._readableState
t.needReadable=!1,t.emittedReadable||(C("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?N(h,e):h(e))}function h(e){C("emit readable"),e.emit("readable"),b(e)}function d(e,t){t.readingMore||(t.readingMore=!0,N(p,e,t))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(C("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length
t.readingMore=!1}function v(e){return function(){var t=e._readableState
C("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&I(e,"data")&&(t.flowing=!0,b(e))}}function g(e){C("readable nexttick read 0"),e.read(0)}function m(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N(y,e,t))}function y(e,t){t.reading||(C("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState
if(C("flow",t.flowing),t.flowing)do{var r=e.read()}while(null!==r&&t.flowing)}function w(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode
if(0===n.length)return null
if(0===i)r=null
else if(a)r=n.shift()
else if(!e||e>=i)r=o?n.join(""):1===n.length?n[0]:j.concat(n,i),n.length=0
else if(e<n[0].length){var s=n[0]
r=s.slice(0,e),n[0]=s.slice(e)}else if(e===n[0].length)r=n.shift()
else{r=o?"":new j(e)
for(var u=0,l=0,c=n.length;l<c&&u<e;l++){var s=n[0],f=Math.min(e-u,s.length)
o?r+=s.slice(0,f):s.copy(r,u,0,f),f<s.length?n[0]=s.slice(f):n.shift(),u+=f}}return r}function x(e){var t=e._readableState
if(t.length>0)throw new Error("endReadable called on non-empty stream")
t.endEmitted||(t.ended=!0,N(_,t,e))}function _(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function T(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function k(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r
return-1}t.exports=i
var N=e("process-nextick-args"),E=e("isarray"),j=e("buffer").Buffer
i.ReadableState=n
var S,I=(e("events"),function(e,t){return e.listeners(t).length})
!function(){try{S=e("stream")}catch(e){}finally{S||(S=e("events").EventEmitter)}}()
var j=e("buffer").Buffer,R=e("core-util-is")
R.inherits=e("inherits")
var O=e("util"),C=void 0
C=O&&O.debuglog?O.debuglog("stream"):function(){}
var L
R.inherits(i,S)
var D,D
i.prototype.push=function(e,t){var r=this._readableState
return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=new j(e,t),t=""),o(this,r,e,t,!1)},i.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},i.prototype.isPaused=function(){return!1===this._readableState.flowing},i.prototype.setEncoding=function(t){return L||(L=e("string_decoder/").StringDecoder),this._readableState.decoder=new L(t),this._readableState.encoding=t,this}
var A=8388608
i.prototype.read=function(e){C("read",e)
var t=this._readableState,r=e
if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return C("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?x(this):f(this),null
if(0===(e=u(e,t))&&t.ended)return 0===t.length&&x(this),null
var n=t.needReadable
C("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,C("length less than watermark",n)),(t.ended||t.reading)&&(n=!1,C("reading or ended",n)),n&&(C("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=u(r,t))
var i
return i=e>0?w(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&x(this),null!==i&&this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){C("onunpipe"),e===f&&o()}function i(){C("onend"),e.end()}function o(){C("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",a),m=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function a(t){C("ondata"),!1===e.write(t)&&(1!==h.pipesCount||h.pipes[0]!==e||1!==f.listenerCount("data")||m||(C("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++),f.pause())}function s(t){C("onerror",t),c(),e.removeListener("error",s),0===I(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",l),c()}function l(){C("onfinish"),e.removeListener("close",u),c()}function c(){C("unpipe"),f.unpipe(e)}var f=this,h=this._readableState
switch(h.pipesCount){case 0:h.pipes=e
break
case 1:h.pipes=[h.pipes,e]
break
default:h.pipes.push(e)}h.pipesCount+=1,C("pipe count=%d opts=%j",h.pipesCount,t)
var d=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,p=d?i:o
h.endEmitted?N(p):f.once("end",p),e.on("unpipe",n)
var g=v(f)
e.on("drain",g)
var m=!1
return f.on("data",a),e._events&&e._events.error?E(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",u),e.once("finish",l),e.emit("pipe",f),h.flowing||(C("pipe resume"),f.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState
if(0===t.pipesCount)return this
if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this)
if(!e){var r=t.pipes,n=t.pipesCount
t.pipes=null,t.pipesCount=0,t.flowing=!1
for(var i=0;i<n;i++)r[i].emit("unpipe",this)
return this}var o=k(t.pipes,e)
return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=S.prototype.on.call(this,e,t)
if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var n=this._readableState
n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&f(this):N(g,this))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState
return e.flowing||(C("resume"),e.flowing=!0,m(this,e)),this},i.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this
e.on("end",function(){if(C("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end()
e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(C("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){n.push(i)||(r=!0,e.pause())}})
for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i))
return T(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){C("wrapped _read",t),r&&(r=!1,e.resume())},n},i._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":12,_process:10,buffer:3,"core-util-is":17,events:7,inherits:8,isarray:18,"process-nextick-args":19,"string_decoder/":26,util:2}],15:[function(e,t,r){"use strict"
function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState
n.transforming=!1
var i=n.writecb
if(!i)return e.emit("error",new Error("no writecb in Transform class"))
n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t)
var o=e._readableState
o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e)
s.call(this,e),this._transformState=new n(this)
var t=this
this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t)
var r=e._writableState,n=e._transformState
if(r.length)throw new Error("calling transform done when ws.length != 0")
if(n.transforming)throw new Error("calling transform done when still transforming")
return e.push(null)}t.exports=o
var s=e("./_stream_duplex"),u=e("core-util-is")
u.inherits=e("inherits"),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState
if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState
null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":12,"core-util-is":17,inherits:8}],16:[function(e,t,r){(function(r){"use strict"
function n(){}function i(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(t,r){I=I||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof I&&(this.objectMode=this.objectMode||!!t.writableObjectMode)
var n=t.highWaterMark,i=this.objectMode?16:16384
this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1
var o=!1===t.decodeStrings
this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new _(this),this.corkedRequestsFree.next=new _(this)}function a(t){if(I=I||e("./_stream_duplex"),!(this instanceof a||this instanceof I))return new a(t)
this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),j.call(this)}function s(e,t){var r=new Error("write after end")
e.emit("error",r),T(t,r)}function u(e,t,r,n){var i=!0
if(!N.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk")
e.emit("error",o),T(n,o),i=!1}return i}function l(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=new N(t,r)),t}function c(e,t,r,n,o){r=l(t,r,n),N.isBuffer(r)&&(n="buffer")
var a=t.objectMode?1:r.length
t.length+=a
var s=t.length<t.highWaterMark
if(s||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest
t.lastBufferedRequest=new i(r,n,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,a,r,n,o)
return s}function f(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,n,i){--t.pendingcb,r?T(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,n=r.sync,i=r.writecb
if(d(r),t)h(e,r,n,t,i)
else{var o=y(r)
o||r.corked||r.bufferProcessing||!r.bufferedRequest||m(e,r),n?k(v,e,r,o,i):v(e,r,o,i)}}function v(e,t,r,n){r||g(e,t),t.pendingcb--,n(),w(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0
var r=t.bufferedRequest
if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree
o.entry=r
for(var a=0;r;)i[a]=r,r=r.next,a+=1
f(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=o.next,o.next=null}else{for(;r;){var s=r.chunk,u=r.encoding,l=r.callback
if(f(e,t,!1,t.objectMode?1:s.length,s,u,l),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var r=y(t)
return r&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),r}function x(e,t,r){t.ending=!0,w(e,t),r&&(t.finished?T(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function _(e){var t=this
this.next=null,this.entry=null,this.finish=function(r){var n=t.entry
for(t.entry=null;n;){var i=n.callback
e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=a
var T=e("process-nextick-args"),k=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:T,N=e("buffer").Buffer
a.WritableState=o
var E=e("core-util-is")
E.inherits=e("inherits")
var j,S={deprecate:e("util-deprecate")}
!function(){try{j=e("stream")}catch(e){}finally{j||(j=e("events").EventEmitter)}}()
var N=e("buffer").Buffer
E.inherits(a,j)
var I
o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next
return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:S.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}()
var I
a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(e,t,r){var i=this._writableState,o=!1
return"function"==typeof t&&(r=t,t=null),N.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?s(this,r):u(this,i,e,r)&&(i.pendingcb++,o=c(this,i,e,t,r)),o},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState
e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e)
this._writableState.defaultEncoding=e},a.prototype._write=function(e,t,r){r(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,r){var n=this._writableState
"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||x(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":12,_process:10,buffer:3,"core-util-is":17,events:7,inherits:8,"process-nextick-args":19,"util-deprecate":20}],17:[function(e,t,r){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function l(e){return void 0===e}function c(e){return"[object RegExp]"===g(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===g(e)}function d(e){return"[object Error]"===g(e)||e instanceof Error}function p(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function g(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=a,r.isString=s,r.isSymbol=u,r.isUndefined=l,r.isRegExp=c,r.isObject=f,r.isDate=h,r.isError=d,r.isFunction=p,r.isPrimitive=v,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":9}],18:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{dup:6}],19:[function(e,t,r){(function(e){"use strict"
function r(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function')
var o,a,s=arguments.length
switch(s){case 0:case 1:return e.nextTick(t)
case 2:return e.nextTick(function(){t.call(null,r)})
case 3:return e.nextTick(function(){t.call(null,r,n)})
case 4:return e.nextTick(function(){t.call(null,r,n,i)})
default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a]
return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(this,e("_process"))},{_process:10}],20:[function(e,t,r){(function(e){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t)
n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e
var i=!1
return r}function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t]
return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,r){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":13}],22:[function(e,t,r){(function(n){var i=function(){try{return e("stream")}catch(e){}}()
r=t.exports=e("./lib/_stream_readable.js"),r.Stream=i||r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),!n.browser&&"disable"===n.env.READABLE_STREAM&&i&&(t.exports=i)}).call(this,e("_process"))},{"./lib/_stream_duplex.js":12,"./lib/_stream_passthrough.js":13,"./lib/_stream_readable.js":14,"./lib/_stream_transform.js":15,"./lib/_stream_writable.js":16,_process:10}],23:[function(e,t,r){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":15}],24:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":16}],25:[function(e,t,r){function n(){i.call(this)}t.exports=n
var i=e("events").EventEmitter
e("inherits")(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",r),e.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this
l.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(l.on("end",o),l.on("close",a))
var c=!1
return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},{events:7,inherits:8,"readable-stream/duplex.js":11,"readable-stream/passthrough.js":21,"readable-stream/readable.js":22,"readable-stream/transform.js":23,"readable-stream/writable.js":24}],26:[function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=e("buffer").Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0
default:return!1}},l=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3
break
case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o
break
case"base64":this.surrogateSize=3,this.detectIncompleteChar=a
break
default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0}
l.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length
if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return""
e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)
var n=t.charCodeAt(t.length-1)
if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t
break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e)
var i=e.length
this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i)
var i=t.length-1,n=t.charCodeAt(i)
if(n>=55296&&n<=56319){var o=this.surrogateSize
return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t]
if(1==t&&r>>5==6){this.charLength=2
break}if(t<=2&&r>>4==14){this.charLength=3
break}if(t<=3&&r>>3==30){this.charLength=4
break}}this.charReceived=t},l.prototype.end=function(e){var t=""
if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding
t+=n.slice(0,r).toString(i)}return t}},{buffer:3}],27:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],28:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a}
return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(t)?n.showHidden=t:t&&r._extend(n,t),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t]
return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={}
return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e)
return b(i)||(i=u(e,i,n)),i}var o=l(e,t)
if(o)return o
var a=Object.keys(t),v=s(a)
if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),N(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t)
if(0===a.length){if(E(t)){var g=t.name?": "+t.name:""
return e.stylize("[Function"+g+"]","special")}if(_(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp")
if(k(t))return e.stylize(Date.prototype.toString.call(t),"date")
if(N(t))return c(t)}var m="",y=!1,w=["{","}"]
if(p(t)&&(y=!0,w=["[","]"]),E(t)){m=" [Function"+(t.name?": "+t.name:"")+"]"}if(_(t)&&(m=" "+RegExp.prototype.toString.call(t)),k(t)&&(m=" "+Date.prototype.toUTCString.call(t)),N(t)&&(m=" "+c(t)),0===a.length&&(!y||0==t.length))return w[0]+m+w[1]
if(n<0)return _(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special")
e.seen.push(t)
var x
return x=y?f(e,t,n,v,a):a.map(function(r){return h(e,t,n,v,r,y)}),e.seen.pop(),d(x,m,w)}function l(e,t){if(x(t))return e.stylize("undefined","undefined")
if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'"
return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)O(t,String(a))?o.push(h(e,t,r,n,String(a),!0)):o.push("")
return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var a,s,l
if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),O(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(r)?u(e,l.value,null):u(e,l.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s
a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,r){var n=0
return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function x(e){return void 0===e}function _(e){return T(e)&&"[object RegExp]"===S(e)}function T(e){return"object"==typeof e&&null!==e}function k(e){return T(e)&&"[object Date]"===S(e)}function N(e){return T(e)&&("[object Error]"===S(e)||e instanceof Error)}function E(e){return"function"==typeof e}function j(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function S(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":")
return[e.getDate(),A[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var C=/%[sdj%]/g
r.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]))
return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(C,function(e){if("%%"===e)return"%"
if(r>=o)return e
switch(e){case"%s":return String(n[r++])
case"%d":return Number(n[r++])
case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])g(s)||!T(s)?a+=" "+s:a+=" "+i(s)
return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i)
t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(x(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)}
if(!0===t.noDeprecation)return e
var a=!1
return o}
var L,D={}
r.debuglog=function(e){if(x(L)&&(L=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(L)){var n=t.pid
D[e]=function(){var t=r.format.apply(r,arguments)
console.error("%s %d: %s",e,n,t)}}else D[e]=function(){}
return D[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=v,r.isNull=g,r.isNullOrUndefined=m,r.isNumber=y,r.isString=b,r.isSymbol=w,r.isUndefined=x,r.isRegExp=_,r.isObject=T,r.isDate=k,r.isError=N,r.isFunction=E,r.isPrimitive=j,r.isBuffer=e("./support/isBuffer")
var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]
r.log=function(){console.log("%s - %s",R(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!T(t))return e
for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]]
return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":27,_process:10,inherits:8}],29:[function(e,t,r){},{}],30:[function(t,r,n){(function(n,i,o){!function(){var a=void 0!==n&&n.versions&&n.versions.node,s=!a&&("undefined"!=typeof window||"undefined"!=typeof self)
s&&void 0===i&&("undefined"!=typeof window?i=window:"undefined"!=typeof self?i=self:"undefined"!=typeof $&&(i=$))
var u=function(e){function r(){}function u(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n],o=e[i]
F(o)||(o=[o])
for(var a=0;a<o.length;++a){var s=o[a]
if(null!==s){if(!H(s))throw new Re("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e})
t.push({"@value":s,"@language":i.toLowerCase()})}}}return t}function l(e,t){if(F(t))for(var r=0;r<t.length;++r)t[r]=l(e,t[r])
else if(G(t))t["@list"]=l(e,t["@list"])
else if(P(t)){Z(t)&&(t["@id"]=e.getId(t["@id"]))
for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=n[i]
"@id"!==o&&(t[o]=l(e,t[o]))}}return t}function c(t,r,n){if(null===n||void 0===n)return null
var i=L(t,r,{vocab:!0})
if("@id"===i)return L(t,n,{base:!0})
if("@type"===i)return L(t,n,{vocab:!0,base:!0})
var o=e.getContextValue(t,r,"@type")
if("@id"===o||"@graph"===i&&H(n))return{"@id":L(t,n,{base:!0})}
if("@vocab"===o)return{"@id":L(t,n,{vocab:!0,base:!0})}
if(U(i))return n
var a={}
if(null!==o)a["@type"]=o
else if(H(n)){var s=e.getContextValue(t,r,"@language")
null!==s&&(a["@language"]=s)}return-1===["boolean","number","string"].indexOf(typeof n)&&(n=n.toString()),a["@value"]=n,a}function f(e,t,r){for(var n=[],i=Object.keys(e).sort(),o=0;o<i.length;++o)for(var a=i[o],s=e[a],u=Object.keys(s).sort(),l=0;l<u.length;++l){var c=u[l],f=s[c]
if("@type"===c)c=Te
else if(U(c))continue
for(var p=0;p<f.length;++p){var v=f[p],g={}
if(g.type=0===a.indexOf("_:")?"blank node":"IRI",g.value=a,K(a)){var m={}
if(m.type=0===c.indexOf("_:")?"blank node":"IRI",m.value=c,K(c)&&("blank node"!==m.type||r.produceGeneralizedRdf))if(G(v))h(v["@list"],t,g,m,n)
else{var y=d(v)
y&&n.push({subject:g,predicate:m,object:y})}}}}return n}function h(e,t,r,n,i){for(var o={type:"IRI",value:we},a={type:"IRI",value:xe},s={type:"IRI",value:_e},u=0;u<e.length;++u){var l=e[u],c={type:"blank node",value:t.getId()}
i.push({subject:r,predicate:n,object:c}),r=c,n=o
var f=d(l)
f&&i.push({subject:r,predicate:n,object:f}),n=a}i.push({subject:r,predicate:n,object:s})}function d(e){var t={}
if(Q(e)){t.type="literal"
var r=e["@value"],n=e["@type"]||null
W(r)?(t.value=r.toString(),t.datatype=n||ve):X(r)||n===ge?(X(r)||(r=parseFloat(r)),t.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=n||ge):z(r)?(t.value=r.toFixed(0),t.datatype=n||me):"@language"in e?(t.value=r,t.datatype=n||je,t.language=e["@language"]):(t.value=r,t.datatype=n||ye)}else{var i=P(e)?e["@id"]:e
t.type=0===i.indexOf("_:")?"blank node":"IRI",t.value=i}return"IRI"!==t.type||K(t.value)?t:null}function p(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value}
var r={"@value":e.value}
if(e.language)r["@language"]=e.language
else{var n=e.datatype
if(n||(n=ye),t){if(n===ve)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1)
else if(V(r["@value"]))if(n===me){var i=parseInt(r["@value"],10)
i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===ge&&(r["@value"]=parseFloat(r["@value"]));-1===[ve,me,ge,ye].indexOf(n)&&(r["@type"]=n)}else n!==ye&&(r["@type"]=n)}return r}function v(e,t){for(var r=["subject","predicate","object"],n=0;n<r.length;++n){var i=r[n]
if(e[i].type!==t[i].type||e[i].value!==t[i].value)return!1}return e.object.language===t.object.language&&e.object.datatype===t.object.datatype}function g(t,r,n,i,o,a){if(F(t))for(var s=0;s<t.length;++s)g(t[s],r,n,i,void 0,a)
else{if(!P(t))return void(a&&a.push(t))
if(Q(t)){if("@type"in t){var u=t["@type"]
0===u.indexOf("_:")&&(t["@type"]=u=i.getId(u))}return void(a&&a.push(t))}if("@type"in t)for(var l=t["@type"],s=0;s<l.length;++s){var u=l[s]
0===u.indexOf("_:")&&i.getId(u)}J(o)&&(o=Z(t)?i.getId(t["@id"]):t["@id"]),a&&a.push({"@id":o})
var c=r[n],f=c[o]=c[o]||{}
f["@id"]=o
for(var h=Object.keys(t).sort(),d=0;d<h.length;++d){var p=h[d]
if("@id"!==p)if("@reverse"!==p)if("@graph"!==p)if("@type"!==p&&U(p)){if("@index"===p&&p in f&&(t[p]!==f[p]||t[p]["@id"]!==f[p]["@id"]))throw new Re("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f})
f[p]=t[p]}else{var v=t[p]
if(0===p.indexOf("_:")&&(p=i.getId(p)),0!==v.length)for(var m=0;m<v.length;++m){var y=v[m]
if("@type"===p&&(y=0===y.indexOf("_:")?i.getId(y):y),$(y)||Y(y)){var b=Z(y)?i.getId(y["@id"]):y["@id"]
e.addValue(f,p,{"@id":b},{propertyIsArray:!0,allowDuplicate:!1}),g(y,r,n,i,b)}else if(G(y)){var w=[]
g(y["@list"],r,n,i,o,w),y={"@list":w},e.addValue(f,p,y,{propertyIsArray:!0,allowDuplicate:!1})}else g(y,r,n,i,o),e.addValue(f,p,y,{propertyIsArray:!0,allowDuplicate:!1})}else e.addValue(f,p,[],{propertyIsArray:!0})}else{o in r||(r[o]={})
var x="@merged"===n?n:o
g(t[p],r,x,i)}else{var _={"@id":o},T=t["@reverse"]
for(var k in T)for(var N=T[k],E=0;E<N.length;++E){var j=N[E],S=j["@id"]
Z(j)&&(S=i.getId(S)),g(j,r,n,i,S),e.addValue(c[S],k,_,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function m(e){for(var t=e["@default"],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n]
if("@default"!==i){var o=e[i],a=t[i]
a?"@graph"in a||(a["@graph"]=[]):t[i]=a={"@id":i,"@graph":[]}
for(var s=a["@graph"],u=Object.keys(o).sort(),l=0;l<u.length;++l){var c=o[u[l]]
Y(c)||s.push(c)}}}return t}function y(e,t,r,n,i){_(r),r=r[0]
for(var o=e.options,a={embed:x(r,o,"embed"),explicit:x(r,o,"explicit"),requireAll:x(r,o,"requireAll")},s=T(e,t,r,a),u=Object.keys(s).sort(),l=0;l<u.length;++l){var c=u[l],f=s[c]
if("@link"===a.embed&&c in e.link)E(n,i,e.link[c])
else{null===i&&(e.uniqueEmbeds={})
var h={}
if(h["@id"]=c,e.link[c]=h,"@never"===a.embed||w(f,e.subjectStack))E(n,i,h)
else{"@last"===a.embed&&(c in e.uniqueEmbeds&&N(e,c),e.uniqueEmbeds[c]={parent:n,property:i}),e.subjectStack.push(f)
for(var d=Object.keys(f).sort(),p=0;p<d.length;p++){var v=d[p]
if(U(v))h[v]=ee(f[v])
else if(!a.explicit||v in r)for(var g=f[v],m=0;m<g.length;++m){var k=g[m]
if(G(k)){var j={"@list":[]}
E(h,v,j)
var S=k["@list"]
for(var I in S)if(k=S[I],Y(k)){var R=v in r?r[v][0]["@list"]:b(a)
y(e,[k["@id"]],R,j,"@list")}else E(j,"@list",ee(k))}else if(Y(k)){var R=v in r?r[v]:b(a)
y(e,[k["@id"]],R,h,v)}else E(h,v,ee(k))}}for(var d=Object.keys(r).sort(),p=0;p<d.length;++p){var v=d[p]
if(!U(v)){var O=r[v][0]
if(!(x(O,o,"omitDefault")||v in h)){var C="@null"
"@default"in O&&(C=ee(O["@default"])),F(C)||(C=[C]),h[v]=[{"@preserve":C}]}}}E(n,i,h),e.subjectStack.pop()}}}}function b(e){var t={}
for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]])
return[t]}function w(e,t){for(var r=t.length-1;r>=0;--r)if(t[r]["@id"]===e["@id"])return!0
return!1}function x(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r]
return"embed"===r&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function _(e){if(!F(e)||1!==e.length||!P(e[0]))throw new Re("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function T(e,t,r,n){for(var i={},o=0;o<t.length;++o){var a=t[o],s=e.subjects[a]
k(s,r,n)&&(i[a]=s)}return i}function k(t,r,n){if("@type"in r&&(1!==r["@type"].length||!P(r["@type"][0]))){for(var i=r["@type"],o=0;o<i.length;++o)if(e.hasValue(t,"@type",i[o]))return!0
return!1}var a=!0,s=!1
for(var u in r){if(U(u)){if("@id"!==u&&"@type"!==u)continue
if(a=!1,"@id"===u&&H(r[u])){if(t[u]!==r[u])return!1
s=!0
continue}}if(a=!1,u in t){if(F(r[u])&&0===r[u].length&&void 0!==t[u])return!1
s=!0}else{var l=F(r[u])&&P(r[u][0])&&"@default"in r[u][0]
if(n.requireAll&&!l)return!1}}return a||s}function N(t,r){var n=t.uniqueEmbeds,i=n[r],o=i.parent,a=i.property,s={"@id":r}
if(F(o)){for(var u=0;u<o.length;++u)if(e.compareValues(o[u],s)){o[u]=s
break}}else{var l=F(o[a])
e.removeValue(o,a,s,{propertyIsArray:l}),e.addValue(o,a,s,{propertyIsArray:l})}var c=function(e){for(var t=Object.keys(n),r=0;r<t.length;++r){var i=t[r]
i in n&&P(n[i].parent)&&n[i].parent["@id"]===e&&(delete n[i],c(i))}}
c(r)}function E(t,r,n){P(t)?e.addValue(t,r,n,{propertyIsArray:!0}):t.push(n)}function j(t,r,n){if(F(r)){for(var i=[],o=0;o<r.length;++o){var a=j(t,r[o],n)
null!==a&&i.push(a)}r=i}else if(P(r)){if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"]
if(Q(r))return r
if(G(r))return r["@list"]=j(t,r["@list"],n),r
var s=R(t,"@id")
if(s in r){var u=r[s]
if(u in n.link){var l=n.link[u].indexOf(r)
if(-1!==l)return n.link[u][l]
n.link[u].push(r)}else n.link[u]=[r]}for(var c in r){var a=j(t,r[c],n),f=e.getContextValue(t,c,"@container")
n.compactArrays&&F(a)&&1===a.length&&null===f&&(a=a[0]),r[c]=a}}return r}function S(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1}function I(e,t,r,n,i,o){null===o&&(o="@null")
var a=[]
if("@id"!==o&&"@reverse"!==o||!Y(r))a.push(o)
else{"@reverse"===o&&a.push("@reverse")
var s=R(e,r["@id"],null,{vocab:!0})
s in e.mappings&&e.mappings[s]&&e.mappings[s]["@id"]===r["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}a.push("@none")
for(var u=e.inverse[t],l=0;l<n.length;++l){var c=n[l]
if(c in u)for(var f=u[c][i],h=0;h<a.length;++h){var d=a[h]
if(d in f)return f[d]}}return null}function R(e,t,r,n,i){if(null===t)return t
J(r)&&(r=null),J(i)&&(i=!1),n=n||{}
var o=e.getInverse()
if(U(t))return t in o?o[t]["@none"]["@type"]["@none"]:t
if(n.vocab&&t in o){var a=e["@language"]||"@none",s=[]
P(r)&&"@index"in r&&s.push("@index")
var u="@language",l="@null"
if(i)u="@type",l="@reverse",s.push("@set")
else if(G(r)){"@index"in r||s.push("@list")
for(var c=r["@list"],f=0===c.length?a:null,h=null,d=0;d<c.length;++d){var p=c[d],v="@none",g="@none"
if(Q(p)?"@language"in p?v=p["@language"]:"@type"in p?g=p["@type"]:v="@null":g="@id",null===f?f=v:v!==f&&Q(p)&&(f="@none"),null===h?h=g:g!==h&&(h="@none"),"@none"===f&&"@none"===h)break}f=f||"@none",h=h||"@none","@none"!==h?(u="@type",l=h):l=f}else Q(r)?"@language"in r&&!("@index"in r)?(s.push("@language"),l=r["@language"]):"@type"in r&&(u="@type",l=r["@type"]):(u="@type",l="@id"),s.push("@set")
s.push("@none")
var m=I(e,t,r,s,u,l)
if(null!==m)return m}if(n.vocab&&"@vocab"in e){var y=e["@vocab"]
if(0===t.indexOf(y)&&t!==y){var b=t.substr(y.length)
if(!(b in e.mappings))return b}}for(var w=null,x=0,_=[],T=e.fastCurieMap,k=t.length-1;x<k&&t[x]in T;++x)""in(T=T[t[x]])&&_.push(T[""][0])
for(var d=_.length-1;d>=0;--d)for(var N=_[d],E=N.terms,j=0;j<E.length;++j){var R=E[j]+":"+t.substr(N.iri.length),O=!(R in e.mappings)||null===r&&e.mappings[R]["@id"]===t
O&&(null===w||S(R,w)<0)&&(w=R)}return null!==w?w:n.vocab?t:A(e["@base"],t)}function O(t,r,n){if(Q(n)){var i=e.getContextValue(t,r,"@type"),o=e.getContextValue(t,r,"@language"),a=e.getContextValue(t,r,"@container"),s="@index"in n&&"@index"!==a
if(!s&&(n["@type"]===i||n["@language"]===o))return n["@value"]
var u=Object.keys(n).length,l=1===u||2===u&&"@index"in n&&!s,c="@language"in t,f=H(n["@value"]),h=t.mappings[r]&&null===t.mappings[r]["@language"]
if(l&&(!c||!f||h))return n["@value"]
var d={}
return s&&(d[R(t,"@index")]=n["@index"]),"@type"in n?d[R(t,"@type")]=R(t,n["@type"],null,{vocab:!0}):"@language"in n&&(d[R(t,"@language")]=n["@language"]),d[R(t,"@value")]=n["@value"],d}var p=L(t,r,{vocab:!0}),i=e.getContextValue(t,r,"@type"),v=R(t,n["@id"],null,{vocab:"@vocab"===i})
if("@id"===i||"@vocab"===i||"@graph"===p)return v
var d={}
return d[R(t,"@id")]=v,d}function C(e,t,r,n){if(r in n){if(n[r])return
throw new Re("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n[r]=!1,U(r))throw new Re("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r})
if(""===r)throw new Re("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})
e.mappings[r]&&delete e.mappings[r]
var i=t[r]
if(null===i||P(i)&&null===i["@id"])return e.mappings[r]=null,void(n[r]=!0)
if(H(i)&&(i={"@id":i}),!P(i))throw new Re("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t})
var o=e.mappings[r]={}
if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new Re("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t})
var a=i["@reverse"]
if(!H(a))throw new Re("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})
var s=L(e,a,{vocab:!0,base:!1},t,n)
if(!K(s))throw new Re("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})
o["@id"]=s,o.reverse=!0}else if("@id"in i){var s=i["@id"]
if(!H(s))throw new Re("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})
if(s!==r){if(s=L(e,s,{vocab:!0,base:!1},t,n),!K(s)&&!U(s))throw new Re("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})
o["@id"]=s}}var u=r.indexOf(":")
if(o._termHasColon=-1!==u,!("@id"in o))if(o._termHasColon){var l=r.substr(0,u)
if(l in t&&C(e,t,l,n),e.mappings[l]){var c=r.substr(u+1)
o["@id"]=e.mappings[l]["@id"]+c}else o["@id"]=r}else{if(!("@vocab"in e))throw new Re("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r})
o["@id"]=e["@vocab"]+r}if(n[r]=!0,"@type"in i){var f=i["@type"]
if(!H(f))throw new Re("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})
if("@id"!==f&&"@vocab"!==f){if(f=L(e,f,{vocab:!0,base:!1},t,n),!K(f))throw new Re("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})
if(0===f.indexOf("_:"))throw new Re("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=f}if("@container"in i){var h=i["@container"]
if("@list"!==h&&"@set"!==h&&"@index"!==h&&"@language"!==h)throw new Re("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t})
if(o.reverse&&"@index"!==h&&"@set"!==h&&null!==h)throw new Re("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t})
o["@container"]=h}if("@language"in i&&!("@type"in i)){var d=i["@language"]
if(null!==d&&!H(d))throw new Re("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t})
null!==d&&(d=d.toLowerCase()),o["@language"]=d}var s=o["@id"]
if("@context"===s||"@preserve"===s)throw new Re("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function L(t,r,n,i,o){if(null===r||U(r))return r
if(r=String(r),i&&r in i&&!0!==o[r]&&C(t,i,r,o),n=n||{},n.vocab){var a=t.mappings[r]
if(null===a)return null
if(a)return a["@id"]}var s=r.indexOf(":")
if(-1!==s){var u=r.substr(0,s),l=r.substr(s+1)
if("_"===u||0===l.indexOf("//"))return r
i&&u in i&&C(t,i,u,o)
var a=t.mappings[u]
return a?a["@id"]+l:r}if(n.vocab&&"@vocab"in t)return t["@vocab"]+r
var c=r
return n.base&&(c=e.prependBase(t["@base"],c)),c}function D(t,r){if(null===t)return r
if(-1!==r.indexOf(":"))return r
H(t)&&(t=e.url.parse(t||""))
var n=e.url.parse(r),i={protocol:t.protocol||""}
if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query
else if(i.authority=t.authority,""===n.path)i.path=t.path,null!==n.query?i.query=n.query:i.query=t.query
else{if(0===n.path.indexOf("/"))i.path=n.path
else{var o=t.path
""!==n.path&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=n.path),i.path=o}i.query=n.query}i.path=ue(i.path,!!i.authority)
var a=i.protocol
return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a}function A(t,r){if(null===t)return r
H(t)&&(t=e.url.parse(t||""))
var n=""
if(""!==t.href?n+=(t.protocol||"")+"//"+(t.authority||""):r.indexOf("//")&&(n+="//"),0!==r.indexOf(n))return r
for(var i=e.url.parse(r.substr(n.length)),o=t.normalizedPath.split("/"),a=i.normalizedPath.split("/"),s=i.fragment||i.query?0:1;o.length>0&&a.length>s&&o[0]===a[0];)o.shift(),a.shift()
var u=""
if(o.length>0){o.pop()
for(var l=0;l<o.length;++l)u+="../"}return u+=a.join("/"),null!==i.query&&(u+="?"+i.query),null!==i.fragment&&(u+="#"+i.fragment),""===u&&(u="./"),u}function M(t){function r(){var e=this
if(e.inverse)return e.inverse
for(var t=e.inverse={},r=e.fastCurieMap={},o={},a=e["@language"]||"@none",s=e.mappings,u=Object.keys(s).sort(S),l=0;l<u.length;++l){var c=u[l],f=s[c]
if(null!==f){var h=f["@container"]||"@none",d=f["@id"]
F(d)||(d=[d])
for(var p=0;p<d.length;++p){var v=d[p],g=t[v],m=U(v)
if(g)m||f._termHasColon||o[v].push(c)
else if(t[v]=g={},!m&&!f._termHasColon){o[v]=[c]
var y={iri:v,terms:o[v]}
v[0]in r?r[v[0]].push(y):r[v[0]]=[y]}if(g[h]||(g[h]={"@language":{},"@type":{}}),g=g[h],f.reverse)i(f,c,g["@type"],"@reverse")
else if("@type"in f)i(f,c,g["@type"],f["@type"])
else if("@language"in f){var b=f["@language"]||"@null"
i(f,c,g["@language"],b)}else i(f,c,g["@language"],a),i(f,c,g["@type"],"@none"),i(f,c,g["@language"],"@none")}}}for(var w in r)n(r,w,1)
return t}function n(e,t,r){for(var i,o,a=e[t],s=e[t]={},u=0;u<a.length;++u)i=a[u].iri,o=r>=i.length?"":i[r],o in s?s[o].push(a[u]):s[o]=[a[u]]
for(var t in s)""!==t&&n(s,t,r+1)}function i(e,t,r,n){n in r||(r[n]=t)}function o(){var e={}
return e["@base"]=this["@base"],e.mappings=ee(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}return{"@base":e.url.parse(t.base||""),mappings:{},inverse:null,getInverse:r,clone:o}}function U(e){if(!H(e))return!1
switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function P(e){return"[object Object]"===Object.prototype.toString.call(e)}function q(e){return P(e)&&0===Object.keys(e).length}function F(e){return Array.isArray(e)}function B(e){if(!H(e)&&!q(e)){var t=!1
if(F(e)){t=!0
for(var r=0;r<e.length;++r)if(!H(e[r])){t=!1
break}}if(!t)throw new Re('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function H(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function z(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function X(e){return z(e)&&-1!==String(e).indexOf(".")}function V(e){return!isNaN(parseFloat(e))&&isFinite(e)}function W(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function J(e){return void 0===e}function $(e){var t=!1
if(P(e)&&!("@value"in e||"@set"in e||"@list"in e)){t=Object.keys(e).length>1||!("@id"in e)}return t}function Y(e){return P(e)&&1===Object.keys(e).length&&"@id"in e}function Q(e){return P(e)&&"@value"in e}function G(e){return P(e)&&"@list"in e}function Z(e){var t=!1
return P(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function K(e){return H(e)&&-1!==e.indexOf(":")}function ee(e){if(e&&"object"==typeof e){var t
if(F(e)){t=[]
for(var r=0;r<e.length;++r)t[r]=ee(e[r])}else if(P(e)){t={}
for(var n in e)t[n]=ee(e[n])}else t=e.toString()
return t}return e}function te(t,r,n,i){var o=Object.keys(r).length
if(F(t)){for(var a=0;a<t.length;++a)te(t[a],r,n,i)
return o<Object.keys(r).length}if(P(t)){for(var s in t)if("@context"===s){var u=t[s]
if(F(u))for(var l=u.length,a=0;a<l;++a){var c=u[a]
H(c)&&(c=e.prependBase(i,c),n?(c=r[c],F(c)?(Array.prototype.splice.apply(u,[a,1].concat(c)),a+=c.length-1,l=u.length):u[a]=c):c in r||(r[c]=!1))}else H(u)&&(u=e.prependBase(i,u),n?t[s]=r[u]:u in r||(r[u]=!1))}else te(t[s],r,n,i)
return o<Object.keys(r).length}return!1}function re(e,t,r){var n=null,i=t.documentLoader,o=function(e,t,r,i,a){if(Object.keys(t).length>Ie)return n=new Re("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Ie}),a(n)
var s={},u=function(){te(e,s,!0,i),a(null,e)}
te(e,s,!1,i)||u()
var l=[]
for(var c in s)!1===s[c]&&l.push(c)
for(var f=l.length,h=0;h<l.length;++h)!function(e){if(e in t)return n=new Re("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),a(n)
var i=ee(t)
i[e]=!0
var l=function(t,l){if(!n){var c=l?l.document:null
if(!t&&H(c))try{c=JSON.parse(c)}catch(e){t=e}if(t?t=new Re("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):P(c)||(t=new Re("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return n=t,a(n)
c="@context"in c?{"@context":c["@context"]}:{"@context":{}},l.contextUrl&&(F(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(l.contextUrl)),o(c,i,r,e,function(t,r){if(t)return a(t)
s[e]=r["@context"],0===(f-=1)&&u()})}},c=r(e,l)
c&&"then"in c&&c.then(l.bind(null,null),l)}(l[h])}
o(e,{},i,t.base,r)}function ne(e){for(var t=/(?:\r\n)|(?:\n)|(?:\r)/g,r=new RegExp("^[ \\t]*(?:#.*)?$"),n=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]*\\.))[ \\t]*(?:#.*)?$'),i={},o=e.split(t),a=0,s=0;s<o.length;++s){var u=o[s]
if(a++,!r.test(u)){var l=u.match(n)
if(null===l)throw new Re("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:a})
var c={}
if(J(l[1])?c.subject={type:"blank node",value:l[2]}:c.subject={type:"IRI",value:l[1]},c.predicate={type:"IRI",value:l[3]},J(l[4]))if(J(l[5])){c.object={type:"literal"},J(l[7])?J(l[8])?c.object.datatype=ye:(c.object.datatype=je,c.object.language=l[8]):c.object.datatype=l[7]
var f=l[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\")
c.object.value=f}else c.object={type:"blank node",value:l[5]}
else c.object={type:"IRI",value:l[4]}
var h="@default"
if(J(l[9])?J(l[10])||(h=l[10]):h=l[9],h in i){for(var d=!0,p=i[h],g=0;d&&g<p.length;++g)v(p[g],c)&&(d=!1)
d&&p.push(c)}else i[h]=[c]}}return i}function ie(e){var t=[]
for(var r in e)for(var n=e[r],i=0;i<n.length;++i){var o=n[i]
"@default"===r&&(r=null),t.push(oe(o,r))}return t.sort().join("")}function oe(e,t){var r=e.subject,n=e.predicate,i=e.object,o=t||null
"name"in e&&e.name&&(o=e.name.value)
var a=""
if("IRI"===r.type?a+="<"+r.value+">":a+=r.value,a+=" ","IRI"===n.type?a+="<"+n.value+">":a+=n.value,a+=" ","IRI"===i.type)a+="<"+i.value+">"
else if("blank node"===i.type)a+=i.value
else{var s=i.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"')
a+='"'+s+'"',i.datatype===je?i.language&&(a+="@"+i.language):i.datatype!==ye&&(a+="^^<"+i.datatype+">")}return null!==o&&void 0!==o&&(0!==o.indexOf("_:")?a+=" <"+o+">":a+=" "+o),a+=" .\n"}function ae(e){var t={}
t["@default"]=[]
for(var r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n]
if(null!==i){var o=e.getSubjectTriples(i)
if(null!==o){var a=o.predicates
for(var s in a)for(var u=a[s].objects,l=0;l<u.length;++l){var c=u[l],f={}
0===i.indexOf("_:")?f.subject={type:"blank node",value:i}:f.subject={type:"IRI",value:i},0===s.indexOf("_:")?f.predicate={type:"blank node",value:s}:f.predicate={type:"IRI",value:s}
var h=c.value
if(c.type===Ne){de||Me()
var d=new de
h=""
for(var p=0;p<c.value.length;p++)c.value[p].nodeType===pe.ELEMENT_NODE?h+=d.serializeToString(c.value[p]):c.value[p].nodeType===pe.TEXT_NODE&&(h+=c.value[p].nodeValue)}f.object={},c.type===Ee?0===c.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",c.type===ke?c.language?(f.object.datatype=je,f.object.language=c.language):f.object.datatype=ye:f.object.datatype=c.type),f.object.value=h,t["@default"].push(f)}}}}return t}function se(e){this.prefix=e,this.counter=0,this.existing={}}function ue(e,t){var r=""
0===e.indexOf("/")&&(r="/")
for(var n=e.split("/"),i=[];n.length>0;)"."===n[0]||""===n[0]&&n.length>1?n.shift():".."!==n[0]?i.push(n.shift()):(n.shift(),t||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."))
return r+i.join("/")}e.compact=function(t,r,n,i){function o(e,t,n,o){if(e)return i(e)
o.compactArrays&&!o.graph&&F(t)?1===t.length?t=t[0]:0===t.length&&(t={}):o.graph&&P(t)&&(t=[t]),P(r)&&"@context"in r&&(r=r["@context"]),r=ee(r),F(r)||(r=[r])
var a=r
r=[]
for(var s=0;s<a.length;++s)(!P(a[s])||Object.keys(a[s]).length>0)&&r.push(a[s])
var u=r.length>0
if(1===r.length&&(r=r[0]),F(t)){var l=R(n,"@graph"),c=t
t={},u&&(t["@context"]=r),t[l]=c}else if(P(t)&&u){var c=t
t={"@context":r}
for(var f in c)t[f]=c[f]}i(null,t,n)}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))})
if("function"==typeof n&&(i=n,n={}),n=n||{},null===r)return e.nextTick(function(){i(new Re("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))})
if(null===t)return e.nextTick(function(){i(null,null)})
"base"in n||(n.base="string"==typeof t?t:""),"compactArrays"in n||(n.compactArrays=!0),"graph"in n||(n.graph=!1),"skipExpansion"in n||(n.skipExpansion=!1),"documentLoader"in n||(n.documentLoader=e.loadDocument),"link"in n||(n.link=!1),n.link&&(n.skipExpansion=!0)
!function(t,r,n){if(r.skipExpansion)return e.nextTick(function(){n(null,t)})
e.expand(t,r,n)}(t,n,function(t,a){if(t)return i(new Re("Could not expand input before compaction.","jsonld.CompactError",{cause:t}))
var s=M(n)
e.processContext(s,r,n,function(e,t){if(e)return i(new Re("Could not process context before compaction.","jsonld.CompactError",{cause:e}))
var r
try{r=(new Oe).compact(t,null,a,n)}catch(e){return i(e)}o(null,r,t,n)})})},e.expand=function(t,r,n){function i(e){"base"in r||(r.base=e.documentUrl||"")
var t={document:ee(e.document),remoteContext:{"@context":e.contextUrl}}
if("expandContext"in r){var i=ee(r.expandContext)
t.expandContext="object"==typeof i&&"@context"in i?i:{"@context":i}}re(t,r,function(e,t){if(e)return n(e)
var i
try{var o=new Oe,a=M(r),s=t.document,u=t.remoteContext["@context"]
t.expandContext&&(a=o.processContext(a,t.expandContext["@context"],r)),u&&(a=o.processContext(a,u,r)),i=o.expand(a,null,s,r,!1),P(i)&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),F(i)||(i=[i])}catch(e){return n(e)}n(null,i)})}if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not expand, too few arguments."))})
"function"==typeof r&&(n=r,r={}),r=r||{},"documentLoader"in r||(r.documentLoader=e.loadDocument),"keepFreeFloatingNodes"in r||(r.keepFreeFloatingNodes=!1),e.nextTick(function(){if("string"==typeof t){var e=function(e,t){if(e)return n(e)
try{if(!t.document)throw new Re("No remote document found at the given URL.","jsonld.NullRemoteDocument")
"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return n(new Re("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}i(t)},o=r.documentLoader(t,e)
return void(o&&"then"in o&&o.then(e.bind(null,null),e))}i({contextUrl:null,documentUrl:null,document:t})})},e.flatten=function(t,r,n,i){if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))})
"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new Re("Could not expand input before flattening.","jsonld.FlattenError",{cause:t}))
var a
try{a=(new Oe).flatten(o)}catch(e){return i(e)}if(null===r)return i(null,a)
n.graph=!0,n.skipExpansion=!0,e.compact(a,r,n,function(e,t){if(e)return i(new Re("Could not compact flattened output.","jsonld.FlattenError",{cause:e}))
i(null,t)})})},e.frame=function(t,r,n,i){function o(r){var o,a=r.document
a?(o=a["@context"],r.contextUrl?(o?F(o)?o.push(r.contextUrl):o=[o,r.contextUrl]:o=r.contextUrl,a["@context"]=o):o=o||{}):o={},e.expand(t,n,function(t,r){if(t)return i(new Re("Could not expand input before framing.","jsonld.FrameError",{cause:t}))
var s=ee(n)
s.isFrame=!0,s.keepFreeFloatingNodes=!0,e.expand(a,s,function(t,n){if(t)return i(new Re("Could not expand frame before framing.","jsonld.FrameError",{cause:t}))
var a
try{a=(new Oe).frame(r,n,s)}catch(e){return i(e)}s.graph=!0,s.skipExpansion=!0,s.link={},e.compact(a,o,s,function(e,t,r){if(e)return i(new Re("Could not compact framed output.","jsonld.FrameError",{cause:e}))
var n=R(r,"@graph")
s.link={},t[n]=j(r,t[n],s),i(null,t)})})})}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))})
"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),"embed"in n||(n.embed="@last"),n.explicit=n.explicit||!1,"requireAll"in n||(n.requireAll=!0),n.omitDefault=n.omitDefault||!1,e.nextTick(function(){if("string"==typeof r){var e=function(e,t){if(e)return i(e)
try{if(!t.document)throw new Re("No remote document found at the given URL.","jsonld.NullRemoteDocument")
"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return i(new Re("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}o(t)},t=n.documentLoader(r,e)
return void(t&&"then"in t&&t.then(e.bind(null,null),e))}o({contextUrl:null,documentUrl:null,document:r})})},e.link=function(t,r,n,i){var o={}
r&&(o["@context"]=r),o["@embed"]="@link",e.frame(t,o,n,i)},e.objectify=function(t,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new Re("Could not expand input before linking.","jsonld.LinkError",{cause:t}))
var a
try{a=(new Oe).flatten(o)}catch(e){return i(e)}n.graph=!0,n.skipExpansion=!0,e.compact(a,r,n,function(t,r,n){if(t)return i(new Re("Could not compact flattened output before linking.","jsonld.LinkError",{cause:t}))
var o=R(n,"@graph"),a=r[o][0],s=function(t){if(P(t)||F(t)){if(P(t)){if(s.visited[t["@id"]])return
s.visited[t["@id"]]=!0}for(var r in t){var i=t[r],o="@id"===e.getContextValue(n,r,"@type")
if(F(i)||P(i)||o)if(H(i)&&o)t[r]=i=a[i],s(i)
else if(F(i))for(var u=0;u<i.length;++u)H(i[u])&&o?i[u]=a[i[u]]:P(i[u])&&"@id"in i[u]&&(i[u]=a[i[u]["@id"]]),s(i[u])
else if(P(i)){var l=i["@id"]
t[r]=i=a[l],s(i)}}}}
s.visited={},s(a),r.of_type={}
for(var u in a)if("@type"in a[u]){var l=a[u]["@type"]
F(l)||(l=[l])
for(var c=0;c<l.length;++c)l[c]in r.of_type||(r.of_type[l[c]]=[]),r.of_type[l[c]].push(a[u])}i(null,r)})})},e.normalize=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not normalize, too few arguments."))})
if("function"==typeof r&&(n=r,r={}),r=r||{},"algorithm"in r||(r.algorithm="URGNA2012"),"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),"inputFormat"in r){if("application/nquads"!==r.inputFormat)return n(new Re("Unknown normalization input format.","jsonld.NormalizeError"))
var i=ne(t);(new Oe).normalize(i,r,n)}else{var o=ee(r)
delete o.format,o.produceGeneralizedRdf=!1,e.toRDF(t,o,function(e,t){if(e)return n(new Re("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e}));(new Oe).normalize(t,r,n)})}},e.fromRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert from RDF, too few arguments."))})
"function"==typeof r&&(n=r,r={}),r=r||{},"useRdfType"in r||(r.useRdfType=!1),"useNativeTypes"in r||(r.useNativeTypes=!1),"format"in r||!H(t)||"format"in r||(r.format="application/nquads"),e.nextTick(function(){function e(e,t,r){(new Oe).fromRDF(e,t,r)}var i
if(r.format){if(!(i=r.rdfParser||he[r.format]))return n(new Re("Unknown input format.","jsonld.UnknownFormat",{format:r.format}))}else i=function(){return t}
var o=!1
try{t=i(t,function(t,i){if(o=!0,t)return n(t)
e(i,r,n)})}catch(e){if(!o)return n(e)
throw e}if(t){if("then"in t)return t.then(function(t){e(t,r,n)},n)
e(t,r,n)}})},e.toRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert to RDF, too few arguments."))})
"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new Re("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}))
var i
try{if(i=Oe.prototype.toRDF(t,r),r.format){if("application/nquads"===r.format)return n(null,ie(i))
throw new Re("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}}catch(e){return n(e)}n(null,i)})},e.createNodeMap=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not create node map, too few arguments."))})
"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new Re("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}))
var i
try{i=(new Oe).createNodeMap(t,r)}catch(e){return n(e)}n(null,i)})},e.merge=function(t,r,n,i){function o(e,t){if(!u){if(e)return u=e,i(new Re("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}))
s.push(t),0==--l&&a(s)}}function a(t){var o=!0
"mergeNodes"in n&&(o=n.mergeNodes)
var a,s=n.namer||n.issuer||new se("_:b"),u={"@default":{}}
try{for(var l=0;l<t.length;++l){var c=t[l]
c=e.relabelBlankNodes(c,{issuer:new se("_:b"+l+"-")})
var f=o||0===l?u:{"@default":{}}
if(g(c,f,"@default",s),f!==u)for(var h in f){var d=f[h]
if(h in u){var p=u[h]
for(var v in d)v in p||(p[v]=d[v])}else u[h]=d}}a=m(u)}catch(e){return i(e)}for(var y=[],b=Object.keys(a).sort(),w=0;w<b.length;++w){var x=a[b[w]]
Y(x)||y.push(x)}if(null===r)return i(null,y)
n.graph=!0,n.skipExpansion=!0,e.compact(y,r,n,function(e,t){if(e)return i(new Re("Could not compact merged output.","jsonld.MergeError",{cause:e}))
i(null,t)})}if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))})
if(!F(t))return e.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))})
"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{}
for(var s=[],u=null,l=t.length,c=0;c<t.length;++c){var f={}
for(var h in n)f[h]=n[h]
e.expand(t[c],f,o)}},e.relabelBlankNodes=function(e,t){return t=t||{},l(t.namer||t.issuer||new se("_:b"),e)},e.prependBase=function(e,t){return D(e,t)},e.documentLoader=function(t,r){var n=new Re("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"})
return a?r(n,{contextUrl:null,documentUrl:t,document:null}):e.promisify(function(e){e(n)})},e.loadDocument=function(t,r){var n=e.documentLoader(t,r)
n&&"then"in n&&n.then(r.bind(null,null),r)},e.promises=function(r){r=r||{}
var n=Array.prototype.slice,o=e.promisify,a=r.api||{},s=r.version||"jsonld.js"
"string"==typeof r.api&&(r.version||(s=r.api),a={}),a.expand=function(t){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.")
return o.apply(null,[e.expand].concat(n.call(arguments)))},a.compact=function(t,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.")
var i=function(t,r,n,i){e.compact(t,r,n,function(e,t){i(e,t)})}
return o.apply(null,[i].concat(n.call(arguments)))},a.flatten=function(t){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.")
return o.apply(null,[e.flatten].concat(n.call(arguments)))},a.frame=function(t,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.")
return o.apply(null,[e.frame].concat(n.call(arguments)))},a.fromRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.")
return o.apply(null,[e.fromRDF].concat(n.call(arguments)))},a.toRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.")
return o.apply(null,[e.toRDF].concat(n.call(arguments)))},a.normalize=function(t){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.")
return o.apply(null,[e.normalize].concat(n.call(arguments)))},"jsonld.js"===s&&(a.link=function(t,r){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.")
return o.apply(null,[e.link].concat(n.call(arguments)))},a.objectify=function(t){return o.apply(null,[e.objectify].concat(n.call(arguments)))},a.createNodeMap=function(t){return o.apply(null,[e.createNodeMap].concat(n.call(arguments)))},a.merge=function(t){return o.apply(null,[e.merge].concat(n.call(arguments)))})
try{e.Promise=i.Promise||t("es6-promise").Promise}catch(e){var u=function(){throw new Error("Unable to find a Promise implementation.")}
for(var l in a)a[l]=u}return a},e.promisify=function(r){if(!e.Promise)try{e.Promise=i.Promise||t("es6-promise").Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}var n=Array.prototype.slice.call(arguments,1)
return new e.Promise(function(e,t){r.apply(null,n.concat(function(r,n){r?t(r):e(n)}))})},e.promises({api:e.promises}),r.prototype=e.promises({version:"json-ld-1.0"}),r.prototype.toString=function(){return this instanceof r?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},e.JsonLdProcessor=r
var le=!!Object.defineProperty
if(le)try{Object.defineProperty({},"x",{})}catch(e){le=!1}le&&(Object.defineProperty(r,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(r.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:r})),s&&void 0===i.JsonLdProcessor&&(le?Object.defineProperty(i,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:r}):i.JsonLdProcessor=r)
var ce="function"==typeof setImmediate&&setImmediate,fe=ce?function(e){ce(e)}:function(e){setTimeout(e,0)}
"object"==typeof n&&"function"==typeof n.nextTick?e.nextTick=n.nextTick:e.nextTick=fe,e.setImmediate=ce?fe:e.nextTick,e.parseLinkHeader=function(e){for(var t={},r=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),n=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,i=0;i<r.length;++i){var o=r[i].match(n)
if(o){for(var a={target:o[1]},s=o[2],u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=u.exec(s);)a[o[1]]=void 0===o[2]?o[3]:o[2]
var l=a.rel||""
F(t[l])?t[l].push(a):t[l]=l in t?[t[l],a]:a}}return t},e.RequestQueue=function(){this._requests={}},e.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},e.RequestQueue.prototype.add=function(t,r){var n=this
if(!r&&!n._usePromise)throw new Error("callback must be specified.")
if(n._usePromise)return new e.Promise(function(e,r){var i=n._requests[t]
i||(i=n._requests[t]=n._loader(t).then(function(e){return delete n._requests[t],e}).catch(function(e){throw delete n._requests[t],e})),i.then(function(t){e(t)}).catch(function(e){r(e)})})
t in n._requests?n._requests[t].push(r):(n._requests[t]=[r],n._loader(t,function(e,r){var i=n._requests[t]
delete n._requests[t]
for(var o=0;o<i.length;++o)i[o](e,r)}))},e.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},e.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e]
if(t.expires>=+new Date)return t.ctx
delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},e.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},e.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},e.ActiveContextCache.prototype.get=function(e,t){var r=JSON.stringify(e),n=JSON.stringify(t),i=this.cache[r]
return i&&n in i?i[n]:null},e.ActiveContextCache.prototype.set=function(e,t,r){if(this.order.length===this.size){var n=this.order.shift()
delete this.cache[n.activeCtx][n.localCtx]}var i=JSON.stringify(e),o=JSON.stringify(t)
this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=ee(r)},e.cache={activeCtx:new e.ActiveContextCache},e.documentLoaders={},e.documentLoaders.jquery=function(t,r){function n(n,i){return 0!==n.indexOf("http:")&&0!==n.indexOf("https:")?i(new Re('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):r.secure&&0!==n.indexOf("https")?i(new Re('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):void t.ajax({url:n,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(t,r,o){var a={contextUrl:null,documentUrl:n,document:t},s=o.getResponseHeader("Content-Type"),u=o.getResponseHeader("Link")
if(u&&"application/ld+json"!==s){if(u=e.parseLinkHeader(u)[Se],F(u))return i(new Re("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),a)
u&&(a.contextUrl=u.target)}i(null,a)},error:function(e,t,r){i(new Re("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:r}),{contextUrl:null,documentUrl:n,document:null})}})}r=r||{}
var i=new e.RequestQueue
return("usePromise"in r?r.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(n,t)}):i.wrapLoader(n)},e.documentLoaders.node=function(r){function n(t,l,c){function f(r,i,a){if(h={contextUrl:null,documentUrl:t,document:a||null},r)return c(new Re("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:t,cause:r}),h)
var s=u.STATUS_CODES[i.statusCode]
if(i.statusCode>=400)return c(new Re("URL could not be dereferenced: "+s,"jsonld.InvalidUrl",{code:"loading document failed",url:t,httpStatusCode:i.statusCode}),h)
if(i.headers.link&&"application/ld+json"!==i.headers["content-type"]){var f=e.parseLinkHeader(i.headers.link)[Se]
if(F(f))return c(new Re("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:t}),h)
f&&(h.contextUrl=f.target)}if(i.statusCode>=300&&i.statusCode<400&&i.headers.location)return l.length===o?c(new Re("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:t,httpStatusCode:i.statusCode,redirects:l}),h):-1!==l.indexOf(t)?c(new Re("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:t,httpStatusCode:i.statusCode,redirects:l}),h):(l.push(t),n(i.headers.location,l,c))
l.push(t),c(r,h)}if(0!==t.indexOf("http:")&&0!==t.indexOf("https:"))return c(new Re('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null})
if(r.secure&&0!==t.indexOf("https"))return c(new Re('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null})
var h=null
if(null!==h)return c(null,h)
var d={Accept:s}
for(var p in r.headers)d[p]=r.headers[p]
a({url:t,headers:d,strictSSL:i,followRedirect:!1},f)}r=r||{}
var i=!("strictSSL"in r)||r.strictSSL,o="maxRedirects"in r?r.maxRedirects:-1,a="request"in r?r.request:t("request"),s="application/ld+json, application/json",u=t("http"),l=new e.RequestQueue
if(r.usePromise)return l.wrapLoader(function(t){return e.promisify(n,t,[])})
var c=r.headers||{}
if("Accept"in c||"accept"in c)throw new RangeError('Accept header may not be specified as an option; only "'+s+'" is supported.')
return l.wrapLoader(function(e,t){n(e,[],t)})},e.documentLoaders.xhr=function(t){function r(r,i){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return i(new Re('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})
if(t.secure&&0!==r.indexOf("https"))return i(new Re('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})
var o=t.xhr||XMLHttpRequest,a=new o
a.onload=function(){if(a.status>=400)return i(new Re("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:a.status}),{contextUrl:null,documentUrl:r,document:null})
var t,o={contextUrl:null,documentUrl:r,document:a.response},s=a.getResponseHeader("Content-Type")
if(n.test(a.getAllResponseHeaders())&&(t=a.getResponseHeader("Link")),t&&"application/ld+json"!==s){if(t=e.parseLinkHeader(t)[Se],F(t))return i(new Re("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),o)
t&&(o.contextUrl=t.target)}i(null,o)},a.onerror=function(){i(new Re("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})},a.open("GET",r,!0),a.setRequestHeader("Accept","application/ld+json, application/json"),a.send()}t=t||{}
var n=/(^|(\r\n))link:/i,i=new e.RequestQueue
return("usePromise"in t?t.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(r,t)}):i.wrapLoader(r)},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new Re('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t})
e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.processContext=function(t,r){var n={},i=2
arguments.length>3&&(n=arguments[2]||{},i+=1)
var o=arguments[i]
if("base"in n||(n.base=""),"documentLoader"in n||(n.documentLoader=e.loadDocument),null===r)return o(null,M(n))
r=ee(r),P(r)&&"@context"in r||(r={"@context":r}),re(r,n,function(e,r){if(e)return o(e)
try{r=(new Oe).processContext(t,r,n)}catch(e){return o(e)}o(null,r)})},e.hasProperty=function(e,t){var r=!1
if(t in e){var n=e[t]
r=!F(n)||n.length>0}return r},e.hasValue=function(t,r,n){var i=!1
if(e.hasProperty(t,r)){var o=t[r],a=G(o)
if(F(o)||a){a&&(o=o["@list"])
for(var s=0;s<o.length;++s)if(e.compareValues(n,o[s])){i=!0
break}}else F(n)||(i=e.compareValues(n,o))}return i},e.addValue=function(t,r,n,i){if(i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),F(n)){0!==n.length||!i.propertyIsArray||r in t||(t[r]=[])
for(var o=0;o<n.length;++o)e.addValue(t,r,n[o],i)}else if(r in t){var a=!i.allowDuplicate&&e.hasValue(t,r,n)
F(t[r])||a&&!i.propertyIsArray||(t[r]=[t[r]]),a||t[r].push(n)}else t[r]=i.propertyIsArray?[n]:n},e.getValues=function(e,t){var r=e[t]||[]
return F(r)||(r=[r]),r},e.removeProperty=function(e,t){delete e[t]},e.removeValue=function(t,r,n,i){"propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1)
var o=e.getValues(t,r).filter(function(t){return!e.compareValues(t,n)})
0===o.length?e.removeProperty(t,r):1!==o.length||i.propertyIsArray?t[r]=o:t[r]=o[0]},e.compareValues=function(e,t){return e===t||(!(!Q(e)||!Q(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(P(e)&&"@id"in e&&P(t)&&"@id"in t)&&e["@id"]===t["@id"])},e.getContextValue=function(e,t,r){var n=null
if(null===t)return n
if("@language"===r&&r in e&&(n=e[r]),e.mappings[t]){var i=e.mappings[t]
J(r)?n=i:r in i&&(n=i[r])}return n}
var he={}
if(e.registerRDFParser=function(e,t){he[e]=t},e.unregisterRDFParser=function(e){delete he[e]},a){if(void 0===de)var de=null
if(void 0===pe)var pe={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ve="http://www.w3.org/2001/XMLSchema#boolean",ge="http://www.w3.org/2001/XMLSchema#double",me="http://www.w3.org/2001/XMLSchema#integer",ye="http://www.w3.org/2001/XMLSchema#string",be="http://www.w3.org/1999/02/22-rdf-syntax-ns#",we=be+"first",xe=be+"rest",_e=be+"nil",Te=be+"type",ke=be+"PlainLiteral",Ne=be+"XMLLiteral",Ee=be+"object",je=be+"langString",Se="http://www.w3.org/ns/json-ld#context",Ie=10,Re=function(e,t,r){a?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=t||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=r||{}}
a?t("util").inherits(Re,Error):"undefined"!=typeof Error&&(Re.prototype=new Error)
var Oe=function(){}
Oe.prototype.compact=function(t,r,n,i){if(F(n)){for(var o=[],a=0;a<n.length;++a){var s=this.compact(t,r,n[a],i)
null!==s&&o.push(s)}if(i.compactArrays&&1===o.length){var u=e.getContextValue(t,r,"@container")
null===u&&(o=o[0])}return o}if(P(n)){if(i.link&&"@id"in n&&n["@id"]in i.link)for(var l=i.link[n["@id"]],a=0;a<l.length;++a)if(l[a].expanded===n)return l[a].compacted
if(Q(n)||Y(n)){var o=O(t,r,n)
return i.link&&Y(n)&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o})),o}var c="@reverse"===r,o={}
i.link&&"@id"in n&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o}))
for(var f=Object.keys(n).sort(),h=0;h<f.length;++h){var d=f[h],p=n[d]
if("@id"!==d&&"@type"!==d)if("@reverse"!==d)if("@index"!==d)if("@graph"!==d&&"@list"!==d&&U(d)){var v=R(t,d)
e.addValue(o,v,p)}else{if(0===p.length){var g=R(t,d,p,{vocab:!0},c)
e.addValue(o,g,p,{propertyIsArray:!0})}for(var m=0;m<p.length;++m){var y=p[m],g=R(t,d,y,{vocab:!0},c),u=e.getContextValue(t,g,"@container"),b=G(y),w=null
b&&(w=y["@list"])
var x=this.compact(t,g,b?w:y,i)
if(b)if(F(x)||(x=[x]),"@list"!==u){var _={}
_[R(t,"@list")]=x,x=_,"@index"in y&&(x[R(t,"@index")]=y["@index"])}else if(g in o)throw new Re('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"})
if("@language"===u||"@index"===u){var T
g in o?T=o[g]:o[g]=T={},"@language"===u&&Q(x)&&(x=x["@value"]),e.addValue(T,y[u],x)}else{var k=!i.compactArrays||"@set"===u||"@list"===u||F(x)&&0===x.length||"@list"===d||"@graph"===d
e.addValue(o,g,x,{propertyIsArray:k})}}}else{var u=e.getContextValue(t,r,"@container")
if("@index"===u)continue
var v=R(t,d)
e.addValue(o,v,p)}else{var N=this.compact(t,"@reverse",p,i)
for(var E in N)if(t.mappings[E]&&t.mappings[E].reverse){var j=N[E],u=e.getContextValue(t,E,"@container"),S="@set"===u||!i.compactArrays
e.addValue(o,E,j,{propertyIsArray:S}),delete N[E]}if(Object.keys(N).length>0){var v=R(t,d)
e.addValue(o,v,N)}}else{var N
if(H(p))N=R(t,p,null,{vocab:"@type"===d})
else{N=[]
for(var m=0;m<p.length;++m)N.push(R(t,p[m],null,{vocab:!0}))}var v=R(t,d),k=F(N)&&0===p.length
e.addValue(o,v,N,{propertyIsArray:k})}}return o}return n},Oe.prototype.expand=function(t,r,n,i,o){var a=this
if(null===n||void 0===n)return null
if(!F(n)&&!P(n))return o||null!==r&&"@graph"!==L(t,r,{vocab:!0})?c(t,r,n):null
if(F(n)){var s=[],l=e.getContextValue(t,r,"@container")
o=o||"@list"===l
for(var f=0;f<n.length;++f){var h=a.expand(t,r,n[f],i)
if(o&&(F(h)||G(h)))throw new Re("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})
null!==h&&(F(h)?s=s.concat(h):s.push(h))}return s}"@context"in n&&(t=a.processContext(t,n["@context"],i))
for(var d=L(t,r,{vocab:!0}),s={},p=Object.keys(n).sort(),v=0;v<p.length;++v){var g,m=p[v],y=n[m]
if("@context"!==m){var b=L(t,m,{vocab:!0})
if(null!==b&&(K(b)||U(b))){if(U(b)){if("@reverse"===d)throw new Re("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:y})
if(b in s)throw new Re("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:b})}if("@id"===b&&!H(y)){if(!i.isFrame)throw new Re('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:y})
if(!P(y))throw new Re('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}if("@type"===b&&B(y),"@graph"===b&&!P(y)&&!F(y))throw new Re('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:y})
if("@value"===b&&(P(y)||F(y)))throw new Re('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:y})
if("@language"===b){if(null===y)continue
if(!H(y))throw new Re('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:y})
y=y.toLowerCase()}if("@index"===b&&!H(y))throw new Re('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:y})
if("@reverse"!==b){var l=e.getContextValue(t,m,"@container")
if("@language"===l&&P(y))g=u(y)
else if("@index"===l&&P(y))g=function(e){for(var r=[],n=Object.keys(y).sort(),o=0;o<n.length;++o){var s=n[o],u=y[s]
F(u)||(u=[u]),u=a.expand(t,e,u,i,!1)
for(var l=0;l<u.length;++l){var c=u[l]
"@index"in c||(c["@index"]=s),r.push(c)}}return r}(m)
else{var w="@list"===b
if(w||"@set"===b){var x=r
if(w&&"@graph"===d&&(x=null),g=a.expand(t,x,y,i,w),w&&G(g))throw new Re("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else g=a.expand(t,m,y,i,!1)}if(null!==g||"@value"===b)if("@list"===b||G(g)||"@list"!==l||(g=F(g)?g:[g],g={"@list":g}),t.mappings[m]&&t.mappings[m].reverse){var _=s["@reverse"]=s["@reverse"]||{}
F(g)||(g=[g])
for(var T=0;T<g.length;++T){var k=g[T]
if(Q(k)||G(k))throw new Re('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g})
e.addValue(_,b,k,{propertyIsArray:!0})}}else{var N=-1===["@index","@id","@type","@value","@language"].indexOf(b)
e.addValue(s,b,g,{propertyIsArray:N})}}else{if(!P(y))throw new Re('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:y})
if("@reverse"in(g=a.expand(t,"@reverse",y,i)))for(var E in g["@reverse"])e.addValue(s,E,g["@reverse"][E],{propertyIsArray:!0})
var _=s["@reverse"]||null
for(var E in g)if("@reverse"!==E){null===_&&(_=s["@reverse"]={}),e.addValue(_,E,[],{propertyIsArray:!0})
for(var j=g[E],T=0;T<j.length;++T){var k=j[T]
if(Q(k)||G(k))throw new Re('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g})
e.addValue(_,E,k,{propertyIsArray:!0})}}}}}}p=Object.keys(s)
var S=p.length
if("@value"in s){if("@type"in s&&"@language"in s)throw new Re('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s})
var I=S-1
if("@type"in s&&(I-=1),"@index"in s&&(I-=1),"@language"in s&&(I-=1),0!==I)throw new Re('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s})
if(null===s["@value"])s=null
else{if("@language"in s&&!H(s["@value"]))throw new Re("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:s})
if("@type"in s&&(!K(s["@type"])||0===s["@type"].indexOf("_:")))throw new Re('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:s})}}else if("@type"in s&&!F(s["@type"]))s["@type"]=[s["@type"]]
else if("@set"in s||"@list"in s){if(S>1&&!(2===S&&"@index"in s))throw new Re('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:s})
"@set"in s&&(s=s["@set"],p=Object.keys(s),S=p.length)}else 1===S&&"@language"in s&&(s=null)
return!P(s)||i.keepFreeFloatingNodes||o||null!==r&&"@graph"!==d||(0===S||"@value"in s||"@list"in s||1===S&&"@id"in s)&&(s=null),s},Oe.prototype.createNodeMap=function(e,t){t=t||{}
var r=t.namer||t.issuer||new se("_:b"),n={"@default":{}}
return g(e,n,"@default",r),m(n)},Oe.prototype.flatten=function(e){for(var t=this.createNodeMap(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=t[n[i]]
Y(o)||r.push(o)}return r},Oe.prototype.frame=function(e,t,r){var n={options:r,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new se("_:b")
g(e,n.graphs,"@merged",i),n.subjects=n.graphs["@merged"]
var o=[]
return y(n,Object.keys(n.subjects).sort(),t,o,null),o},Oe.prototype.normalize=function(e,t,r){return"URDNA2015"===t.algorithm?new Ce(t).main(e,r):"URGNA2012"===t.algorithm?new Le(t).main(e,r):void r(new Error("Invalid RDF Dataset Normalization algorithm: "+t.algorithm))},Oe.prototype.fromRDF=function(t,r,n){var i={},o={"@default":i},a={}
for(var s in t){var u=t[s]
s in o||(o[s]={}),"@default"===s||s in i||(i[s]={"@id":s})
for(var l=o[s],c=0;c<u.length;++c){var f=u[c],h=f.subject.value,d=f.predicate.value,v=f.object
h in l||(l[h]={"@id":h})
var g=l[h],m="IRI"===v.type||"blank node"===v.type
if(!m||v.value in l||(l[v.value]={"@id":v.value}),d!==Te||r.useRdfType||!m){var y=p(v,r.useNativeTypes)
if(e.addValue(g,d,y,{propertyIsArray:!0}),m)if(v.value===_e){var b=l[v.value]
"usages"in b||(b.usages=[]),b.usages.push({node:g,property:d,value:y})}else v.value in a?a[v.value]=!1:a[v.value]={node:g,property:d,value:y}}else e.addValue(g,"@type",v.value,{propertyIsArray:!0})}}for(var s in o){var w=o[s]
if(_e in w){for(var x=w[_e],_=0;_<x.usages.length;++_){for(var T=x.usages[_],g=T.node,k=T.property,N=T.value,E=[],j=[],S=Object.keys(g).length;k===xe&&P(a[g["@id"]])&&F(g[we])&&1===g[we].length&&F(g[xe])&&1===g[xe].length&&(3===S||4===S&&F(g["@type"])&&1===g["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===g["@type"][0])&&(E.push(g[we][0]),j.push(g["@id"]),T=a[g["@id"]],g=T.node,k=T.property,N=T.value,S=Object.keys(g).length,0===g["@id"].indexOf("_:")););if(k===we){if(g["@id"]===_e)continue
N=w[N["@id"]][xe][0],E.pop(),j.pop()}delete N["@id"],N["@list"]=E.reverse()
for(var I=0;I<j.length;++I)delete w[j[I]]}delete x.usages}}for(var R=[],O=Object.keys(i).sort(),_=0;_<O.length;++_){var C=O[_],g=i[C]
if(C in o)for(var u=g["@graph"]=[],w=o[C],L=Object.keys(w).sort(),D=0;D<L.length;++D){var A=w[L[D]]
Y(A)||u.push(A)}Y(g)||R.push(g)}n(null,R)},Oe.prototype.toRDF=function(e,t){var r=new se("_:b"),n={"@default":{}}
g(e,n,"@default",r)
for(var i={},o=Object.keys(n).sort(),a=0;a<o.length;++a){var s=o[a];("@default"===s||K(s))&&(i[s]=f(n[s],r,t))}return i},Oe.prototype.processContext=function(t,r,n){P(r)&&"@context"in r&&F(r["@context"])&&(r=r["@context"])
var i=F(r)?r:[r]
if(0===i.length)return t.clone()
for(var o=t,a=0;a<i.length;++a){var s=i[a]
if(null!==s){if(P(s)&&"@context"in s&&(s=s["@context"]),!P(s))throw new Re("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s})
if(e.cache.activeCtx){var u=e.cache.activeCtx.get(t,s)
if(u){o=t=u
continue}}t=o,o=o.clone()
var l={}
if("@base"in s){var c=s["@base"]
if(null===c)c=null
else{if(!H(c))throw new Re('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s})
if(""!==c&&!K(c))throw new Re('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s})}null!==c&&(c=e.url.parse(c||"")),o["@base"]=c,l["@base"]=!0}if("@vocab"in s){var f=s["@vocab"]
if(null===f)delete o["@vocab"]
else{if(!H(f))throw new Re('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s})
if(!K(f))throw new Re('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s})
o["@vocab"]=f}l["@vocab"]=!0}if("@language"in s){var f=s["@language"]
if(null===f)delete o["@language"]
else{if(!H(f))throw new Re('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s})
o["@language"]=f.toLowerCase()}l["@language"]=!0}for(var h in s)C(o,s,h,l)
e.cache.activeCtx&&e.cache.activeCtx.set(t,s,o)}else o=t=M(n)}return o}
var Ce=function(){var t={subject:"s",object:"o",name:"g"},r=function(e){e=e||{},this.name="URDNA2015",this.options=e,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new se("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in e?e.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in e?e.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in e?e.timeSlice:10}
return r.prototype.doWork=function(t,r){var n=this.schedule
if(n.totalDepth>=n.MAX_TOTAL_DEPTH)return r(new Error("Maximum total call stack depth exceeded; normalization aborting."))
!function i(){if(n.depth===n.MAX_DEPTH)return n.depth=0,n.running=!1,e.nextTick(i)
var o=(new Date).getTime()
if(n.running||(n.start=(new Date).getTime(),n.deadline=n.start+n.timeSlice),o<n.deadline)return n.running=!0,n.depth++,n.totalDepth++,t(function(e,t){n.depth--,n.totalDepth--,r(e,t)})
n.depth=0,n.running=!1,e.setImmediate(i)}()},r.prototype.forEach=function(e,t,r){var n,i,o=this,a=0
if(F(e))i=e.length,n=function(){return a!==i&&(n.value=e[a++],n.key=a,!0)}
else{var s=Object.keys(e)
i=s.length,n=function(){return a!==i&&(n.key=s[a++],n.value=e[n.key],!0)}}!function e(i,a){return i?r(i):n()?o.doWork(function(){t(n.value,n.key,e)}):void r()}()},r.prototype.waterfall=function(e,t){var r=this
r.forEach(e,function(e,t,n){r.doWork(e,n)},t)},r.prototype.whilst=function(e,t,r){var n=this
!function i(o){return o?r(o):e()?void n.doWork(t,i):r()}()},r.prototype.main=function(e,t){var r=this
r.schedule.start=(new Date).getTime()
var n
if(r.options.format&&"application/nquads"!==r.options.format)return t(new Re("Unknown output format.","jsonld.UnknownFormat",{format:r.options.format}))
var i={}
r.waterfall([function(t){r.forEach(e,function(e,t,n){"@default"===t&&(t=null),r.forEach(e,function(e,n,o){null!==t&&(0===t.indexOf("_:")?e.name={type:"blank node",value:t}:e.name={type:"IRI",value:t}),r.quads.push(e),r.forEachComponent(e,function(t){if("blank node"===t.type){var n=t.value
n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(e):(i[n]=!0,r.blankNodeInfo[n]={quads:[e]})}}),o()},n)},t)},function(e){var t=!0
r.whilst(function(){return t},function(e){t=!1,r.hashToBlankNodes={},r.waterfall([function(e){r.forEach(i,function(e,t,n){r.hashFirstDegreeQuads(t,function(e,i){if(e)return n(e)
i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(t):r.hashToBlankNodes[i]=[t],n()})},e)},function(e){var n=Object.keys(r.hashToBlankNodes).sort()
r.forEach(n,function(e,n,o){var a=r.hashToBlankNodes[e]
if(a.length>1)return o()
var s=a[0]
r.canonicalIssuer.getId(s),delete i[s],delete r.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},function(e){var t=Object.keys(r.hashToBlankNodes).sort()
r.forEach(t,function(e,t,n){var i=[],o=r.hashToBlankNodes[e]
r.waterfall([function(e){r.forEach(o,function(e,t,n){if(r.canonicalIssuer.hasId(e))return n()
var o=new se("_:b")
o.getId(e),r.hashNDegreeQuads(e,o,function(e,t){if(e)return n(e)
i.push(t),n()})},e)},function(e){i.sort(function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}),r.forEach(i,function(e,t,n){for(var i in e.issuer.existing)r.canonicalIssuer.getId(i)
n()},e)}],n)},e)},function(e){var t=[]
r.waterfall([function(e){r.forEach(r.quads,function(e,n,i){r.forEachComponent(e,function(e){"blank node"===e.type&&0!==e.value.indexOf(r.canonicalIssuer.prefix)&&(e.value=r.canonicalIssuer.getId(e.value))}),t.push(oe(e)),i()},e)},function(e){if(t.sort(),"application/nquads"===r.options.format)return n=t.join(""),e()
n=ne(t.join("")),e()}],e)}],function(e){t(e,n)})},r.prototype.hashFirstDegreeQuads=function(e,t){var r=this,n=r.blankNodeInfo[e]
if("hash"in n)return t(null,n.hash)
var i=[],o=n.quads
r.forEach(o,function(t,n,o){var a={predicate:t.predicate}
r.forEachComponent(t,function(t,n){a[n]=r.modifyFirstDegreeComponent(e,t,n)}),i.push(oe(a)),o()},function(e){if(e)return t(e)
i.sort(),n.hash=Ae.hashNQuads(r.name,i),t(null,n.hash)})},r.prototype.modifyFirstDegreeComponent=function(e,t){return"blank node"!==t.type?t:(t=ee(t),t.value=t.value===e?"_:a":"_:z",t)},r.prototype.hashRelatedBlankNode=function(e,t,r,n,i){var o,a=this
a.waterfall([function(t){return a.canonicalIssuer.hasId(e)?(o=a.canonicalIssuer.getId(e),t()):r.hasId(e)?(o=r.getId(e),t()):void a.hashFirstDegreeQuads(e,function(e,r){if(e)return t(e)
o=r,t()})}],function(e){if(e)return i(e)
var r=new Ae(a.name)
return r.update(n),"g"!==n&&r.update(a.getRelatedPredicate(t)),r.update(o),i(null,r.digest())})},r.prototype.getRelatedPredicate=function(e){return"<"+e.predicate.value+">"},r.prototype.hashNDegreeQuads=function(e,t,r){var n,i=this,o=new Ae(i.name)
i.waterfall([function(r){i.createHashToRelated(e,t,function(e,t){if(e)return r(e)
n=t,r()})},function(e){var r=Object.keys(n).sort()
i.forEach(r,function(e,r,a){o.update(e)
var s,u="",l=new De(n[e])
i.whilst(function(){return l.hasNext()},function(e){var r=l.next(),n=t.clone(),o="",a=[]
i.waterfall([function(t){i.forEach(r,function(t,r,s){if(i.canonicalIssuer.hasId(t)?o+=i.canonicalIssuer.getId(t):(n.hasId(t)||a.push(t),o+=n.getId(t)),0!==u.length&&o.length>=u.length&&o>u)return e()
s()},t)},function(t){i.forEach(a,function(t,r,a){i.hashNDegreeQuads(t,n,function(r,i){return r?a(r):(o+=n.getId(t),o+="<"+i.hash+">",n=i.issuer,0!==u.length&&o.length>=u.length&&o>u?e():void a())})},t)},function(e){(0===u.length||o<u)&&(u=o,s=n),e()}],e)},function(e){if(e)return a(e)
o.update(u),t=s,a()})},e)}],function(e){r(e,{hash:o.digest(),issuer:t})})},r.prototype.createHashToRelated=function(e,r,n){var i=this,o={},a=i.blankNodeInfo[e].quads
i.forEach(a,function(n,a,s){i.forEach(n,function(a,s,u){if("predicate"===s||"blank node"!==a.type||a.value===e)return u()
var l=a.value,c=t[s]
i.hashRelatedBlankNode(l,n,r,c,function(e,t){if(e)return u(e)
t in o?o[t].push(l):o[t]=[l],u()})},s)},function(e){n(e,o)})},r.prototype.forEachComponent=function(e,t){for(var r in e)"predicate"!==r&&t(e[r],r,e)},r}(),Le=function(){var e=function(e){Ce.call(this,e),this.name="URGNA2012"}
return e.prototype=new Ce,e.prototype.modifyFirstDegreeComponent=function(e,t,r){return"blank node"!==t.type?t:(t=ee(t),t.value="name"===r?"_:g":t.value===e?"_:a":"_:z",t)},e.prototype.getRelatedPredicate=function(e){return e.predicate.value},e.prototype.createHashToRelated=function(e,t,r){var n=this,i={},o=n.blankNodeInfo[e].quads
n.forEach(o,function(r,o,a){var s,u
if("blank node"===r.subject.type&&r.subject.value!==e)u=r.subject.value,s="p"
else{if("blank node"!==r.object.type||r.object.value===e)return a()
u=r.object.value,s="r"}n.hashRelatedBlankNode(u,r,t,s,function(e,t){t in i?i[t].push(u):i[t]=[u],a()})},function(e){r(e,i)})},e}()
Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object")
var t=[]
for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r)
return t}),e.registerRDFParser("application/nquads",ne),e.registerRDFParser("rdfa-api",ae),e.IdentifierIssuer=se,e.UniqueNamer=se,se.prototype.clone=function(){var e=new se(this.prefix)
return e.counter=this.counter,e.existing=ee(this.existing),e},se.prototype.getId=function(e){if(e&&e in this.existing)return this.existing[e]
var t=this.prefix+this.counter
return this.counter+=1,e&&(this.existing[e]=t),t},se.prototype.getName=se.prototype.getName,se.prototype.hasId=function(e){return e in this.existing},se.prototype.isNamed=se.prototype.hasId
var De=function(e){this.list=e.sort(),this.done=!1,this.left={}
for(var t=0;t<e.length;++t)this.left[e[t]]=!0}
De.prototype.hasNext=function(){return!this.done},De.prototype.next=function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,i=0;i<n;++i){var o=this.list[i],a=this.left[o];(null===t||o>t)&&(a&&i>0&&o>this.list[i-1]||!a&&i<n-1&&o>this.list[i+1])&&(t=o,r=i)}if(null===t)this.done=!0
else{var s=this.left[t]?r-1:r+1
this.list[r]=this.list[s],this.list[s]=t
for(var i=0;i<n;++i)this.list[i]>t&&(this.left[this.list[i]]=!this.left[this.list[i]])}return e}
var Ae=function(e){if(!(this instanceof Ae))return new Ae(e)
if(-1===["URDNA2015","URGNA2012"].indexOf(e))throw new Error("Invalid RDF Dataset Normalization algorithm: "+e)
Ae._init.call(this,e)}
if(Ae.hashNQuads=function(e,t){for(var r=new Ae(e),n=0;n<t.length;++n)r.update(t[n])
return r.digest()},function(e){if(e){var r=t("crypto")
return Ae._init=function(e){e="URDNA2015"===e?"sha256":"sha1",this.md=r.createHash(e)},Ae.prototype.update=function(e){return this.md.update(e,"utf8")},void(Ae.prototype.digest=function(){return this.md.digest("hex")})}Ae._init=function(e){e="URDNA2015"===e?new o.Algorithm:new i.Algorithm,this.md=new n(e)},Ae.prototype.update=function(e){return this.md.update(e)},Ae.prototype.digest=function(){return this.md.digest().toHex()}
var n=function(e){if(!(this instanceof n))return new n(e)
if(this._algorithm=e,!n._padding||n._padding.length<this._algorithm.blockSize){n._padding=String.fromCharCode(128)
for(var t=String.fromCharCode(0),r=64;r>0;)1&r&&(n._padding+=t),(r>>>=1)>0&&(t+=t)}this.start()}
n.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[]
for(var e=this._algorithm.messageLengthSize/4,t=0;t<e;++t)this.fullMessageLength.push(0)
return this._input=new n.ByteBuffer,this.state=this._algorithm.start(),this},n.prototype.update=function(e){e=new n.ByteBuffer(unescape(encodeURIComponent(e))),this.messageLength+=e.length()
var t=e.length()
t=[t/4294967296>>>0,t>>>0]
for(var r=this.fullMessageLength.length-1;r>=0;--r)this.fullMessageLength[r]+=t[1],t[1]=t[0]+(this.fullMessageLength[r]/4294967296>>>0),this.fullMessageLength[r]=this.fullMessageLength[r]>>>0,t[0]=t[1]/4294967296>>>0
for(this._input.putBytes(e.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input)
return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},n.prototype.digest=function(){var e=new n.ByteBuffer
e.putBytes(this._input.bytes())
var t=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,r=t&this._algorithm.blockSize-1
e.putBytes(n._padding.substr(0,this._algorithm.blockSize-r))
for(var i=new n.ByteBuffer,o=0;o<this.fullMessageLength.length;++o)i.putInt32(this.fullMessageLength[o]<<3|this.fullMessageLength[o+1]>>>28)
this._algorithm.writeMessageLength(e,i)
var a=this._algorithm.digest(this.state.copy(),e),s=new n.ByteBuffer
return a.write(s),s},n.ByteBuffer=function(e){this.data="string"==typeof e?e:"",this.read=0},n.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},n.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3)
return this.read+=4,e},n.ByteBuffer.prototype.putBytes=function(e){this.data+=e},n.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},n.ByteBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},n.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t)
r<16&&(e+="0"),e+=r.toString(16)}return e}
var i={_w:null}
i.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},i.Algorithm.prototype.start=function(){return i._w||(i._w=new Array(80)),i._createState()},i.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},i.Algorithm.prototype.digest=function(e,t){for(var r,n,o,a,s,u,l,c,f=t.length(),h=i._w;f>=64;){for(n=e.h0,o=e.h1,a=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)r=t.getInt32(),h[c]=r,l=s^o&(a^s),r=(n<<5|n>>>27)+l+u+1518500249+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r
for(;c<20;++c)r=h[c-3]^h[c-8]^h[c-14]^h[c-16],r=r<<1|r>>>31,h[c]=r,l=s^o&(a^s),r=(n<<5|n>>>27)+l+u+1518500249+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r
for(;c<32;++c)r=h[c-3]^h[c-8]^h[c-14]^h[c-16],r=r<<1|r>>>31,h[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+1859775393+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r
for(;c<40;++c)r=h[c-6]^h[c-16]^h[c-28]^h[c-32],r=r<<2|r>>>30,h[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+1859775393+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r
for(;c<60;++c)r=h[c-6]^h[c-16]^h[c-28]^h[c-32],r=r<<2|r>>>30,h[c]=r,l=o&a|s&(o^a),r=(n<<5|n>>>27)+l+u+2400959708+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r
for(;c<80;++c)r=h[c-6]^h[c-16]^h[c-28]^h[c-32],r=r<<2|r>>>30,h[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+3395469782+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r
e.h0=e.h0+n|0,e.h1=e.h1+o|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,f-=64}return e},i._createState=function(){var e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520}
return e.copy=function(){var t=i._createState()
return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4)},e}
var o={_k:null,_w:null}
o.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},o.Algorithm.prototype.start=function(){return o._k||o._init(),o._createState()},o.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},o.Algorithm.prototype.digest=function(e,t){for(var r,n,i,a,s,u,l,c,f,h,d,p,v,g,m,y=t.length(),b=o._k,w=o._w;y>=64;){for(l=0;l<16;++l)w[l]=t.getInt32()
for(;l<64;++l)r=w[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,n=w[l-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,w[l]=r+w[l-7]+n+w[l-16]|0
for(c=e.h0,f=e.h1,h=e.h2,d=e.h3,p=e.h4,v=e.h5,g=e.h6,m=e.h7,l=0;l<64;++l)a=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),s=g^p&(v^g),i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),u=c&f|h&(c^f),r=m+a+s+b[l]+w[l],n=i+u,m=g,g=v,v=p,p=d+r|0,d=h,h=f,f=c,c=r+n|0
e.h0=e.h0+c|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+d|0,e.h4=e.h4+p|0,e.h5=e.h5+v|0,e.h6=e.h6+g|0,e.h7=e.h7+m|0,y-=64}return e},o._createState=function(){var e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225}
return e.copy=function(){var t=o._createState()
return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t.h5=e.h5,t.h6=e.h6,t.h7=e.h7,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4),t.putInt32(e.h5),t.putInt32(e.h6),t.putInt32(e.h7)},e},o._init=function(){o._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o._w=new Array(64)}}(a),!de)var Me=function(){de=t("xmldom").XMLSerializer}
if(e.url={},e.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.url.parse=function(t,r){for(var n={},i=e.url.parsers[r||"full"],o=i.regex.exec(t),a=i.keys.length;a--;)n[i.keys[a]]=void 0===o[a]?null:o[a]
return n.normalizedPath=ue(n.path,!!n.authority),n},a?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),a){e.use=function(r){switch(r){case"request":e.request=t("jsonld-request")
break
default:throw new Re("Unknown extension.","jsonld.UnknownExtension",{extension:r})}}
var Ue={exports:{},filename:o}
t("pkginfo")(Ue,"version"),e.version=Ue.exports.version}return e},l=function(){return u(function(){return l()})}
!a&&"function"==typeof e&&e.amd?e([],function(){return u(l),l}):(u(l),"function"==typeof t&&void 0!==r&&r.exports&&(r.exports=l),s&&("undefined"==typeof jsonld?jsonld=jsonldjs=l:jsonldjs=l))}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/node_modules/jsonld/js")},{_process:10,crypto:29,"es6-promise":31,http:29,"jsonld-request":29,pkginfo:29,request:29,util:29,xmldom:29}],31:[function(t,r,n){(function(n,i){(function(){"use strict"
function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function u(e){H=e}function l(e){W=e}function c(){return function(){B(h)}}function f(){return function(){setTimeout(h,1)}}function h(){for(var e=0;e<V;e+=2){(0,Z[e])(Z[e+1]),Z[e]=void 0,Z[e+1]=void 0}V=0}function d(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function g(e){try{return e.then}catch(e){return re.error=e,re}}function m(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function y(e,t,r){W(function(e){var n=!1,i=m(r,t,function(r){n||(n=!0,t!==r?x(e,r):T(e,r))},function(t){n||(n=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"))
!n&&i&&(n=!0,k(e,i))},e)}function b(e,t){t._state===ee?T(e,t._result):t._state===te?k(e,t._result):N(t,void 0,function(t){x(e,t)},function(t){k(e,t)})}function w(e,t){if(t.constructor===e.constructor)b(e,t)
else{var r=g(t)
r===re?k(e,re.error):void 0===r?T(e,t):a(r)?y(e,t,r):T(e,t)}}function x(e,t){e===t?k(e,p()):o(t)?w(e,t):T(e,t)}function _(e){e._onerror&&e._onerror(e._result),E(e)}function T(e,t){e._state===K&&(e._result=t,e._state=ee,0!==e._subscribers.length&&W(E,e))}function k(e,t){e._state===K&&(e._state=te,e._result=t,W(_,e))}function N(e,t,r,n){var i=e._subscribers,o=i.length
e._onerror=null,i[o]=t,i[o+ee]=r,i[o+te]=n,0===o&&e._state&&W(E,e)}function E(e){var t=e._subscribers,r=e._state
if(0!==t.length){for(var n,i,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?I(r,n,i,o):i(o)
e._subscribers.length=0}}function j(){this.error=null}function S(e,t){try{return e(t)}catch(e){return ne.error=e,ne}}function I(e,t,r,n){var i,o,s,u,l=a(r)
if(l){if(i=S(r,n),i===ne?(u=!0,o=i.error,i=null):s=!0,t===i)return void k(t,v())}else i=n,s=!0
t._state!==K||(l&&s?x(t,i):u?k(t,o):e===ee?T(t,i):e===te&&k(t,i))}function R(e,t){try{t(function(t){x(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function O(e,t){var r=this
r._instanceConstructor=e,r.promise=new e(d),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?T(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&T(r.promise,r._result))):k(r.promise,r._validationError())}function C(e){return new ie(this,e).promise}function L(e){function t(e){x(i,e)}function r(e){k(i,e)}var n=this,i=new n(d)
if(!X(e))return k(i,new TypeError("You must pass an array to race.")),i
for(var o=e.length,a=0;i._state===K&&a<o;a++)N(n.resolve(e[a]),void 0,t,r)
return i}function D(e){var t=this
if(e&&"object"==typeof e&&e.constructor===t)return e
var r=new t(d)
return x(r,e),r}function A(e){var t=this,r=new t(d)
return k(r,e),r}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(e){this._id=le++,this._state=void 0,this._result=void 0,this._subscribers=[],d!==e&&(a(e)||M(),this instanceof P||U(),R(this,e))}function q(){var e
if(void 0!==i)e=i
else if("undefined"!=typeof self)e=self
else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise
t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=ce)}var F
F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)}
var B,H,z,X=F,V=0,W=function(e,t){Z[V]=e,Z[V+1]=t,2===(V+=2)&&(H?H(h):z())},J="undefined"!=typeof window?window:void 0,$=J||{},Y=$.MutationObserver||$.WebKitMutationObserver,Q=void 0!==n&&"[object process]"==={}.toString.call(n),G="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3)
z=Q?function(){var e=n.nextTick,t=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/)
return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=setImmediate),function(){e(h)}}():Y?function(){var e=0,t=new Y(h),r=document.createTextNode("")
return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():G?function(){var e=new MessageChannel
return e.port1.onmessage=h,function(){e.port2.postMessage(0)}}():void 0===J&&"function"==typeof t?function(){try{var e=t,r=e("vertx")
return B=r.runOnLoop||r.runOnContext,c()}catch(e){return f()}}():f()
var K=void 0,ee=1,te=2,re=new j,ne=new j
O.prototype._validateInput=function(e){return X(e)},O.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},O.prototype._init=function(){this._result=new Array(this.length)}
var ie=O
O.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,i=0;r._state===K&&i<t;i++)e._eachEntry(n[i],i)},O.prototype._eachEntry=function(e,t){var r=this,n=r._instanceConstructor
s(e)?e.constructor===n&&e._state!==K?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(n.resolve(e),t):(r._remaining--,r._result[t]=e)},O.prototype._settledAt=function(e,t,r){var n=this,i=n.promise
i._state===K&&(n._remaining--,e===te?k(i,r):n._result[t]=r),0===n._remaining&&T(i,n._result)},O.prototype._willSettleAt=function(e,t){var r=this
N(e,void 0,function(e){r._settledAt(ee,t,e)},function(e){r._settledAt(te,t,e)})}
var oe=C,ae=L,se=D,ue=A,le=0,ce=P
P.all=oe,P.race=ae,P.resolve=se,P.reject=ue,P._setScheduler=u,P._setAsap=l,P._asap=W,P.prototype={constructor:P,then:function(e,t){var r=this,n=r._state
if(n===ee&&!e||n===te&&!t)return this
var i=new this.constructor(d),o=r._result
if(n){var a=arguments[n-1]
W(function(){I(n,i,a,o)})}else N(r,i,e,t)
return i},catch:function(e){return this.then(null,e)}}
var fe=q,he={Promise:ce,polyfill:fe}
"function"==typeof e&&e.amd?e(function(){return he}):void 0!==r&&r.exports?r.exports=he:void 0!==this&&(this.ES6Promise=he),fe()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:10}],32:[function(e,t,r){var n=e
e=function(){}
var r=t.exports={Lexer:e("./lib/N3Lexer"),Parser:e("./lib/N3Parser"),Writer:e("./lib/N3Writer"),Store:e("./lib/N3Store"),StreamParser:e("./lib/N3StreamParser"),StreamWriter:e("./lib/N3StreamWriter"),Util:e("./lib/N3Util")}
Object.keys(r).forEach(function(e){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){return delete r[e],r[e]=n("./lib/N3"+e)}})})},{"./lib/N3Lexer":33,"./lib/N3Parser":34,"./lib/N3Store":35,"./lib/N3StreamParser":36,"./lib/N3StreamWriter":37,"./lib/N3Util":38,"./lib/N3Writer":39}],33:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e)
if(e&&e.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/
var t=this
this._tokenize=this.tokenize,this.tokenize=function(e,r){this._tokenize(e,function(e,n){!e&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(n.type)?r&&r(e,n):r&&r(e||t._syntaxError(n.type,r=null))})}}}var i=String.fromCharCode,o="function"==typeof setImmediate?setImmediate:function(e){setTimeout(e,0)},a=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,s={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},u=/[\x00-\x20<>\\"\{\}\|\^\`]/
n.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(e,t){function r(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}for(var n=this._input;;){for(var i;i=this._newline.exec(n);)n=n.substr(i[0].length,n.length),this._line++
if((i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&e(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n
var o,a=this._line,s="",l="",c="",f=n[0],h=null,d=0,p=!1
switch(f){case"^":if(1===n.length)break
if("^"!==n[1])return r(this)
if(this._prevTokenType="^",n=n.substr(2),"<"!==n[0]){p=!0
break}case"<":if(h=this._unescapedIri.exec(n))s="IRI",l=h[1]
else if(h=this._iri.exec(n)){if(null===(o=this._unescape(h[1]))||u.test(o))return r(this)
s="IRI",l=o}break
case"_":((h=this._blank.exec(n))||t&&(h=this._blank.exec(n+" ")))&&(s="prefixed",c="_",l=h[1])
break
case'"':case"'":if(h=this._unescapedString.exec(n))s="literal",l=h[0]
else if(h=this._singleQuotedString.exec(n)){if(null===(o=this._unescape(h[0])))return r(this)
s="literal",l=o.replace(/^'|'$/g,'"')}else if(h=this._tripleQuotedString.exec(n)){if(o=h[1]||h[2],this._line+=o.split(/\r\n|\r|\n/).length-1,null===(o=this._unescape(o)))return r(this)
s="literal",l=o.replace(/^'|'$/g,'"')}break
case"@":"literal"===this._prevTokenType&&(h=this._langcode.exec(n))?(s="langcode",l=h[1]):(h=this._keyword.exec(n))&&(s=h[0])
break
case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){s=".",d=1
break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(n))&&(s="literal",l='"'+h[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(h[1]?"double":/^[+\-]?\d+$/.test(h[0])?"integer":"decimal"))
break
case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(n))?s=h[0].toUpperCase():p=!0
break
case"f":case"t":(h=this._boolean.exec(n))?(s="literal",l='"'+h[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):p=!0
break
case"a":(h=this._shortPredicates.exec(n))?(s="abbreviation",l="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):p=!0
break
case",":case";":case"[":case"]":case"(":case")":case"{":case"}":d=1,s=f
break
default:p=!0}if(p&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(h=this._prefix.exec(n))?((h=this._prefixed.exec(n))||t&&(h=this._prefixed.exec(n+" ")))&&(s="prefixed",c=h[1]||"",l=this._unescape(h[2])):(s="prefix",l=h[1]||"")),"^"===this._prevTokenType&&(s="IRI"===s||"prefixed"===s?"type":""),!s)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?r(this):this._input=n
e(null,{line:a,type:s,value:l,prefix:c}),this._prevTokenType=s,n=n.substr(d||h[0].length,n.length)}},_unescape:function(e){try{return e.replace(a,function(e,t,r,n){var o
if(t){if(o=parseInt(t,16),isNaN(o))throw new Error
return i(o)}if(r){if(o=parseInt(r,16),isNaN(o))throw new Error
return o<=65535?i(o):i(55296+(o-=65536)/1024,56320+(1023&o))}var a=s[n]
if(!a)throw new Error
return a})}catch(e){return null}},_syntaxError:function(e){return this._input=null,new Error('Syntax error: unexpected "'+e+'" on line '+this._line+".")},tokenize:function(e,t){function r(e){null!==i._input&&(i._input+=e,i._tokenizeToEnd(t,!1))}function n(){null!==i._input&&i._tokenizeToEnd(t,!0)}var i=this
this._line=1,"string"==typeof e?(this._input=e,o(function(){i._tokenizeToEnd(t,!0)})):(this._input="",e&&"function"!=typeof e?("function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",r),e.on("end",n)):(this.addChunk=r,this.end=n,t||(t=e)))}},t.exports=n},{}],34:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e)
this._tripleStack=[],this._graph=null,e=e||{},this._setBase(e.documentIRI)
var t="string"==typeof e.format&&e.format.match(/\w*$/)[0].toLowerCase(),r="turtle"===t,a="trig"===t,s=/triple/.test(t),u=/quad/.test(t),l=s||u;(this._supportsNamedGraphs=!r)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||a||s),l&&(this._base="",this._resolveIRI=function(e){return this._error("Disallowed relative IRI",e),this._callback=i,this._subject=null}),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":"_:"+e.blankNodePrefix.replace(/^_:/,""),this._lexer=e.lexer||new o({lineMode:l})}function i(){}var o=e("./N3Lexer"),a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=a+"nil",u=a+"first",l=/^[a-z][a-z0-9+.-]*:/i,c=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,f=/(?:^|\/)\.\.?(?:$|[\/#?])/,h=0,d=0
n._resetBlankNodeIds=function(){h=d=0},n.prototype={_setBase:function(e){if(e){if(e.indexOf("#")>=0)throw new Error("Invalid base IRI "+e)}else e=null;(this._base=e)&&(this._basePath=e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(c),this._baseRoot=e[0],this._baseScheme=e[1])},_readInTopContext:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes))
case"@prefix":return this._sparqlStyle=!1,this._readPrefix
case"PREFIX":return this._sparqlStyle=!0,this._readPrefix
case"@base":return this._sparqlStyle=!1,this._readBaseIRI
case"BASE":return this._sparqlStyle=!0,this._readBaseIRI
case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject
case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel
default:return this._readSubject(e)}},_readSubject:function(e){switch(this._predicate=null,e.type){case"IRI":null===this._base||l.test(e.value)?this._subject=e.value:this._subject=this._resolveIRI(e)
break
case"prefixed":var t=this._prefixes[e.prefix]
if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e)
this._subject=t+e.value
break
case"[":return this._subject="_:b"+d++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead
case"(":return this._tripleStack.push({subject:s,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem
case"}":return this._readPunctuation(e)
default:return this._error("Expected subject but got "+e.type,e)}return this._readPredicateOrNamedGraph},_readPredicate:function(e){var t=e.type
switch(t){case"IRI":case"abbreviation":null===this._base||l.test(e.value)?this._predicate=e.value:this._predicate=this._resolveIRI(e)
break
case"prefixed":if("_"===e.prefix)return this._error("Disallowed blank node as predicate",e)
var r=this._prefixes[e.prefix]
if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e)
this._predicate=r+e.value
break
case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e))
case";":return this._readPredicate
default:return this._error('Expected predicate to follow "'+this._subject+'"',e)}return this._readObject},_readObject:function(e){switch(e.type){case"IRI":null===this._base||l.test(e.value)?this._object=e.value:this._object=this._resolveIRI(e)
break
case"prefixed":var t=this._prefixes[e.prefix]
if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e)
this._object=t+e.value
break
case"literal":return this._object=e.value,this._readDataTypeOrLang
case"[":var r="_:b"+d++
return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:r,type:"blank"}),this._subject=r,this._readBlankNodeHead
case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:s,type:"list"}),this._subject=null,this._readListItem
default:return this._error('Expected object to follow "'+this._predicate+'"',e)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)},_readGraph:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))},_readBlankNodeTail:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e)
null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""})
var t=this._tripleStack.pop()
return this._subject=t.subject,null!==t.object?(this._predicate=t.predicate,this._object=t.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(e){switch(e.type){case"type":var t
if(""===e.prefix)t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e)
else{var r=this._prefixes[e.prefix]
if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e)
t=r+e.value}return this._object+="^^"+t,this._getTripleEndReader()
case"langcode":return this._object+="@"+e.value.toLowerCase(),this._getTripleEndReader()
default:return this._getTripleEndReader().call(this,e)}},_readListItem:function(e){var t=null,r=null,n=this._subject,i=this._tripleStack,o=i[i.length-1],a=this._readListItem
switch(e.type){case"IRI":t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e)
break
case"prefixed":var c=this._prefixes[e.prefix]
if(void 0===c)return this._error('Undefined prefix "'+e.prefix+':"',e)
t=c+e.value
break
case"literal":t=e.value,a=this._readDataTypeOrLang
break
case"[":r="_:b"+d++,t="_:b"+d++,i.push({subject:r,predicate:u,object:t,type:"blank"}),this._subject=t,a=this._readBlankNodeHead
break
case"(":r="_:b"+d++,i.push({subject:r,predicate:u,object:s,type:"list"}),this._subject=null,a=this._readListItem
break
case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:o.subject,predicate:o.predicate,object:o.object,graph:this._graph||""}),this._subject=o.subject,null===o.predicate){if(a=this._readPredicate,o.subject===s)return a}else if(this._predicate=o.predicate,this._object=o.object,a=this._getTripleEndReader(),o.object===s)return a
r=s
break
default:return this._error('Expected list item instead of "'+e.type+'"',e)}return null===r&&(this._subject=r="_:b"+d++),null===n?o.object===s?o.object=r:o.subject=r:this._callback(null,{subject:n,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",object:r,graph:this._graph||""}),null!==t&&this._callback(null,{subject:r,predicate:u,object:t,graph:this._graph||""}),a},_readPunctuation:function(e){var t,r=this._subject,n=this._graph
switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e)
this._graph=null
case".":this._subject=null,t=this._readInTopContext
break
case";":t=this._readPredicate
break
case",":t=this._readObject
break
case"IRI":if(this._supportsQuads&&null===this._graph){n=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e),r=this._subject,t=this._readQuadPunctuation
break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[e.prefix]
if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e)
n=i+e.value,t=this._readQuadPunctuation
break}default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return null!==r&&this._callback(null,{subject:r,predicate:this._predicate,object:this._object,graph:n||""}),t},_readBlankNodePunctuation:function(e){var t
switch(e.type){case";":t=this._readPredicate
break
case",":t=this._readObject
break
default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),t},_readQuadPunctuation:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext},_readPrefix:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)},_readPrefixIRI:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e)
var t
return t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e),this._prefixes[this._prefix]=t,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation},_readBaseIRI:function(e){if("IRI"!==e.type)return this._error("Expected IRI to follow base declaration",e)
try{this._setBase(null===this._base||l.test(e.value)?e.value:this._resolveIRI(e))}catch(t){this._error(t.message,e)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(e){switch(e.type){case"IRI":case"prefixed":return this._readSubject(e),this._readGraph
case"[":return this._readNamedGraphBlankLabel
default:return this._error("Invalid graph label",e)}},_readNamedGraphBlankLabel:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject="_:b"+d++,this._readGraph)},_readDeclarationPunctuation:function(e){return this._sparqlStyle?this._readInTopContext(e):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext},_getTripleEndReader:function(){var e=this._tripleStack
if(0===e.length)return this._readPunctuation
switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail
case"list":return this._readListItem}},_error:function(e,t){this._callback(new Error(e+" at line "+t.line+"."))},_resolveIRI:function(e){var t=e.value
switch(t[0]){case void 0:return this._base
case"#":return this._base+t
case"?":return this._base.replace(/(?:\?.*)?$/,t)
case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t)
default:return this._removeDotSegments(this._basePath+t)}},_removeDotSegments:function(e){if(!f.test(e))return e
for(var t="",r=e.length,n=-1,i=-1,o=0,a="/";n<r;){switch(a){case":":if(i<0&&"/"===e[++n]&&"/"===e[++n])for(;(i=n+1)<r&&"/"!==e[i];)n=i
break
case"?":case"#":n=r
break
case"/":if("."===e[n+1])switch(a=e[++n+1]){case"/":t+=e.substring(o,n-1),o=n+1
break
case void 0:case"?":case"#":return t+e.substring(o,n)+e.substr(n+1)
case".":if(void 0===(a=e[++n+1])||"/"===a||"?"===a||"#"===a){if(t+=e.substring(o,n-2),(o=t.lastIndexOf("/"))>=i&&(t=t.substr(0,o)),"/"!==a)return t+"/"+e.substr(n+1)
o=n+1}}}a=e[++n]}return t+e.substring(o)},parse:function(e,t,r){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+h+++"_","function"==typeof e&&(r=t,t=e,e=null),this._callback=t||i,this._prefixCallback=r||i
var n=this
this._lexer.tokenize(e,function(e,t){null!==e?(n._callback(e),n._callback=i):void 0!==n._readCallback&&(n._readCallback=n._readCallback(t))}),e||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},t.exports=n},{"./N3Lexer":33}],35:[function(e,t,r){function n(e,t){if(!(this instanceof n))return new n(e,t)
this._size=0,this._graphs=Object.create(null),this._entities=Object.create(null),this._entities["><"]=0,this._entityCount=0,this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),this._prefixes=Object.create(null),t&&t.prefixes&&this.addPrefixes(t.prefixes),e&&this.addTriples(e)}var i=e("./N3Util").expandPrefixedName
n.prototype={get size(){var e=this._size
if(null!==e)return e
var t,r,n=this._graphs
for(var i in n)for(var o in t=n[i].subjects)for(var a in r=t[o])e+=Object.keys(r[a]).length
return this._size=e},_addToIndex:function(e,t,r,n){var i=e[t]||(e[t]={});(i[r]||(i[r]={}))[n]=null},_removeFromIndex:function(e,t,r,n){var i,o=e[t],a=o[r]
delete a[n]
for(i in a)return
delete o[r]
for(i in o)return
delete e[t]},_findInIndex:function(e,t,r,n,i,o,a,s){var u,l,c,f=[],h=Object.keys(this._entities)
t&&((u=e,e={})[t]=u[t])
for(var d in e){var p=h[d]
if(l=e[d]){r&&((u=l,l={})[r]=u[r])
for(var v in l){var g=h[v]
if(c=l[v])for(var m=(n?n in c?[n]:[]:Object.keys(c)),y=m.length-1;y>=0;y--){var b={subject:"",predicate:"",object:"",graph:s}
b[i]=p,b[o]=g,b[a]=h[m[y]],f.push(b)}}}}return f},_countInIndex:function(e,t,r,n){var i,o,a,s=0
t&&((i=e,e={})[t]=i[t])
for(var u in e)if(o=e[u]){r&&((i=o,o={})[r]=i[r])
for(var l in o)(a=o[l])&&(n?n in a&&s++:s+=Object.keys(a).length)}return s},addTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||""
var i=this._graphs[n]
i||(i=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(i))
var o=this._entities
e=o[e]||(o[e]=++this._entityCount),t=o[t]||(o[t]=++this._entityCount),r=o[r]||(o[r]=++this._entityCount),this._addToIndex(i.subjects,e,t,r),this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null},addTriples:function(e){for(var t=e.length-1;t>=0;t--)this.addTriple(e[t])},addPrefix:function(e,t){this._prefixes[e]=t},addPrefixes:function(e){for(var t in e)this.addPrefix(t,e[t])},removeTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||""
var i,o=this._entities,a=this._graphs
if((e=o[e])&&(t=o[t])&&(r=o[r])&&(i=a[n])){var s,u
if((s=i.subjects[e])&&(u=s[t])&&r in u){this._removeFromIndex(i.subjects,e,t,r),this._removeFromIndex(i.predicates,t,r,e),this._removeFromIndex(i.objects,r,e,t),null!==this._size&&this._size--
for(e in i.subjects)return
delete a[n]}}},removeTriples:function(e){for(var t=e.length-1;t>=0;t--)this.removeTriple(e[t])},find:function(e,t,r,n){var o=this._prefixes
return this.findByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},findByIRI:function(e,t,r,n){n=n||""
var i=this._graphs[n],o=this._entities
return i?e&&!(e=o[e])?[]:t&&!(t=o[t])?[]:r&&!(r=o[r])?[]:e?r?this._findInIndex(i.objects,r,e,t,"object","subject","predicate",n):this._findInIndex(i.subjects,e,t,null,"subject","predicate","object",n):t?this._findInIndex(i.predicates,t,r,null,"predicate","object","subject",n):r?this._findInIndex(i.objects,r,null,null,"object","subject","predicate",n):this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",n):[]},count:function(e,t,r,n){var o=this._prefixes
return this.countByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},countByIRI:function(e,t,r,n){n=n||""
var i=this._graphs[n],o=this._entities
return i?e&&!(e=o[e])?0:t&&!(t=o[t])?0:r&&!(r=o[r])?0:e?r?this._countInIndex(i.objects,r,e,t):this._countInIndex(i.subjects,e,t,r):t?this._countInIndex(i.predicates,t,r,e):this._countInIndex(i.objects,r,e,t):0},createBlankNode:function(e){var t,r
if(e)for(t=e="_:"+e,r=1;this._entities[t];)t=e+r++
else do{t="_:b"+this._blankNodeIndex++}while(this._entities[t])
return this._entities[t]=++this._entityCount,t}},t.exports=n},{"./N3Util":38}],36:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e)
i.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0
var t=this,r=new a(e)
r.parse(function(e,r){r&&t.push(r)||e&&t.emit("error",e)},this.emit.bind(this,"prefix")),this._transform=function(e,t,n){r.addChunk(e),n()},this._flush=function(e){r.end(),e()}}var i=e("stream").Transform,o=e("util"),a=e("./N3Parser.js")
o.inherits(n,i),t.exports=n},{"./N3Parser.js":34,stream:25,util:28}],37:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e)
i.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0
var t=this,r=new a({write:function(e,r,n){t.push(e),n&&n()},end:function(e){t.push(null),e&&e()}},e)
this._transform=function(e,t,n){r.addTriple(e,n)},this._flush=function(e){r.end(e)}}var i=e("stream").Transform,o=e("util"),a=e("./N3Writer.js")
o.inherits(n,i),t.exports=n},{"./N3Writer.js":39,stream:25,util:28}],38:[function(e,t,r){function n(e,t){for(var r in o)t?e.prototype[r]=i(o[r]):e[r]=o[r]
return e}function i(e){return function(t){return e(this,t)}}var o={isIRI:function(e){if(!e)return e
var t=e[0]
return'"'!==t&&"_"!==t},isLiteral:function(e){return e&&'"'===e[0]},isBlank:function(e){return e&&"_:"===e.substr(0,2)},getLiteralValue:function(e){var t=/^"([^]*)"/.exec(e)
if(!t)throw new Error(e+" is not a literal")
return t[1]},getLiteralType:function(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e)
if(!t)throw new Error(e+" is not a literal")
return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e)
if(!t)throw new Error(e+" is not a literal")
return t[1]?t[1].toLowerCase():""},isPrefixedName:function(e){return e&&/^[^:\/"']*:[^:\/"']+$/.test(e)},expandPrefixedName:function(e,t){var r,n,i,o=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(e)
return o&&(r=o[1],n=t[r],i=o.index),void 0===n?e:0===i?n+e.substr(r.length+1):e.substr(0,i+3)+n+e.substr(i+r.length+4)},createIRI:function(e){return e&&'"'===e[0]?o.getLiteralValue(e):e},createLiteral:function(e,t){if(!t)switch(typeof e){case"boolean":t="http://www.w3.org/2001/XMLSchema#boolean"
break
case"number":if(isFinite(e)){t=e%1==0?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal"
break}default:return'"'+e+'"'}return'"'+e+(/^[a-z]+(-[a-z0-9]+)*$/i.test(t)?'"@'+t.toLowerCase():'"^^'+t)}}
t.exports=n(n)},{}],39:[function(e,t,r){function n(e,t){if(!(this instanceof n))return new n(e,t)
if(e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end
else{var r=""
this._outputStream={write:function(e,t,n){r+=e,n&&n()},end:function(e){e&&e(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}function i(e){var t=u[e]
return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}var o=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,a=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,s=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,u={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"}
n.prototype={_write:function(e,t){this._outputStream.write(e,"utf8",t)},_writeTriple:function(e,t,r,n,i){try{this._graph!==n&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(n?this._encodeIriOrBlankNode(n)+" {\n":"")),this._subject=null,this._graph="["!==n[0]?n:"]"),this._subject===e?this._predicate===t?this._write(", "+this._encodeObject(r),i):this._write(";\n    "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)+" "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i)}catch(e){i&&i(e)}},_writeTripleLine:function(e,t,r,n,i){delete this._prefixMatch
try{this._write(this._encodeIriOrBlankNode(e)+" "+this._encodeIriOrBlankNode(t)+" "+this._encodeObject(r)+(n?" "+this._encodeIriOrBlankNode(n)+".\n":".\n"),i)}catch(e){i&&i(e)}},_encodeIriOrBlankNode:function(e){var t=e[0]
if("["===t||"("===t||"_"===t&&":"===e[1])return e
a.test(e)&&(e=e.replace(s,i))
var r=this._prefixRegex.exec(e)
return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:"<"+e+">"},_encodeLiteral:function(e,t,r){return a.test(e)&&(e=e.replace(s,i)),r?'"'+e+'"@'+r:t?'"'+e+'"^^'+this._encodeIriOrBlankNode(t):'"'+e+'"'},_encodeSubject:function(e){if('"'===e[0])throw new Error("A literal as subject is not allowed: "+e)
return"["===e[0]&&(this._subject="]"),this._encodeIriOrBlankNode(e)},_encodePredicate:function(e){if('"'===e[0])throw new Error("A literal as predicate is not allowed: "+e)
return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e?"a":this._encodeIriOrBlankNode(e)},_encodeObject:function(e){if('"'!==e[0])return this._encodeIriOrBlankNode(e)
var t=o.exec(e)
if(!t)throw new Error("Invalid literal: "+e)
return this._encodeLiteral(t[1],t[2],t[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(e,t,r,n,i){void 0===r?this._writeTriple(e.subject,e.predicate,e.object,e.graph||"",t):"string"!=typeof n?this._writeTriple(e,t,r,"",n):this._writeTriple(e,t,r,n,i)},addTriples:function(e){for(var t=0;t<e.length;t++)this.addTriple(e[t])},addPrefix:function(e,t,r){var n={}
n[e]=t,this.addPrefixes(n,r)},addPrefixes:function(e,t){var r=this._prefixIRIs,n=!1
for(var i in e){var o=e[i];/[#\/]$/.test(o)&&r[o]!==(i+=":")&&(n=!0,r[o]=i,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+i+" <"+o+">.\n"))}if(n){var a="",s=""
for(var u in r)a+=a?"|"+u:u,s+=(s?"|":"")+r[u]
a=a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+s+")[^/]*$|^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(n?"\n":"",t)},blank:function(e,t){var r,n,i=e
switch(void 0===e?i=[]:"string"==typeof e?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),n=i.length){case 0:return"[]"
case 1:if(r=i[0],"["!==r.object[0])return"[ "+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object)+" ]"
default:for(var o="[",a=0;a<n;a++)r=i[a],r.predicate===e?o+=", "+this._encodeObject(r.object):(o+=(a?";\n  ":"\n  ")+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object),e=r.predicate)
return o+"\n]"}},list:function(e){for(var t=e&&e.length||0,r=new Array(t),n=0;n<t;n++)r[n]=this._encodeObject(e[n])
return"("+r.join(" ")+")"},_prefixRegex:/$0^/,end:function(e){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite
var t=e&&function(r,n){t=null,e(r,n)}
if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}},t.exports=n},{}],40:[function(e,t,r){function n(e){this.options=e||{locator:{}}}function i(e,t,r){function n(t){var n=e[t]
!n&&a&&(n=2==e.length?function(r){e(t,r)}:e),i[t]=n&&function(e){n("[xmldom "+t+"]\t"+e+s(r))}||function(){}}if(!e){if(t instanceof o)return t
e=t}var i={},a=e instanceof Function
return r=r||{},n("warning"),n("error"),n("fatalError"),i}function o(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function s(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function u(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function l(e,t){e.currentElement?e.currentElement.appendChild(t):e.document.appendChild(t)}if(n.prototype.parseFromString=function(e,t){var r=this.options,n=new c,a=r.domBuilder||new o,s=r.errorHandler,u=r.locator,l=r.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"}
return u&&a.setDocumentLocator(u),n.errorHandler=i(s,a,u),n.domBuilder=r.domBuilder||a,/\/x?html?$/.test(t)&&(f.nbsp=" ",f.copy="©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?n.parse(e,l,f):n.errorHandler.error("invalid document source"),a.document},o.prototype={startDocument:function(){this.document=(new f).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.document,o=i.createElementNS(e,r||t),s=n.length
l(this,o),this.currentElement=o,this.locator&&a(this.locator,o)
for(var u=0;u<s;u++){var e=n.getURI(u),c=n.getValue(u),r=n.getQName(u),f=i.createAttributeNS(e,r)
f.getOffset&&a(f.getOffset(1),f),f.value=f.nodeValue=c,o.setAttributeNode(f)}},endElement:function(e,t,r){var n=this.currentElement
n.tagName
this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.document.createProcessingInstruction(e,t)
this.locator&&a(this.locator,r),l(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=u.apply(this,arguments),this.currentElement&&e){if(this.cdata){var n=this.document.createCDATASection(e)
this.currentElement.appendChild(n)}else{var n=this.document.createTextNode(e)
this.currentElement.appendChild(n)}this.locator&&a(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=u.apply(this,arguments)
var n=this.document.createComment(e)
this.locator&&a(this.locator,n),l(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.document.implementation
if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r)
this.locator&&a(this.locator,i),l(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,s(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,s(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,s(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){o.prototype[e]=function(){return null}}),"function"==typeof e){var c=e("./sax").XMLReader,f=r.DOMImplementation=e("./dom").DOMImplementation
r.XMLSerializer=e("./dom").XMLSerializer,r.DOMParser=n}},{"./dom":41,"./sax":42}],41:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t){function r(){}var i=e.prototype
if(Object.create){var o=Object.create(t.prototype)
i.__proto__=o}i instanceof t||(r.prototype=t.prototype,r=new r,n(i,r),e.prototype=i=r),i.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),i.constructor=e)}function o(e,t){if(t instanceof Error)var r=t
else r=this,Error.call(this,ne[e]),this.message=ne[e],Error.captureStackTrace&&Error.captureStackTrace(this,o)
return r.code=e,t&&(this.message=this.message+": "+t),r}function a(){}function s(e,t){this._node=e,this._refresh=t,u(this)}function u(e){var t=e._node._inc||e._node.ownerDocument._inc
if(e._inc!=t){var r=e._refresh(e._node)
F(e,"length",r.length),n(r,e),e._inc=t}}function l(){}function c(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function f(e,t,r,n){if(n?t[c(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e
var i=e.ownerDocument
i&&(n&&b(i,e,n),y(i,e,r))}}function h(e,t,r){var n=c(t,r)
if(!(n>=0))throw o(ie,new Error)
for(var i=t.length-1;n<i;)t[n]=t[++n]
if(t.length=i,e){var a=e.ownerDocument
a&&(b(a,e,r),r.ownerElement=null)}}function d(e){if(this._features={},e)for(var t in e)this._features=e[t]}function p(){}function v(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function g(e,t){if(t(e))return!0
if(e=e.firstChild)do{if(g(e,t))return!0}while(e=e.nextSibling)}function m(){}function y(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}function b(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function w(e,t,r){if(e&&e._inc){e._inc++
var n=t.childNodes
if(r)n[n.length++]=r
else{for(var i=t.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling
n.length=o}}}function x(e,t){var r=t.previousSibling,n=t.nextSibling
return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,w(e.ownerDocument,e),t}function _(e,t,r){var n=t.parentNode
if(n&&n.removeChild(t),t.nodeType===ee){var i=t.firstChild
if(null==i)return t
var o=t.lastChild}else i=o=t
var a=r?r.previousSibling:e.lastChild
i.previousSibling=a,o.nextSibling=r,a?a.nextSibling=i:e.firstChild=i,null==r?e.lastChild=o:r.previousSibling=o
do{i.parentNode=e}while(i!==o&&(i=i.nextSibling))
return w(e.ownerDocument||e,e),t.nodeType==ee&&(t.firstChild=t.lastChild=null),t}function T(e,t){var r=t.parentNode
if(r){var n=e.lastChild
r.removeChild(t)
var n=e.lastChild}var n=e.lastChild
return t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,w(e.ownerDocument,e,t),t}function k(){this._nsMap={}}function N(){}function E(){}function j(){}function S(){}function I(){}function R(){}function O(){}function C(){}function L(){}function D(){}function A(){}function M(){}function U(e,t,r,n){switch(e.nodeType){case X:var i=e.attributes,o=i.length,a=e.firstChild,s=e.tagName
n=H===e.namespaceURI||n,t.push("<",s),r&&t.sort.apply(i,r)
for(var u=0;u<o;u++)U(i.item(u),t,r,n)
if(a||n&&!/^(?:meta|link|img|br|hr|input|button)$/i.test(s)){if(t.push(">"),n&&/^script$/i.test(s))a&&t.push(a.data)
else for(;a;)U(a,t,r,n),a=a.nextSibling
t.push("</",s,">")}else t.push("/>")
return
case Z:case ee:for(var a=e.firstChild;a;)U(a,t,r,n),a=a.nextSibling
return
case V:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,v),'"')
case W:return t.push(e.data.replace(/[<&]/g,v))
case J:return t.push("<![CDATA[",e.data,"]]>")
case G:return t.push("\x3c!--",e.data,"--\x3e")
case K:var l=e.publicId,c=e.systemId
if(t.push("<!DOCTYPE ",e.name),l)t.push(' PUBLIC "',l),c&&"."!=c&&t.push('" "',c),t.push('">')
else if(c&&"."!=c)t.push(' SYSTEM "',c,'">')
else{var f=e.internalSubset
f&&t.push(" [",f,"]"),t.push(">")}return
case Q:return t.push("<?",e.target," ",e.data,"?>")
case $:return t.push("&",e.nodeName,";")
default:t.push("??",e.nodeName)}}function P(e,t,r){var n
switch(t.nodeType){case X:n=t.cloneNode(!1),n.ownerDocument=e
case ee:break
case V:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var i=t.firstChild;i;)n.appendChild(P(e,i,r)),i=i.nextSibling
return n}function q(e,t,r){var n=new t.constructor
for(var i in t){var o=t[i]
"object"!=typeof o&&o!=n[i]&&(n[i]=o)}switch(t.childNodes&&(n.childNodes=new a),n.ownerDocument=e,n.nodeType){case X:var s=t.attributes,u=n.attributes=new l,c=s.length
u._ownerElement=n
for(var f=0;f<c;f++)n.setAttributeNode(q(e,s.item(f),!0))
break
case V:r=!0}if(r)for(var h=t.firstChild;h;)n.appendChild(q(e,h,r)),h=h.nextSibling
return n}function F(e,t,r){e[t]=r}function B(e){switch(e.nodeType){case 1:case 11:var t=[]
for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(B(e)),e=e.nextSibling
return t.join("")
default:return e.nodeValue}}var H="http://www.w3.org/1999/xhtml",z={},X=z.ELEMENT_NODE=1,V=z.ATTRIBUTE_NODE=2,W=z.TEXT_NODE=3,J=z.CDATA_SECTION_NODE=4,$=z.ENTITY_REFERENCE_NODE=5,Y=z.ENTITY_NODE=6,Q=z.PROCESSING_INSTRUCTION_NODE=7,G=z.COMMENT_NODE=8,Z=z.DOCUMENT_NODE=9,K=z.DOCUMENT_TYPE_NODE=10,ee=z.DOCUMENT_FRAGMENT_NODE=11,te=z.NOTATION_NODE=12,re={},ne={},ie=(re.INDEX_SIZE_ERR=(ne[1]="Index size error",1),re.DOMSTRING_SIZE_ERR=(ne[2]="DOMString size error",2),re.HIERARCHY_REQUEST_ERR=(ne[3]="Hierarchy request error",3),re.WRONG_DOCUMENT_ERR=(ne[4]="Wrong document",4),re.INVALID_CHARACTER_ERR=(ne[5]="Invalid character",5),re.NO_DATA_ALLOWED_ERR=(ne[6]="No data allowed",6),re.NO_MODIFICATION_ALLOWED_ERR=(ne[7]="No modification allowed",7),re.NOT_FOUND_ERR=(ne[8]="Not found",8)),oe=(re.NOT_SUPPORTED_ERR=(ne[9]="Not supported",9),re.INUSE_ATTRIBUTE_ERR=(ne[10]="Attribute in use",10))
re.INVALID_STATE_ERR=(ne[11]="Invalid state",11),re.SYNTAX_ERR=(ne[12]="Syntax error",12),re.INVALID_MODIFICATION_ERR=(ne[13]="Invalid modification",13),re.NAMESPACE_ERR=(ne[14]="Invalid namespace",14),re.INVALID_ACCESS_ERR=(ne[15]="Invalid access",15)
o.prototype=Error.prototype,n(re,o),a.prototype={length:0,item:function(e){return this[e]||null},toString:function(){for(var e=[],t=0;t<this.length;t++)U(this[t],e)
return e.join("")}},s.prototype.item=function(e){return u(this),this[e]},i(s,a),l.prototype={length:0,item:a.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t]
if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement
if(t&&t!=this._ownerElement)throw new o(oe)
var r=this.getNamedItem(e.nodeName)
return f(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement
if(r&&r!=this._ownerElement)throw new o(oe)
return t=this.getNamedItemNS(e.namespaceURI,e.localName),f(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e)
return h(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t)
return h(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r]
if(n.localName==t&&n.namespaceURI==e)return n}return null}},d.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()]
return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new m
if(n.implementation=this,n.childNodes=new a,n.doctype=r,r&&n.appendChild(r),t){var i=n.createElementNS(e,t)
n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new R
return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},p.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return x(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return q(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling
t&&t.nodeType==W&&e.nodeType==W?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap
if(r)for(var n in r)if(r[n]==e)return n
t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap
if(r&&e in r)return r[e]
t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(z,p),n(z,p.prototype),m.prototype={nodeName:"#document",nodeType:Z,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==ee){for(var r=e.firstChild;r;){var n=r.nextSibling
this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),_(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),x(this,e)},importNode:function(e,t){return P(this,e,t)},getElementById:function(e){var t=null
return g(this.documentElement,function(r){if(1==r.nodeType&&r.getAttribute("id")==e)return t=r,!0}),t},createElement:function(e){var t=new k
return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new a,(t.attributes=new l)._ownerElement=t,t},createDocumentFragment:function(){var e=new D
return e.ownerDocument=this,e.childNodes=new a,e},createTextNode:function(e){var t=new j
return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new S
return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new I
return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new A
return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new N
return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new L
return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new k,n=t.split(":"),i=r.attributes=new l
return r.childNodes=new a,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,i._ownerElement=r,r},createAttributeNS:function(e,t){var r=new N,n=t.split(":")
return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},i(m,p),k.prototype={nodeType:X,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e)
return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e)
r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e)
t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===ee?this.insertBefore(e,null):T(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t)
r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t)
return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t)
n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new s(this,function(t){var r=[]
return g(t,function(n){n===t||n.nodeType!=X||"*"!==e&&n.tagName!=e||r.push(n)}),r})},getElementsByTagNameNS:function(e,t){return new s(this,function(r){var n=[]
return g(r,function(i){i===r||i.nodeType!==X||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||n.push(i)}),n})}},m.prototype.getElementsByTagName=k.prototype.getElementsByTagName,m.prototype.getElementsByTagNameNS=k.prototype.getElementsByTagNameNS,i(k,p),N.prototype.nodeType=V,i(N,p),E.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ne[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},i(E,p),j.prototype={nodeName:"#text",nodeType:W,splitText:function(e){var t=this.data,r=t.substring(e)
t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length
var n=this.ownerDocument.createTextNode(r)
return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},i(j,E),S.prototype={nodeName:"#comment",nodeType:G},i(S,E),I.prototype={nodeName:"#cdata-section",nodeType:J},i(I,E),R.prototype.nodeType=K,i(R,p),O.prototype.nodeType=te,i(O,p),C.prototype.nodeType=Y,i(C,p),L.prototype.nodeType=$,i(L,p),D.prototype.nodeName="#document-fragment",D.prototype.nodeType=ee,i(D,p),A.prototype.nodeType=Q,i(A,p),M.prototype.serializeToString=function(e,t){return e.toString(t)},p.prototype.toString=function(e){var t=[]
return U(this,t,e),t.join("")}
try{Object.defineProperty&&(Object.defineProperty(s.prototype,"length",{get:function(){return u(this),this.$$length}}),Object.defineProperty(p.prototype,"textContent",{get:function(){return B(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e))
break
default:this.data=e,this.value=value,this.nodeValue=e}}}),F=function(e,t,r){e["$$"+t]=r})}catch(e){}"function"==typeof e&&(r.DOMImplementation=d,r.XMLSerializer=M)},{}],42:[function(e,t,r){function n(){}function i(e,t,r,n,i){function c(e){if(e>65535){e-=65536
var t=55296+(e>>10),r=56320+(1023&e)
return String.fromCharCode(t,r)}return String.fromCharCode(e)}function p(e){var t=e.slice(1,-1)
return t in r?r[t]:"#"===t.charAt(0)?c(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function v(t){if(t>T){var r=e.substring(T,t).replace(/&#?\w+;/g,p)
w&&g(T),n.characters(r,0,t-T),T=t}}function g(t,r){for(;t>=y&&(r=b.exec(e));)m=r.index,y=m+r[0].length,w.lineNumber++
w.columnNumber=t-m+1}for(var m=0,y=0,b=/.+(?:\r\n?|\n)|.*$/g,w=n.locator,x=[{currentNSMap:t}],_={},T=0;;){try{var k=e.indexOf("<",T)
if(k<0){if(!e.substr(T).match(/^\s*$/)){var N=n.document,E=N.createTextNode(e.substr(T))
N.appendChild(E),n.currentElement=E}return}switch(k>T&&v(k),e.charAt(k+1)){case"/":var j=e.indexOf(">",k+3),S=e.substring(k+2,j),I=x.pop(),R=I.localNSMap
if(I.tagName!=S&&i.fatalError("end tag name: "+S+" is not match the current start tagName:"+I.tagName),n.endElement(I.uri,I.localName,S),R)for(var O in R)n.endPrefixMapping(O)
j++
break
case"?":w&&g(k),j=h(e,k,n)
break
case"!":w&&g(k),j=f(e,k,n,i)
break
default:w&&g(k)
var C=new d,j=a(e,k,C,p,i),L=C.length
if(w){if(L)for(var D=0;D<L;D++){var A=C[D]
g(A.offset),A.offset=o(w,{})}g(j)}!C.closed&&l(e,j,C.tagName,_)&&(C.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),s(C,n,x),"http://www.w3.org/1999/xhtml"!==C.uri||C.closed?j++:j=u(e,j,C.tagName,p,n)}}catch(e){i.error("element parse error: "+e),j=-1}j>T?T=j:v(Math.max(k,T)+1)}}function o(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function a(e,t,r,n,i){for(var o,a,s=++t,u=b;;){var l=e.charAt(s)
switch(l){case"=":if(u===w)o=e.slice(t,s),u=_
else{if(u!==x)throw new Error("attribute equal must after attrName")
u=_}break
case"'":case'"':if(u===_){if(t=s+1,!((s=e.indexOf(l,t))>0))throw new Error("attribute value no end '"+l+"' match")
a=e.slice(t,s).replace(/&#?\w+;/g,n),r.add(o,a,t-1),u=k}else{if(u!=T)throw new Error('attribute value must after "="')
a=e.slice(t,s).replace(/&#?\w+;/g,n),r.add(o,a,t),i.warning('attribute "'+o+'" missed start quot('+l+")!!"),t=s+1,u=k}break
case"/":switch(u){case b:r.setTagName(e.slice(t,s))
case k:case N:case E:u=E,r.closed=!0
case T:case w:case x:break
default:throw new Error("attribute invalid close char('/')")}break
case"":i.error("unexpected end of input")
case">":switch(u){case b:r.setTagName(e.slice(t,s))
case k:case N:case E:break
case T:case w:a=e.slice(t,s),"/"===a.slice(-1)&&(r.closed=!0,a=a.slice(0,-1))
case x:u===x&&(a=o),u==T?(i.warning('attribute "'+a+'" missed quot(")!!'),r.add(o,a.replace(/&#?\w+;/g,n),t)):(i.warning('attribute "'+a+'" missed value!! "'+a+'" instead!!'),r.add(a,a,t))
break
case _:throw new Error("attribute value missed!!")}return s
case"":l=" "
default:if(l<=" ")switch(u){case b:r.setTagName(e.slice(t,s)),u=N
break
case w:o=e.slice(t,s),u=x
break
case T:var a=e.slice(t,s).replace(/&#?\w+;/g,n)
i.warning('attribute "'+a+'" missed quot(")!!'),r.add(o,a,t)
case k:u=N}else switch(u){case x:i.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),r.add(o,o,t),t=s,u=w
break
case k:i.warning('attribute space is required"'+o+'"!!')
case N:u=w,t=s
break
case _:u=T,t=s
break
case E:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function s(e,t,r){for(var n=e.tagName,i=null,o=r[r.length-1].currentNSMap,a=e.length;a--;){var s=e[a],u=s.qName,l=s.value,f=u.indexOf(":")
if(f>0)var h=s.prefix=u.slice(0,f),d=u.slice(f+1),p="xmlns"===h&&d
else d=u,h=null,p="xmlns"===u&&""
s.localName=d,!1!==p&&(null==i&&(i={},c(o,o={})),o[p]=i[p]=l,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,l))}for(var a=e.length;a--;){s=e[a]
var h=s.prefix
h&&("xml"===h&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==h&&(s.uri=o[h]))}var f=n.indexOf(":")
f>0?(h=e.prefix=n.slice(0,f),d=e.localName=n.slice(f+1)):(h=null,d=e.localName=n)
var v=e.uri=o[h||""]
if(t.startElement(v,d,n,e),e.closed){if(t.endElement(v,d,n),i)for(h in i)t.endPrefixMapping(h)}else e.currentNSMap=o,e.localNSMap=i,r.push(e)}function u(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var o=e.indexOf("</"+r+">",t),a=e.substring(t+1,o)
if(/[&<]/.test(a))return/^script$/i.test(r)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,n),i.characters(a,0,a.length),o)}return t+1}function l(e,t,r,n){var i=n[r]
return null==i&&(i=n[r]=e.lastIndexOf("</"+r+">")),i<t}function c(e,t){for(var r in e)t[r]=e[r]}function f(e,t,r,n){switch(e.charAt(t+2)){case"-":if("-"===e.charAt(t+3)){var i=e.indexOf("--\x3e",t+4)
return i>t?(r.comment(e,t+4,i-t-4),i+3):(n.error("Unclosed comment"),-1)}return-1
default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9)
return r.startCDATA(),r.characters(e,t+9,i-t-9),r.endCDATA(),i+3}var o=v(e,t),a=o.length
if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],u=a>3&&/^public$/i.test(o[2][0])&&o[3][0],l=a>4&&o[4][0],c=o[a-1]
return r.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),c.index+c[0].length}}return-1}function h(e,t,r){var n=e.indexOf("?>",t)
if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/)
if(i){i[0].length
return r.processingInstruction(i[1],i[2]),n+2}return-1}return-1}function d(e){}function p(e,t){return e.__proto__=t,e}function v(e,t){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g
for(i.lastIndex=t,i.exec(e);r=i.exec(e);)if(n.push(r),r[1])return n}var g=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=new RegExp("[\\-\\.0-9"+g.source.slice(1,-1)+"·̀-ͯ\\u203F-⁀]"),y=new RegExp("^"+g.source+m.source+"*(?::"+g.source+m.source+"*)?$"),b=0,w=1,x=2,_=3,T=4,k=5,N=6,E=7
n.prototype={parse:function(e,t,r){var n=this.domBuilder
n.startDocument(),c(t,t={}),i(e,t,r,n,this.errorHandler),n.endDocument()}},d.prototype={setTagName:function(e){if(!y.test(e))throw new Error("invalid tagName:"+e)
this.tagName=e},add:function(e,t,r){if(!y.test(e))throw new Error("invalid attribute:"+e)
this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getOffset:function(e){return this[e].offset},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},p({},p.prototype)instanceof p||(p=function(e,t){function r(){}r.prototype=t,r=new r
for(t in e)r[t]=e[t]
return r}),"function"==typeof e&&(r.XMLReader=n)},{}],43:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./class-order"),u=e("./node"),l=function(e){function t(e){n(this,t)
var r=i(this,Object.getPrototypeOf(t).call(this))
return r.termType=t.termType,r.id=t.nextId++,r.value=e||r.id.toString(),r}return o(t,e),a(t,[{key:"compareTerm",value:function(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.id<e.id?-1:this.id>e.id?1:0}},{key:"copy",value:function(e){var r=new t
return e.copyTo(this,r),r}},{key:"toCanonical",value:function(){return"_:"+this.value}},{key:"toString",value:function(){return t.NTAnonymousNodePrefix+this.id}}]),t}(u)
l.nextId=0,l.termType="BlankNode",l.NTAnonymousNodePrefix="_:n",l.prototype.classOrder=s.BlankNode,l.prototype.isBlank=1,l.prototype.isVar=1,t.exports=l},{"./class-order":44,"./node":59}],44:[function(e,t,r){"use strict"
var n={Literal:1,Collection:3,Formula:4,NamedNode:5,BlankNode:6,Variable:7}
t.exports=n},{}],45:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./blank-node"),u=e("./class-order"),l=e("./node"),c=function(e){function t(e){n(this,t)
var r=i(this,Object.getPrototypeOf(t).call(this))
return r.termType=t.termType,r.id=s.nextId++,r.elements=[],r.closed=!1,e&&e.length>0&&e.forEach(function(e){r.elements.push(l.fromValue(e))}),r}return o(t,e),a(t,[{key:"append",value:function(e){return this.elements.push(e)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(e){return new t(this.elements.map(function(t){t.substitute(e)}))}},{key:"toNT",value:function(){return s.NTAnonymousNodePrefix+this.id}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(e){return this.elements.unshift(e)}}]),t}(l)
c.termType="collection",c.prototype.classOrder=u.Collection,c.prototype.compareTerm=s.prototype.compareTerm,c.prototype.isVar=0,t.exports=c},{"./blank-node":43,"./class-order":44,"./node":59}],46:[function(e,t,r){"use strict"
function n(e,t){var r,n=s.Parser(),i=s.Writer({format:"N-Quads"})
o.waterfall([function(t){n.parse(e,t)},function(e,t,r){null!==e&&i.addTriple(e),"function"==typeof r&&i.end(r)},function(e,t){try{a.fromRDF(e,{format:"application/nquads"},t)}catch(e){t(e)}},function(e,n){r=JSON.stringify(e),t(null,r)}],function(e,n){t(e,r)})}function i(e,t){var r,n=s.Parser(),i=s.Writer({format:"N-Quads"})
o.waterfall([function(t){n.parse(e,t)},function(e,t,r){null!==e&&i.addTriple(e),"function"==typeof r&&i.end(r)},function(e,n){r=e,t(null,r)}],function(e,n){t(e,r)})}t.exports.convertToJson=n,t.exports.convertToNQuads=i
var o=e("async"),a=e("jsonld"),s=e("n3")},{async:1,jsonld:30,n3:32}],47:[function(e,t,r){"use strict"
function n(e){return new v(e)}function i(e){return new g(e)}function o(){return new m}function a(e,t,r){return new y(e,t,r)}function s(){return new b}function u(e,t,r){return new w(""+e,t,r)}function l(e,t){return"string"==typeof t?-1===t.indexOf(":")?new w(e,t):new w(e,null,c(t)):new w(e,null,t)}function c(e){return new x(e)}function f(e,t,r,n){return n=n||new m,new _(e,t,r,n)}function h(e,t,r,n){return new _(e,t,r,n)}function d(e,t,r){return f(e,t,r)}function p(e){return new T(e)}var v=e("./blank-node"),g=e("./collection"),m=e("./default-graph"),y=e("./fetcher"),b=e("./indexed-formula"),w=e("./literal"),x=e("./named-node"),_=e("./statement"),T=e("./variable")
t.exports.blankNode=n,t.exports.defaultGraph=o,t.exports.graph=s,t.exports.literal=l,t.exports.namedNode=c,t.exports.quad=f,t.exports.triple=d,t.exports.variable=p,t.exports.collection=i,t.exports.fetcher=a,t.exports.lit=u,t.exports.st=h},{"./blank-node":43,"./collection":45,"./default-graph":48,"./fetcher":50,"./indexed-formula":52,"./literal":54,"./named-node":57,"./statement":69,"./variable":74}],48:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./node"),u=function(e){function t(){n(this,t)
var e=i(this,Object.getPrototypeOf(t).call(this))
return e.termType="DefaultGraph",e.value="",e}return o(t,e),a(t,[{key:"toCanonical",value:function(){return this.value}}]),t}(s)
t.exports=u},{"./node":59}],49:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./node"),u=function(e){function t(){n(this,t)
var e=i(this,Object.getPrototypeOf(t).call(this))
return e.termType=t.termType,e}return o(t,e),a(t,[{key:"toString",value:function(){return"()"}}]),t}(s)
u.termType="empty",t.exports=u},{"./node":59}],50:[function(e,t,r){"use strict"
var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=e("./log"),o=e("./n3parser"),a=e("./named-node"),s=e("./namespace"),u=e("./parse"),l=e("./rdfaparser").parseRDFaDOM,c=e("./rdfxmlparser"),f=e("./uri"),h=e("./util"),d={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},p=function e(t,r,p){this.store=t,this.thisURI="http://dig.csail.mit.edu/2005/ajar/ajaw/rdf/sources.js#SourceFetcher",this.timeout=r||3e4,this.async=null==p||p,this.appNode=this.store.bnode(),this.store.fetcher=this,this.requested={},this.redirectedTo={},this.fetchCallbacks={},this.nonexistant={},this.lookedUp={},this.handlers=[],this.mediatypes={}
var v=this,g=this.store,m={}
m.link=s("http://www.w3.org/2007/ont/link#"),m.http=s("http://www.w3.org/2007/ont/http#"),m.httph=s("http://www.w3.org/2007/ont/httph#"),m.rdf=s("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),m.rdfs=s("http://www.w3.org/2000/01/rdf-schema#"),m.dc=s("http://purl.org/dc/elements/1.1/"),v.mediatypes["image/*"]={q:.9},v.mediatypes["*/*"]={q:.1},e.crossSiteProxy=function(t){return e.crossSiteProxyTemplate?e.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t)):void 0},e.RDFXMLHandler=function(e){e&&(this.dom=e[0]),this.handlerFactory=function(e){e.handle=function(t){var r=v.store
if(this.dom||(this.dom=h.parseXML(e.responseText)),"parsererror"===this.dom.documentElement.nodeName)throw v.failFetch(e,"Badly formed XML in "+e.resource.uri),new Error("Badly formed XML in "+e.resource.uri)
var n=new c(r)
try{n.parse(this.dom,e.original.uri,e.original)}catch(t){v.addStatus(e.req,"Syntax error parsing RDF/XML! "+t),console.log("Syntax error parsing RDF/XML! "+t)}e.options.noMeta||r.add(e.original,m.rdf("type"),m.link("RDFDocument"),v.appNode),t()}}},e.RDFXMLHandler.toString=function(){return"RDFXMLHandler"},e.RDFXMLHandler.register=function(e){e.mediatypes["application/rdf+xml"]={q:.9}},e.RDFXMLHandler.pattern=new RegExp("application/rdf\\+xml"),e.XHTMLHandler=function(e){e&&(this.dom=e[0]),this.handlerFactory=function(e){e.handle=function(t){var r,n
this.dom||(this.dom=h.parseXML(e.responseText))
var i=v.store,o=this.dom.getElementsByTagName("title")
o.length>0&&i.add(e.resource,m.dc("title"),i.literal(o[0].textContent),e.resource)
for(var a=this.dom.getElementsByTagName("link"),s=a.length-1;s>=0;s--)r=a[s].getAttribute("rel"),n=!1,r||(r=a[s].getAttribute("rev"),n=!0),r&&v.linkData(e,r,a[s].getAttribute("href"),e.resource,n)
for(var c=this.dom.getElementsByTagName("script"),f=0;f<c.length;f++){var p=c[f].getAttribute("type")
d[p]&&u(c[f].textContent,i,e.original.uri,p)}if(e.options.noMeta||i.add(e.resource,m.rdf("type"),m.link("WebPage"),v.appNode),!e.options.noRDFa&&l)try{l(this.dom,i,e.original.uri)}catch(t){var g="Error trying to parse "+e.resource+" as RDFa:\n"+t+":\n"+t.stack
return void v.failFetch(e,g)}t()}}},e.XHTMLHandler.toString=function(){return"XHTMLHandler"},e.XHTMLHandler.register=function(e){e.mediatypes["application/xhtml+xml"]={}},e.XHTMLHandler.pattern=new RegExp("application/xhtml"),e.XMLHandler=function(){this.handlerFactory=function(e){e.handle=function(t){for(var r=h.parseXML(e.responseText),n=0;n<r.childNodes.length;n++)if(1===r.childNodes[n].nodeType){var i=r.childNodes[n].namespaceURI
if(i&&i===i.rdf)return v.addStatus(e.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),void v.switchHandler("RDFXMLHandler",e,t,[r])
break}if(r.doctype&&"html"===r.doctype.name&&r.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&r.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/))return v.addStatus(e.req,"Has XHTML DOCTYPE. Switching to XHTML Handler.\n"),void v.switchHandler("XHTMLHandler",e,t)
var o=r.getElementsByTagName("html")[0]
if(o){var a=o.getAttribute("xmlns")
if(a&&a.match(/^http:\/\/www.w3.org\/1999\/xhtml/))return v.addStatus(e.req,"Has a default namespace for XHTML. Switching to XHTMLHandler.\n"),void v.switchHandler("XHTMLHandler",e,t)}v.failFetch(e,"Unsupported dialect of XML: not RDF or XHTML namespace, etc.\n"+e.responseText.slice(0,80))}}},e.XMLHandler.toString=function(){return"XMLHandler"},e.XMLHandler.register=function(e){e.mediatypes["text/xml"]={q:.5},e.mediatypes["application/xml"]={q:.5}},e.XMLHandler.pattern=new RegExp("(text|application)/(.*)xml"),e.HTMLHandler=function(){this.handlerFactory=function(e){e.handle=function(t){var r=e.responseText
if(r.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/))return v.addStatus(e.req,"Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.\n"),void v.switchHandler("XHTMLHandler",e,t)
if(r.match(/.*<!DOCTYPE\s+html[^<]+-\/\/W3C\/\/DTD XHTML[^<]+http:\/\/www.w3.org\/TR\/xhtml[^<]+>/))return v.addStatus(e.req,"Has XHTML DOCTYPE. Switching to XHTMLHandler.\n"),void v.switchHandler("XHTMLHandler",e,t)
if(r.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/))return v.addStatus(e.req,"Has default namespace for XHTML, so switching to XHTMLHandler.\n"),void v.switchHandler("XHTMLHandler",e,t)
var n=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(r)
if(n){var i=v.store
return i.add(e.resource,m.dc("title"),i.literal(n[1]),e.resource),i.add(e.resource,m.rdf("type"),m.link("WebPage"),v.appNode),void t()}v.addStatus(e.req,"non-XML HTML document, not parsed for data."),v.doneFetch(e)}}},e.HTMLHandler.toString=function(){return"HTMLHandler"},e.HTMLHandler.register=function(e){e.mediatypes["text/html"]={q:.9}},e.HTMLHandler.pattern=new RegExp("text/html"),e.TextHandler=function(){this.handlerFactory=function(e){e.handle=function(t){var r=e.responseText
return r.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)?(v.addStatus(e.req,"Warning: "+e.resource+" has an XML declaration. We'll assume it's XML but its content-type wasn't XML.\n"),void v.switchHandler("XMLHandler",e,t)):r.slice(0,500).match(/xmlns:/)?(v.addStatus(e.req,"May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.\n"),void v.switchHandler("XMLHandler",e,t)):(v.addStatus(e.req,"Plain text document, no known RDF semantics."),void v.doneFetch(e))}}},e.TextHandler.toString=function(){return"TextHandler"},e.TextHandler.register=function(e){e.mediatypes["text/plain"]={q:.5}},e.TextHandler.pattern=new RegExp("text/plain"),e.N3Handler=function(){this.handlerFactory=function(e){e.handle=function(t){var r=o(g,g,e.original.uri,e.original.uri,null,null,"",null)
try{r.loadBuf(e.responseText)}catch(t){var n="Error trying to parse "+e.resource+" as Notation3:\n"+t+":\n"+t.stack
return void v.failFetch(e,n)}v.addStatus(e.req,"N3 parsed: "+r.statementCount+" triples in "+r.lines+" lines."),v.store.add(e.original,m.rdf("type"),m.link("RDFDocument"),v.appNode),v.doneFetch(e)}}},e.N3Handler.toString=function(){return"N3Handler"},e.N3Handler.register=function(e){e.mediatypes["text/n3"]={q:"1.0"},e.mediatypes["text/turtle"]={q:1}},e.N3Handler.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)"),h.callbackify(this,["request","recv","headers","load","fail","refresh","retract","done"]),this.addHandler=function(e){v.handlers.push(e),e.register(v)},this.switchHandler=function(t,r,i,o){for(var a=null,s=0;s<this.handlers.length;s++)""+this.handlers[s]===t&&(a=this.handlers[s])
if(!a)throw new Error("web.js: switchHandler: name="+t+" , this.handlers ="+this.handlers+"\nswitchHandler: switching to "+a+"; sf="+v+"; typeof Fetcher="+(void 0===e?"undefined":n(e))+";\n\t Fetcher.HTMLHandler="+e.HTMLHandler+"\n\n\tsf.handlers="+v.handlers+"\n")
new a(o).handlerFactory(r),r.handle(i)},this.addStatus=function(e,t){var r=new Date
t="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds()+"] "+t
var n=this.store,o=n.the(e,m.link("status"))
o&&o.append?o.append(n.literal(t)):i.warn("web.js: No list to add to: "+o+","+t)},this.failFetch=function(e,t){for(this.addStatus(e.req,t),e.options.noMeta||g.add(e.original,m.link("error"),t),e.resource.sameTerm(e.original)?console.log("@@ Recording failure for "+e.original+": "+e.status):console.log("@@ Recording failure original "+e.original+"( as "+e.resource+") : "+e.status),this.requested[f.docpart(e.original.uri)]=e.status;this.fetchCallbacks[e.original.uri]&&this.fetchCallbacks[e.original.uri].length;)this.fetchCallbacks[e.original.uri].shift()(!1,"Fetch of <"+e.original.uri+"> failed: "+t,e)
return delete this.fetchCallbacks[e.original.uri],this.fireCallbacks("fail",[e.original.uri,t]),e.abort(),e},this.linkData=function(e,t,r,n,i){if(r){var o,a=g.sym(f.join(r,e.original.uri))
if("alternate"===t||"seeAlso"===t||"meta"===t||"describedby"===t){if(a.uri===e.original.uri)return
o=m.rdfs("seeAlso")}else o="type"===t?g.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):g.sym(f.join(t,"http://www.iana.org/assignments/link-relations/"))
i?g.add(a,o,e.original,n):g.add(e.original,o,a,n)}},this.parseLinkHeader=function(e,t){var r
try{r=e.getResponseHeader("link")}catch(e){}if(r)for(var n=/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,i=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,o=r.match(n),a=0;a<o.length;a++)for(var s=o[a].split(">"),u=s[0].substring(1),l=s[1],c=l.match(i),f=0;f<c.length;f++){var h=c[f],d=h.split("="),p=d[1].replace(/["']/g,"")
this.linkData(e,p,u,t)}},this.doneFetch=function(e){for(this.addStatus(e.req,"Done."),this.requested[e.original.uri]="done";this.fetchCallbacks[e.original.uri]&&this.fetchCallbacks[e.original.uri].length;)this.fetchCallbacks[e.original.uri].shift()(!0,void 0,e)
delete this.fetchCallbacks[e.original.uri],this.fireCallbacks("done",[e.original.uri])},[e.RDFXMLHandler,e.XHTMLHandler,e.XMLHandler,e.HTMLHandler,e.TextHandler,e.N3Handler].map(this.addHandler),this.nowKnownAs=function(e,t){this.lookedUp[e.uri]?this.lookedUp[t.uri]||this.lookUpThing(t,e):this.lookedUp[t.uri]&&(this.lookedUp[e.uri]||this.lookUpThing(e,t))},this.putBack=function(e,t){e=e.uri||e
var r=$rdf.sym(e).doc()
return t.data=$rdf.serialize(r,this.store,r.uri,t.contentType||"text/turtle"),this.webOperation("PUT",e,t)},this.webOperation=function(e,t,r){t=t.uri||t,r=r||{},t=this.proxyIfNecessary(t)
var n=this
return new Promise(function(i,o){var a=h.XMLHTTPFactory()
a.options=r,a.original=n.store.sym(t),r.noMeta||"undefined"==typeof tabulator||n.saveRequestMetadata(a,n.store,t),a.onreadystatechange=function(){if(4===a.readyState){var e=!a.status||a.status>=200&&a.status<300
r.noMeta||"undefined"==typeof tabulator||n.saveResponseMetadata(a,n.store),e?i(a):o(a.status+" "+a.statusText)}},a.open(e,t,!0),r.contentType&&a.setRequestHeader("Content-type",r.contentType),a.send(r.data?r.data:void 0)})},this.webCopy=function(e,t,r){var n=this
return e=e.uri||e,new Promise(function(i,o){n.webOperation("GET",e).then(function(e){n.webOperation("PUT",t,{data:e.responseText,contentType:r}).then(function(e){i(e)}).catch(function(e){o(e)})}).catch(function(e){o(e)})})},this.lookUpThing=function(e,t,r,n,i){var o,a=g.uris(e),s=!0,u="",l={}
if(!1===r||!0===r?(o=r,r={force:o}):(void 0===r&&(r={}),o=!!r.force),void 0!==a)for(var c=0;c<a.length;c++){var h=a[c]
l[h]=!0,this.lookedUp[h]=!0
var d=this
!function(e){d.requestURI(f.docpart(e),t,r,function(t,r,o){t?n&&n(!0,e):(n&&n(!1,r),s=!1,u+=r+"\n"),delete l[h],Object.keys(l).length>0||i&&i(s,u)})}(h)}return a.length},this.load=function(e,t){var r=this
if(e instanceof Array){var n=e.map(function(e){return r.load(e)})
return Promise.all(n)}return e=e.uri||e,new Promise(function(n,i){r.nowOrWhenFetched(e,t,function(e,t,r){e?n(r):i(t)})})},this.nowOrWhenFetched=function(e,t,r,n){e=e.uri||e,"function"==typeof t?(n={},r=t):void 0===t||(n=t instanceof a?{referingTerm:t}:t),this.requestURI(e,t,n||{},r)},this.get=this.nowOrWhenFetched,this.getHeader=function(e,t){for(var r=this.store,n=r.each(void 0,m.link("requestedURI"),e.uri),i=0;i<n.length;i++){var o=n[i]
if(void 0!==o){var a=r.any(o,m.link("response"))
if(void 0!==o){var s=r.each(a,m.httph(t.toLowerCase()))
return s.length?s.map(function(e){return e.value}):[]}}}},this.proxyIfNecessary=function(t){if("undefined"!=typeof tabulator&&tabulator.isExtension)return t
if("undefined"!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.localSiteMap){var r=t.split("/").slice(2),n=function e(t,r){var n=r[t.shift()]
return n?"string"==typeof n?n+t.join("/"):t?e(t,n):null:null}(r,$SolidTestEnvironment.localSiteMap)
if(n)return n}return e.crossSiteProxyTemplate&&"undefined"!=typeof document&&document.location&&"https:"===(""+document.location).slice(0,6)&&"http:"===t.slice(0,5)?e.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t)):t},this.saveRequestMetadata=function(e,t,r){var n=t.bnode()
if(e.resource=t.sym(r),e.req=n,!e.options.noMeta){var i=new Date,o="["+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"] "
t.add(n,m.rdfs("label"),t.literal(o+" Request for "+r),this.appNode),t.add(n,m.link("requestedURI"),t.literal(r),this.appNode),e.original&&e.original.uri!==r&&t.add(n,m.link("orginalURI"),t.literal(e.original.uri),this.appNode),t.add(n,m.link("status"),t.collection(),this.appNode)}return n},this.saveResponseMetadata=function(e,t){var r=t.bnode()
if(e.req&&t.add(e.req,m.link("response"),r),t.add(r,m.http("status"),t.literal(e.status),r),t.add(r,m.http("statusText"),t.literal(e.statusText),r),e.headers={},"http"===f.protocol(e.resource.uri)||"https"===f.protocol(e.resource.uri)){e.headers=h.getHTTPHeaders(e)
for(var n in e.headers){var i=e.headers[n].trim(),o=n.toLowerCase()
t.add(r,m.httph(o),i,r),"content-type"===o&&t.add(e.resource,m.rdf("type"),$rdf.Util.mediaTypeClass(i),r)}}return r},this.requestURI=function(t,r,n,o){t=t.uri||t,t=t.split("#")[0],"boolean"==typeof n&&(n={force:n}),void 0===n&&(n={})
var a=!!n.force,s=this.store,u=arguments,l=n.baseURI||t
n.userCallback=o
var c=f.protocol(t)
if("tel"===c||"mailto"===c||"urn"===c)return console.log("Unsupported protocol in: "+t),o(!1,"Unsupported protocol",{status:900})||void 0
var d=s.sym(t),p=this.getState(t)
if(a)delete this.nonexistant[t]
else{if("fetched"===p)return o?o(!0):void 0
if("failed"===p)return o?o(!1,"Previously failed. "+this.requested[t],{status:this.requested[t]}):void 0}if(this.fireCallbacks("request",u),o&&(this.fetchCallbacks[t]?this.fetchCallbacks[t].push(o):this.fetchCallbacks[t]=[o]),!0!==this.requested[t]){this.requested[t]=!0,!n.noMeta&&r&&r.uri&&s.add(d.uri,m.link("requestedBy"),r.uri,this.appNode)
var v=h.XMLHTTPFactory(),g=v.req=s.bnode()
v.original=s.sym(l),v.options=n,v.resource=d
var y=this,b=new Date,w="["+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()+"] "
n.noMeta||(s.add(g,m.rdfs("label"),s.literal(w+" Request for "+t),this.appNode),s.add(g,m.link("requestedURI"),s.literal(t),this.appNode),s.add(g,m.link("status"),s.collection(),this.appNode))
var x=function(){if(!v.withCredentials)return!1
if(v.retriedWithCredentials)return!0
v.retriedWithCredentials=!0,console.log("web: Retrying with no credentials for "+v.resource),v.abort(),delete y.requested[t]
var e={}
for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])
return e.withCredentials=!1,y.addStatus(v.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),y.requestURI(t,r,e,v.userCallback),!0},_=function(e){return function(){switch(e.readyState){case 0:var r,i=e.resource.uri
if(this.crossSiteProxyTemplate&&"undefined"!=typeof document&&document.location){var o=f.hostpart,s=""+document.location
if(o(s)&&o(i)&&o(s)!==o(i)){if(r=this.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(i)),y.addStatus(e.req,"BLOCKED -> Cross-site Proxy to <"+r+">"),e.aborted)return
var l=y.store,c=e.req
l.add(c,m.http("redirectedTo"),l.sym(r),c)
var h=e.req=l.bnode()
l.add(c,m.http("redirectedRequest"),h,e.req)
var d=new Date,p="["+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"] "
l.add(h,m.rdfs("label"),l.literal(p+" Request for "+r),this.appNode),l.add(h,m.link("status"),l.collection(),this.appNode),l.add(h,m.link("requestedURI"),l.literal(r),this.appNode)
var v=l.bnode()
l.add(c,m.link("response"),v),e.abort(),e.aborted=!0,e.redirected=!0,y.addStatus(c,"redirected XHR"),y.fetchCallbacks[e.resource.uri]&&(y.fetchCallbacks[r]||(y.fetchCallbacks[r]=[]),y.fetchCallbacks[r],y.fetchCallbacks[r].concat(y.fetchCallbacks[e.resource.uri]),delete y.fetchCallbacks[e.resource.uri]),y.fireCallbacks("redirected",u),y.requested[e.resource.uri]="redirected"
var g=y.requestURI(r,e.resource,e.options||{},e.userCallback)
if(g&&g.req)return void l.add(e.req,l.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),g.req,y.appNode)}}y.failFetch(e,"HTTP Blocked. (ReadyState 0) Cross-site violation for <"+t+">")
break
case 3:break
case 4:if(function(){if(!e.handleResponseDone){e.handleResponseDone=!0
var r=null,i=e.req
y.fireCallbacks("recv",u)
var o=y.store
if(y.saveResponseMetadata(e,o),y.fireCallbacks("headers",[{uri:t,headers:e.headers}]),0===e.status){if(console.log("Masked error - status 0 for "+e.resource.uri),x())return
return void(e.CORS_status=900)}if(e.status>=400){if(404===e.status&&(o.fetcher.nonexistant[e.resource.uri]=!0),e.responseText.length>10){var s=o.bnode()
o.add(s,m.http("content"),o.literal(e.responseText),s),e.statusText&&o.add(s,m.http("statusText"),o.literal(e.statusText),s)}return void y.failFetch(e,"HTTP error for "+e.resource+": "+e.status+" "+e.statusText)}var l,c=e.headers["content-location"],h=function(e){var t=i
for(c&&o.any(t,m.link("requestedURI"))!==c&&o.add(o.sym(c),m.rdf("type"),e,y.appNode);;){var r=o.any(t,m.link("requestedURI"))
if(r&&r.value&&o.add(o.sym(r.value),m.rdf("type"),e,y.appNode),!(t=o.any(void 0,o.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),t)))break
var n=o.any(t,o.sym("http://www.w3.org/2007/ont/link#response"))
if(!n)break
var a=o.any(n,o.sym("http://www.w3.org/2007/ont/http#status"))
if(!a)break
if("301"!==a&&"302"!==a)break}},d={rdf:"application/rdf+xml",owl:"application/rdf+xml",n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"}
if(200===e.status){h(m.link("Document"))
var p=e.headers["content-type"]
n.forceContentType&&(e.headers["content-type"]=n.forceContentType),(!p||p.indexOf("application/octet-stream")>=0)&&(l=d[e.resource.uri.split(".").pop()])&&(e.headers["content-type"]=l),p&&(0!==p.indexOf("image/")&&0!==p.indexOf("application/pdf")||h(o.sym("http://purl.org/dc/terms/Image"))),n.clearPreviousData&&o.removeDocument(e.resource)}if("file"!==f.protocol(e.resource.uri)&&"chrome"!==f.protocol(e.resource.uri)||(n.forceContentType?e.headers["content-type"]=n.forceContentType:(l=d[e.resource.uri.split(".").pop()],e.headers["content-type"]=l||"text/xml")),c){var v=f.join(e.resource.uri,c)
if(!a&&v!==e.resource.uri&&y.requested[v]&&"done"===y.requested[v])return y.doneFetch(e),void e.abort()
y.requested[v]=!0}for(var g=0;g<y.handlers.length;g++)if(e.headers["content-type"]&&e.headers["content-type"].match(y.handlers[g].pattern)){r=new y.handlers[g]
break}if(y.parseLinkHeader(e,i),!r)return void y.doneFetch(e)
try{r.handlerFactory(e)}catch(t){y.failFetch(e,"Exception handling content-type "+e.headers["content-type"]+" was: "+t)}}}(),e.handle&&void 0!==e.responseText){if("redirected"===y.requested[e.resource.uri])break
y.fireCallbacks("load",u),e.handle(function(){y.doneFetch(e)})}else e.redirected?y.addStatus(e.req,"Aborted and redirected to new request."):y.addStatus(e.req,"Fetch over. No data handled. Aborted = "+e.aborted)}}},T=t
"undefined"!=typeof tabulator&&tabulator.preferences.get("offlineModeUsingLocalhost")&&"http://"===T.slice(0,7)&&"localhost/"!==T.slice(7,17)&&(T="http://localhost/"+T.slice(7),i.warn("Localhost kludge for offline use: actually getting <"+T+">"))
var k="https:"===T.slice(0,6)
void 0!==n.withCredentials&&(k=n.withCredentials)
var N=this.proxyIfNecessary(T)
v.onerror=function(t){return function(r){if(t.onErrorWasCalled=!0,"undefined"!=typeof document&&e.crossSiteProxyTemplate&&document.location&&!t.proxyUsed){var n=f.hostpart,i=""+document.location,o=t.resource.uri
if(n(i)&&n(o)&&n(i)!==n(o))if(401===t.status||403===t.status||404===t.status)_(t)()
else{if(x())return
var a=e.crossSiteProxy(o)
if(console.log("web: Direct failed so trying proxy "+a),y.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+a+">"),t.aborted)return
var s=y.store,u=t.req
t.options.noMeta||s.add(u,m.http("redirectedTo"),s.sym(a),u),t.abort(),t.aborted=!0,y.addStatus(u,"redirected to new request"),y.requested[t.resource.uri]="redirected",y.redirectedTo[t.resource.uri]=a,y.fetchCallbacks[t.resource.uri]&&(y.fetchCallbacks[a]||(y.fetchCallbacks[a]=[]),y.fetchCallbacks[a],y.fetchCallbacks[a].concat(y.fetchCallbacks[t.resource.uri]),delete y.fetchCallbacks[t.resource.uri])
var l=y.requestURI(a,t.resource,t.options,t.userCallback)
if(l&&(l.proxyUsed=!0,l.original=t.original,console.log("Proxying but original still "+l.original)),l&&l.req)return void(t.options.noMeta||s.add(t.req,s.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),l.req,y.appNode))}t.CORS_status=999}}}(v),v.onreadystatechange=_(v),v.timeout=y.timeout,v.withCredentials=k,v.actualProxyURI=N,v.req=g,v.options=n,v.options=n,v.resource=d,v.requestedURI=T,v.ontimeout=function(){y.failFetch(v,"requestTimeout")}
try{v.open("GET",N,this.async)}catch(e){return this.failFetch(v,"XHR open for GET failed for <"+T+">:\n\t"+e)}if(a&&v.setRequestHeader("Cache-control","no-cache"),"undefined"!=typeof tabulator&&tabulator.isExtension&&v.channel&&("http"===f.protocol(v.resource.uri)||"https"===f.protocol(v.resource.uri)))try{v.channel.notificationCallbacks={getInterface:function(e){return e.equals(Components.interfaces.nsIChannelEventSink)?{onChannelRedirect:function(e,t,i){if(!v.aborted){var o=y.store,a=t.URI.spec,s=v.req
if(!v.options.noMeta){y.addStatus(v.req,"Redirected: "+v.status+" to <"+a+">"),o.add(s,m.http("redirectedTo"),o.sym(a),v.req)
var l=v.req=o.bnode()
o.add(s,m.http("redirectedRequest"),l,this.appNode)
var c=new Date,h="["+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+"] "
o.add(l,m.rdfs("label"),o.literal(h+" Request for "+a),this.appNode),o.add(l,m.link("status"),o.collection(),this.appNode),o.add(l,m.link("requestedURI"),o.literal(a),this.appNode)
var d=o.bnode()
o.add(s,m.link("response"),d),o.add(d,m.http("status"),o.literal(v.status),d),v.statusText&&o.add(d,m.http("statusText"),o.literal(v.statusText),d)}if(v.status-0!=303&&(o.HTTPRedirects[v.resource.uri]=a),v.status-0==301&&r){var p=f.docpart(r.uri),g="Warning: "+v.resource+" has moved to <"+a+">."
r&&(g+=" Link in <"+p+" >should be changed",o.add(p,o.sym("http://www.w3.org/2007/ont/link#warning"),g,y.appNode))}v.abort(),v.aborted=!0,y.fetchCallbacks[v.resource.uri]&&(y.fetchCallbacks[a]||(y.fetchCallbacks[a]=[]),y.fetchCallbacks[a],y.fetchCallbacks[a].concat(y.fetchCallbacks[v.resource.uri]),delete y.fetchCallbacks[v.resource.uri]),y.addStatus(s,"redirected"),y.fireCallbacks("redirected",u),y.requested[v.resource.uri]="redirected",y.redirectedTo[v.resource.uri]=a
var b=a.indexOf("#")
b>=0&&(v.options.noMeta||o.add(v.resource,o.sym("http://www.w3.org/2007/ont/link#warning"),"Warning: "+v.resource+" HTTP redirects to"+a+' which should not contain a "#" sign'),a=a.slice(0,b))
var w=y.requestURI(a,v.resource,v.options,v.userCallback)
w&&w.req&&!n.noMeta&&o.add(v.req,o.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),w.req,y.appNode)}},asyncOnChannelRedirect:function(e,t,n,i){if(!v.aborted){var o=y.store,a=t.URI.spec,s=v.req
y.addStatus(v.req,"Redirected: "+v.status+" to <"+a+">"),o.add(s,m.http("redirectedTo"),o.sym(a),v.req)
var u=v.req=o.bnode()
o.add(s,m.http("redirectedRequest"),u,v.req)
var l=new Date,c="["+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"] "
o.add(u,m.rdfs("label"),o.literal(c+" Request for "+a),this.appNode),o.add(u,m.link("status"),o.collection(),this.appNode),o.add(u,m.link("requestedURI"),o.literal(a),this.appNode)
var h=o.bnode()
if(o.add(s,m.link("response"),h),o.add(h,m.http("status"),o.literal(v.status),h),v.statusText&&o.add(h,m.http("statusText"),o.literal(v.statusText),h),v.status-0!=303&&(o.HTTPRedirects[v.resource.uri]=a),v.status-0==301&&r){var d=f.docpart(r.uri),p="Warning: "+v.resource+" has moved to <"+a+">."
r&&(p+=" Link in <"+d+" >should be changed",o.add(d,o.sym("http://www.w3.org/2007/ont/link#warning"),p,y.appNode))}v.abort(),v.aborted=!0
var g=a.indexOf("#")
if(g>=0){var b="Warning: "+v.resource+" HTTP redirects to"+a+' which do not normally contain a "#" sign'
o.add(v.resource,o.sym("http://www.w3.org/2007/ont/link#warning"),b),a=a.slice(0,g)}y.requested[v.resource.uri]="redirected",y.redirectedTo[v.resource.uri]=a
var w=y.requestURI(a,v.resource,v.options,v.userCallback)
w&&(w.original=v.original,w.req&&o.add(v.req,o.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),w.req,y.appNode))}}}:Components.results.NS_NOINTERFACE}}}catch(e){return y.failFetch(v,"@@ Couldn't set callback for redirects: "+e)}try{var E=""
for(var j in this.mediatypes){""!==E&&(E+=", "),E+=j
for(var S in this.mediatypes[j])E+=";"+S+"="+this.mediatypes[j][S]}v.setRequestHeader("Accept",E),this.addStatus(v.req,"Accept: "+E)}catch(e){throw new Error("Can't set Accept header: "+e)}try{v.send(null)}catch(e){return this.failFetch(v,"XHR send failed:"+e)}return setTimeout(function(){4!==v.readyState&&y.isPending(v.resource.uri)&&y.failFetch(v,"requestTimeout")},this.timeout),this.addStatus(v.req,"HTTP Request sent."),v}},this.objectRefresh=function(e){var t=g.uris(e)
if(void 0!==t)for(var r=0;r<t.length;r++)this.refresh(this.store.sym(f.docpart(t[r])))},this.unload=function(e){this.store.removeMany(void 0,void 0,void 0,e),delete this.requested[e.uri]},this.refresh=function(e,t){this.fireCallbacks("refresh",arguments),this.requestURI(e.uri,void 0,{force:!0,clearPreviousData:!0},t)},this.retract=function(e){this.store.removeMany(void 0,void 0,void 0,e),e.uri&&delete this.requested[f.docpart(e.uri)],this.fireCallbacks("retract",arguments)},this.getState=function(e){return void 0===this.requested[e]?"unrequested":!0===this.requested[e]?"requested":"done"===this.requested[e]?"fetched":"redirected"===this.requested[e]?this.getState(this.redirectedTo[e]):"failed"},this.isPending=function(e){return!0===this.requested[e]}}
t.exports=p},{"./log":55,"./n3parser":56,"./named-node":57,"./namespace":58,"./parse":60,"./rdfaparser":64,"./rdfxmlparser":65,"./uri":72,"./util":73}],51:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./blank-node"),u=e("./class-order"),l=e("./collection"),c=e("./literal"),f=e("./log"),h=e("./named-node"),d=e("./node"),p=e("./serialize"),v=e("./statement"),g=e("./variable"),m=function(e){function t(e,r,o,a){n(this,t)
var s=i(this,Object.getPrototypeOf(t).call(this))
return s.termType=t.termType,s.statements=e||[],s.constraints=r||[],s.initBindings=o||[],s.optional=a||[],s}return o(t,e),a(t,[{key:"add",value:function(e,t,r,n){return this.statements.push(new v(e,t,r,n))}},{key:"addStatement",value:function(e){return this.statements.push(e)}},{key:"bnode",value:function(e){return new s(e)}},{key:"bottomTypeURIs",value:function(e){var t,r,n,i,o,a,s,u
t=[]
for(o in e)if(e.hasOwnProperty(o)){for(u=e[o],s=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.sym(o)),r=!0,i=0,a=s.length;i<a;i++)if(n=s[i],n.uri in e){r=!1
break}r&&(t[o]=u)}return t}},{key:"collection",value:function(){return new l}},{key:"each",value:function(e,t,r,n){var i,o,a,s,u,l,c,f,h,d=[],p=this.statementsMatching(e,t,r,n,!1)
if(null==e)for(o=0,l=p.length;o<l;o++)i=p[o],d.push(i.subject)
else if(null==t)for(a=0,c=p.length;a<c;a++)i=p[a],d.push(i.predicate)
else if(null==r)for(s=0,f=p.length;s<f;s++)i=p[s],d.push(i.object)
else if(null==n)for(u=0,h=p.length;u<h;u++)i=p[u],d.push(i.why)
return d}},{key:"equals",value:function(e){return!!e&&this.hashString()===e.hashString()}},{key:"findMembersNT",value:function(e){var t,r,n,i,o,a,s,u,l,c,f,h,d,p,v,g,m,y,b,w,x
y={},y[e.toNT()]=!0,l={},h=this.transitiveClosure(y,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)
for(w in h)if(h.hasOwnProperty(w)){for(d=this.statementsMatching(void 0,this.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(w)),t=0,n=d.length;t<n;t++)b=d[t],l[b.subject.toNT()]=b
for(p=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(w)),r=0,i=p.length;r<i;r++)for(c=p[r],v=this.statementsMatching(void 0,c),u=0,o=v.length;u<o;u++)b=v[u],l[b.subject.toNT()]=b
for(g=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(w)),f=0,a=g.length;f<a;f++)for(c=g[f],m=this.statementsMatching(void 0,c),x=0,s=m.length;x<s;x++)b=m[x],l[b.object.toNT()]=b}return l}},{key:"findMemberURIs",value:function(e){return this.NTtoURI(this.findMembersNT(e))}},{key:"findSubClassesNT",value:function(e){var t={}
return t[e.toNT()]=!0,this.transitiveClosure(t,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(e){var t={}
return t[e.toNT()]=!0,this.transitiveClosure(t,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(e){var t,r,n,i,o,a,s,u,l,c,f,h,d,p,v,g,m
for(f="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",m=[],h=this.statementsMatching(e,void 0,void 0),r=0,i=h.length;r<i;r++)if(g=h[r],g.predicate.uri===f)m[g.object.toNT()]=g
else for(d=this.each(g.predicate,this.sym("http://www.w3.org/2000/01/rdf-schema#domain")),n=0,o=d.length;n<o;n++)c=d[n],m[c.toNT()]=g
for(p=this.statementsMatching(void 0,void 0,e),u=0,a=p.length;u<a;u++)for(g=p[u],v=this.each(g.predicate,this.sym("http://www.w3.org/2000/01/rdf-schema#range")),l=0,s=v.length;l<s;l++)t=v[l],m[t.toNT()]=g
return this.transitiveClosure(m,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(e){return this.NTtoURI(this.findTypesNT(e))}},{key:"formula",value:function(){return new t}},{key:"fromNT",value:function(e){var t,r,n,i
switch(e[0]){case"<":return this.sym(e.slice(1,-1))
case'"':if(n=void 0,t=void 0,(r=e.lastIndexOf('"'))<e.length-1)if("@"===e[r+1])n=e.slice(r+2)
else{if("^^"!==e.slice(r+1,r+3))throw new Error("Can't convert string from NT: "+e)
t=this.fromNT(e.slice(r+3))}return e=e.slice(1,r),e=e.replace(/\\"/g,'"'),e=e.replace(/\\n/g,"\n"),e=e.replace(/\\\\/g,"\\"),this.literal(e,n,t)
case"_":return i=new s,i.id=parseInt(e.slice(3),10),s.nextId--,i
case"?":return new g(e.slice(1))}throw new Error("Can't convert from NT: "+e)}},{key:"holds",value:function(e,t,r,n){return null!=this.anyStatementMatching(e,t,r,n)}},{key:"holdsStatement",value:function(e){return this.holds(e.subject,e.predicate,e.object,e.why)}},{key:"list",value:function(e){var t=new l
return e.forEach(function(e){t.append(e)}),t}},{key:"literal",value:function(e,t,r){return new c(""+e,t,r)}},{key:"NTtoURI",value:function(e){var t,r,n={}
for(t in e)e.hasOwnProperty(t)&&(r=e[t],"<"===t[0]&&(n[t.slice(1,-1)]=r))
return n}},{key:"serialize",value:function(e,t,r){var n,i,o
switch(o=p(this),o.suggestNamespaces(this.namespaces),o.setBase(e),i=r?this.statementsMatching(void 0,void 0,void 0,r):this.statements,null!=t?t:"text/n3"){case"application/rdf+xml":n=o.statementsToXML(i)
break
case"text/n3":case"text/turtle":n=o.statementsToN3(i)
break
default:throw new Error("serialize: Content-type "+t+" not supported.")}return n}},{key:"substitute",value:function(e){return new t(this.statements.map(function(t){t.substitute(e)}))}},{key:"sym",value:function(e,t){if(t)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.")
return new h(e)}},{key:"the",value:function(e,t,r,n){var i=this.any(e,t,r,n)
return null==i&&f.error("No value found for the() {"+e+" "+t+" "+r+"}."),i}},{key:"transitiveClosure",value:function(e,t,r){var n,i,o,a,s,u,l={}
Object.assign(l,e)
for(var c={};;){if(null==(u=function(){for(var e in l)if(l.hasOwnProperty(e))return e}()))return c
for(s=r?this.each(void 0,t,this.fromNT(u)):this.each(this.fromNT(u),t),i=0,o=s.length;i<o;i++)n=s[i],(a=n.toNT())in c||a in l||(l[a]=l[u])
c[u]=l[u],delete l[u]}}},{key:"topTypeURIs",value:function(e){var t,r,n,i,o,a,s,u
s=[]
for(n in e)if(e.hasOwnProperty(n)){for(u=e[n],o=0,a=this.each(this.sym(n),this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf")),t=0,i=a.length;t<i;t++)if(r=a[t],"http://www.w3.org/2000/01/rdf-schema#Resource"!==r.uri){o++
break}o||(s[n]=u)}return s["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete s["http://www.w3.org/2000/01/rdf-schema#Resource"],s["http://www.w3.org/2002/07/owl#Thing"]&&delete s["http://www.w3.org/2002/07/owl#Thing"],s}},{key:"toString",value:function(){return"{"+this.statements.join("\n")+"}"}},{key:"whether",value:function(e,t,r,n){return this.statementsMatching(e,t,r,n,!1).length}}]),t}(d)
m.termType="formula",m.prototype.classOrder=u.Formula,m.prototype.isVar=0,m.prototype.ns=e("./namespace"),m.prototype.variable=e("./data-factory").variable,t.exports=m},{"./blank-node":43,"./class-order":44,"./collection":45,"./data-factory":47,"./literal":54,"./log":55,"./named-node":57,"./namespace":58,"./node":59,"./serialize":66,"./statement":69,"./variable":74}],52:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r,n){var i=e.any(t,r,void 0)
return!!i&&(e.equate(i,n),!0)}function s(e,t,r,n){var i=e.any(void 0,r,n)
return!!i&&(e.equate(i,t),!0)}function u(e,t,r,n,i){e.typeCallback&&e.typeCallback(e,n,i)
var o=e.classActions[n.hashString()],a=!1
if(o)for(var s=0;s<o.length;s++)a=a||o[s](e,t,r,n,i)
return a}var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./util").ArrayIndexOf,f=e("./formula"),h=e("./util").RDFArrayRemove,d=e("./statement"),p=e("./node"),v=e("./variable"),g="http://www.w3.org/2002/07/owl#",m=function(t){function r(e){n(this,r)
var t=i(this,Object.getPrototypeOf(r).call(this))
return t.statements=[],t.optional=[],t.propertyActions=[],t.classActions=[],t.redirections=[],t.aliases=[],t.HTTPRedirects=[],t.subjectIndex=[],t.predicateIndex=[],t.objectIndex=[],t.whyIndex=[],t.index=[t.subjectIndex,t.predicateIndex,t.objectIndex,t.whyIndex],t.namespaces={},t.features=e||["sameAs","InverseFunctionalProperty","FunctionalProperty"],t.initPropertyActions(t.features),t}return o(r,t),l(r,[{key:"applyPatch",value:function(t,r,n){var i,o=e("./query"),a=this,s=function(e){if(t.delete){i=t.delete,u&&(i=i.substitute(u)),i=i.statements
var o=[],s=i.map(function(e){var t=a.statementsMatching(e.subject,e.predicate,e.object,r)
return 0===t.length?(o.push(e),null):t[0]})
if(o.length)return n("Couldn't find to delete: "+o[0])
s.map(function(e){a.remove(e)})}t.insert&&(i=t.insert,u&&(i=i.substitute(u)),i=i.statements,i.map(function(e){e.why=r,a.add(e.subject,e.predicate,e.object,e.why)})),e()},u=null
if(t.where){var l=new o("patch")
l.pat=t.where,l.pat.statements.map(function(e){e.why=r})
var c=[]
a.query(l,function(e){c.push(e)},a.fetcher,function(){return 0===c.length?n("No match found to be patched:"+t.where):c.length>1?n("Patch ambiguous. No patch done."):(u=c[0],void s(n))})}else s(n)}},{key:"declareExistential",value:function(e){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(e),e}},{key:"initPropertyActions",value:function(e){this.propertyActions["<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"]=[u],c(e,"sameAs")>=0&&(this.propertyActions["<http://www.w3.org/2002/07/owl#sameAs>"]=[function(e,t,r,n,i){return e.equate(t,n),!0}]),c(e,"InverseFunctionalProperty")>=0&&(this.classActions["<"+g+"InverseFunctionalProperty>"]=[function(e,t,r,n,i){return e.newPropertyAction(t,s)}]),c(e,"FunctionalProperty")>=0&&(this.classActions["<"+g+"FunctionalProperty>"]=[function(e,t,r,n,i){return e.newPropertyAction(t,a)}])}},{key:"add",value:function(e,t,n,i){var o
if(1===arguments.length){if(e instanceof Array)for(o=0;o<e.length;o++)this.add(e[o])
else e instanceof d?this.add(e.subject,e.predicate,e.object,e.why):e instanceof r&&this.add(e.statements)
return this}var a,s
i||(i=this.fetcher?this.fetcher.appNode:this.sym("chrome:theSession")),e=p.fromValue(e),t=p.fromValue(t),n=p.fromValue(n),i=p.fromValue(i),this.predicateCallback&&this.predicateCallback(this,t,i)
var u=this.canon(t).hashString()
a=this.propertyActions[u]
var l=!1
if(a)for(o=0;o<a.length;o++)l=l||a[o](this,e,t,n,i)
if(this.holds(e,t,n,i))return console.log("rdflib: Ignoring dup! {"+e+" "+t+" "+n+" "+i+"}"),null
var c=[this.canon(e).hashString(),u,this.canon(n).hashString(),this.canon(i).hashString()]
for(s=new d(e,t,n,i),o=0;o<4;o++){var f=this.index[o],h=c[o]
f[h]||(f[h]=[]),f[h].push(s)}return this.statements.push(s),s}},{key:"addAll",value:function(e){var t=this
e.forEach(function(e){t.add(e.subject,e.predicate,e.object,e.graph)})}},{key:"any",value:function(e,t,r,n){var i=this.anyStatementMatching(e,t,r,n)
if(null!=i)return null==e?i.subject:null==t?i.predicate:null==r?i.object:void 0}},{key:"anyValue",value:function(e,t,r,n){var i=this.any(e,t,r,n)
return i?i.value:void 0}},{key:"anyStatementMatching",value:function(e,t,r,n){var i=this.statementsMatching(e,t,r,n,!0)
if(i&&0!==i.length)return i[0]}},{key:"canon",value:function(e){if(!e)return e
var t=this.redirections[e.hashString()]
return t||e}},{key:"check",value:function(){this.checkStatementList(this.statements)
for(var e=0;e<4;e++){var t=this.index[e]
for(var r in t)t.hasOwnProperty(r)&&this.checkStatementList(t[r],e)}}},{key:"checkStatementList",value:function(e,t){for(var r,n=["subject","predicate","object","why"],i=" found in "+n[t]+" index.",o=0;o<e.length;o++){r=e[o]
for(var a=[r.subject,r.predicate,r.object,r.why],s=function(e,t){for(var r=0;r<e.length;r++)if(e[r].subject.sameTerm(t.subject)&&e[r].predicate.sameTerm(t.predicate)&&e[r].object.sameTerm(t.object)&&e[r].why.sameTerm(t.why))return!0},u=0;u<4;u++){var l=this.canon(a[u]),c=l.hashString()
this.index[u][c]&&s(this.index[u][c],r)}if(!s(this.statements,r))throw new Error("Statement list does not statement "+r+"@"+r.why+i)}}},{key:"close",value:function(){return this}},{key:"copyTo",value:function(e,t,r){r||(r=[])
var n=this.statementsMatching(e);-1!==c(r,"two-direction")&&n.concat(this.statementsMatching(void 0,void 0,e))
for(var i=0;i<n.length;i++){var o=n[i]
switch(o.object.termType){case"NamedNode":this.add(t,o.predicate,o.object)
break
case"Literal":case"BlankNode":case"collection":this.add(t,o.predicate,o.object.copy(this))}-1!==c(r,"delete")&&this.remove(o)}}},{key:"equate",value:function(e,t){e=this.canon(e),t=this.canon(t)
var r=e.compareTerm(t)
return!r||(r<0?this.replaceWith(t,e):this.replaceWith(e,t))}},{key:"formula",value:function(e){return new r(e)}},{key:"match",value:function(e,t,r,n){return this.statementsMatching(p.fromValue(e),p.fromValue(t),p.fromValue(r),p.fromValue(n))}},{key:"mentionsURI",value:function(e){var t="<"+e+">"
return!!this.subjectIndex[t]||!!this.objectIndex[t]||!!this.predicateIndex[t]}},{key:"newExistential",value:function(e){if(!e)return this.bnode()
var t=this.sym(e)
return this.declareExistential(t)}},{key:"newPropertyAction",value:function(e,t){var r=e.hashString()
this.propertyActions[r]||(this.propertyActions[r]=[]),this.propertyActions[r].push(t)
for(var n=this.statementsMatching(void 0,e,void 0),i=!1,o=0;o<n.length;o++)i=i||t(this,n[o].subject,e,n[o].object)
return i}},{key:"newUniversal",value:function(e){var t=this.sym(e)
return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(t),t}},{key:"variable",value:function(e){return new v(e)}},{key:"nextSymbol",value:function(e){for(var t=0;;t++){var r=e.uri+"#n"+t
if(!this.mentionsURI(r))return this.sym(r)}}},{key:"query",value:function(t,r,n,i){return e("./query").indexedFormulaQuery.call(this,t,r,n,i)}},{key:"remove",value:function(e){if(e instanceof Array){for(var t=0;t<e.length;t++)this.remove(e[t])
return this}if(e instanceof r)return this.remove(e.statements)
var n=this.statementsMatching(e.subject,e.predicate,e.object,e.why)
if(!n.length)throw new Error("Statement to be removed is not on store: "+e)
return this.removeStatement(n[0]),this}},{key:"removeDocument",value:function(e){for(var t=this.statementsMatching(void 0,void 0,void 0,e).slice(),r=0;r<t.length;r++)this.removeStatement(t[r])
return this}},{key:"removeMany",value:function(e,t,r,n,i){for(var o=this.statementsMatching(e,t,r,n,!1),a=[],s=0;s<o.length;s++)a.push(o[s])
for(i&&(a=a.slice(0,i)),s=0;s<a.length;s++)this.remove(a[s])}},{key:"removeMatches",value:function(e,t,r,n){return this.removeStatements(this.statementsMatching(e,t,r,n)),this}},{key:"removeStatement",value:function(e){for(var t=[e.subject,e.predicate,e.object,e.why],r=0;r<4;r++){var n=this.canon(t[r]),i=n.hashString()
this.index[r][i]&&h(this.index[r][i],e)}return h(this.statements,e),this}},{key:"removeStatements",value:function(e){for(var t=0;t<e.length;t++)this.remove(e[t])
return this}},{key:"replaceWith",value:function(e,t){for(var r=e.hashString(),n=t.hashString(),i=function(e){var t=e[r]
if(t){var i=e[n]
e[n]=i?t.concat(i):t,delete e[r]}},o=0;o<4;o++)i(this.index[o])
if(this.redirections[r]=t,e.uri){if(this.aliases[n]||(this.aliases[n]=[]),this.aliases[n].push(e),this.aliases[r])for(o=0;o<this.aliases[r].length;o++)this.redirections[this.aliases[r][o].hashString()]=t,this.aliases[n].push(this.aliases[r][o])
this.add(t,this.sym("http://www.w3.org/2007/ont/link#uri"),e.uri),this.fetcher&&this.fetcher.nowKnownAs(e,t)}return i(this.classActions),i(this.propertyActions),!0}},{key:"allAliases",value:function(e){var t=this.aliases[this.canon(e).hashString()]||[]
return t.push(this.canon(e)),t}},{key:"sameThings",value:function(e,t){if(e.sameTerm(t))return!0
var r=this.canon(e)
if(!r)return!1
var n=this.canon(t)
return!!n&&r.uri===n.uri}},{key:"setPrefixForURI",value:function(e,t){"tab"===e&&this.namespaces.tab||"ns"!==e.slice(0,2)&&"default"!==e.slice(0,7)&&(this.namespaces[e]=t)}},{key:"statementsMatching",value:function(e,t,r,n,i){var o,a,s=[e,t,r,n],u=[],l=[],c=[],f=[]
for(o=0;o<4;o++)u[o]=this.canon(p.fromValue(s[o])),u[o]?(f.push(o),l[o]=u[o].hashString()):c.push(o)
if(0===f.length)return this.statements
if(1===f.length)return o=f[0],a=this.index[o][l[o]],a&&i&&a.length>1&&(a=a.slice(0,1)),a=a||[]
var h,d,v=1e10
for(d=0;d<f.length;d++){if(o=f[d],!(a=this.index[o][l[o]]))return[]
a.length<v&&(v=a.length,h=d)}for(var g=f[h],m=this.index[g][l[g]],y=f.slice(0,h).concat(f.slice(h+1)),b=[],w=["subject","predicate","object","why"],x=0;x<m.length;x++){var _=m[x]
for(d=0;d<y.length;d++)if(o=y[d],!this.canon(_[w[o]]).sameTerm(u[o])){_=null
break}if(null!=_&&(b.push(_),i))break}return b}},{key:"uris",value:function(e){var t=this.canon(e),r=this.aliases[t.hashString()]
if(!t.uri)return[]
var n=[t.uri]
if(r)for(var i=0;i<r.length;i++)n.push(r[i].uri)
return n}},{key:"length",get:function(){return this.statements.length}}]),r}(f)
t.exports=m,t.exports.handleRDFType=u},{"./formula":51,"./node":59,"./query":63,"./statement":69,"./util":73,"./variable":74}],53:[function(e,t,r){"use strict"
var n=function(){return{parseJSON:function(e,t,r){var n,i,o,a={},s=r.sym(t)
for(var u in e){0===u.indexOf("_:")?a[u]?n=a[u]:(n=r.bnode(u),a[u]=n):n=r.sym(u)
var l=e[u]
for(var c in l){var f=l[c]
i=r.sym(c)
for(var h in f){var d=f[h]
if("uri"===d.type)o=r.sym(d.value),r.add(n,i,o,s)
else if("BlankNode"===d.type)a[d.value]?o=a[d.value]:(o=r.bnode(d.value),a[d.value]=o),r.add(n,i,o,s)
else{if("Literal"!==d.type)throw new Error("error: unexpected termtype: "+h.type)
o=d.datatype?r.literal(d.value,void 0,r.sym(d.datatype)):d.lang?r.literal(d.value,d.lang):r.literal(d.value),r.add(n,i,o,s)}}}}}}}()
t.exports=n},{}],54:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./class-order"),l=e("./named-node"),c=e("./node"),f=e("./xsd"),h=function(e){function t(e,r,o){n(this,t)
var a=i(this,Object.getPrototypeOf(t).call(this))
return a.termType=t.termType,a.value=e,r&&(a.lang=r,o=f.langString),o&&(a.datatype=l.fromValue(o)),a}return o(t,e),s(t,[{key:"copy",value:function(){return new t(this.value,this.lang,this.datatype)}},{key:"equals",value:function(e){return!!e&&(this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(!this.datatype&&!e.datatype||this.datatype&&this.datatype.equals(e.datatype)))}},{key:"toNT",value:function(){if("number"==typeof this.value)return this.toString()
if("string"!=typeof this.value)throw new Error("Value of RDF literal is not string or number: "+this.value)
var e=this.value
return e=e.replace(/\\/g,"\\\\"),e=e.replace(/\"/g,'\\"'),e=e.replace(/\n/g,"\\n"),e='"'+e+'"',this.language?e+="@"+this.language:this.datatype.equals(f.string)||(e+="^^"+this.datatype.toCanonical()),e}},{key:"toString",value:function(){return""+this.value}},{key:"language",get:function(){return this.lang},set:function(e){this.lang=e||""}}],[{key:"fromBoolean",value:function(e){return new t(e?"1":"0",null,f.boolean)}},{key:"fromDate",value:function(e){if(!(e instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()")
var r=function(e){return(""+(100+e)).slice(1,3)}
return new t(e.getUTCFullYear()+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate())+"T"+r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())+"Z",null,f.dateTime)}},{key:"fromNumber",value:function(e){if("number"!=typeof e)throw new TypeError("Invalid argument to Literal.fromNumber()")
var r=void 0
return r=(""+e).indexOf("e")>=0?f.float:(""+e).indexOf(".")>=0?f.decimal:f.integer,new t(""+e,null,r)}},{key:"fromValue",value:function(e){if(void 0===e||null===e)return e
if(e&&e.termType)return e
switch(void 0===e?"undefined":a(e)){case"object":if(e instanceof Date)return t.fromDate(e)
case"boolean":return t.fromBoolean(e)
case"number":return t.fromNumber(e)
case"string":return new t(e)}throw new Error("Can't make literal from "+e+" of type "+(void 0===e?"undefined":a(e)))}}]),t}(c)
h.termType="Literal",h.prototype.classOrder=u.Literal,h.prototype.datatype=f.string,h.prototype.lang="",h.prototype.isVar=0,t.exports=h},{"./class-order":44,"./named-node":57,"./node":59,"./xsd":75}],55:[function(e,t,r){"use strict"
t.exports={debug:function(e){},warn:function(e){},info:function(e){},error:function(e){},success:function(e){},msg:function(e){}}},{}],56:[function(e,t,r){"use strict"
var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=e("./uri"),o=e("./util").ArrayIndexOf,a=function(){function e(e){return encodeURI(e)}function t(e,t,n,i,o,a,s,u){return new r(e,t,n,i,o,a,s,u)}function r(e,t,r,n,i,o,a,s){void 0===t&&(t=null),void 0===r&&(r=""),void 0===n&&(n=null),void 0===i&&(i=""),void 0===o&&(o=null),void 0===a&&(a=""),void 0===s&&(s=null),this._bindings=new h([]),this._flags=a,""!=r&&(y(r.indexOf(":")>=0,"Document URI not absolute: "+r),this._bindings[""]=r+"#"),this._store=e,i&&e.setGenPrefix(i),this._thisDoc=r,this.source=e.sym(r),this.lines=0,this.statementCount=0,this.startOfLine=0,this.previousLine=0,this._genPrefix=i,this.keywords=new f(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new h([]),this._variables=new h([]),this._parentVariables=new h([]),this._reason=s,this._reason2=null,x&&(this._reason2=why_BecauseOfData(e.sym(r),this._reason)),this._baseURI=n||(r||null),y(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),null==t?this._thisDoc?this._formula=e.formula(r+"#_formula"):this._formula=e.formula():this._formula=t,this._context=this._formula,this._parentContext=null}function a(e,t,r,n,i){this._str=r.encode("utf-8"),this._str=r,this._i=n,this._why=i,this.lines=t,this._uri=e}function s(e,t,r,n,i){return"Line "+(t+1)+" of <"+e+">: Bad syntax: "+i+'\nat: "'+p(r,n,n+30)+'"'}var u={encode:function(e){e=e.replace(/\r\n/g,"\n")
for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r)
n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},decode:function(e){for(var t="",r=0;r<e.length;){var n=e.charCodeAt(r)
n<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(t+=String.fromCharCode((31&n)<<6|63&e.charCodeAt(r+1)),r+=2):(t+=String.fromCharCode((15&n)<<12|(63&e.charCodeAt(r+1))<<6|63&e.charCodeAt(r+2)),r+=3)}return t}},l="http://www.w3.org/2000/10/swap/log#",c=function(e){return e},f=function(e){return e},h=function(e){if(e.length>0)throw"missing.js: oops nnonempty dict not imp"
return[]},d=function(e){return e.length},p=function(e,t,r){if(void 0===e.slice)throw"@@ mising.js: No .slice function for "+e+" of type "+(void 0===e?"undefined":n(e))
return void 0===r||null==r?e.slice(t):e.slice(t,r)},v=Error("dummy error stop iteration"),g=function(e){return this.last=0,this.li=e,this.next=function(){if(this.last==this.li.length)throw v
return this.li[this.last++]},this},m=function(e,t){return e.indexOf(t)},y=function(e,t){if(!e){if(t)throw"python Assertion failed: "+t
throw"(python) Assertion failed."}},b=function(e){return String.fromCharCode(e)}
String.prototype.encode=function(e){if("utf-8"!=e)throw"UTF8_converter: can only do utf-8"
return u.encode(this)},String.prototype.decode=function(e){if("utf-8"!=e)throw"UTF8_converter: can only do utf-8"
return this}
var w=function(e,t){return i.join(t,e)},x=0,_="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~",T=_+":",k=(new RegExp("^[ \\t]*(#[^\\n]*)?\\r?\\n","g"),new RegExp("^[ \\t]*(#[^\\n]*)?$","g"),new RegExp("^[ \\t]*","g"),new RegExp("^[-+]?[0-9]+","g"),new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g")),N=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),E=(new RegExp("^[0-9]+","g"),new RegExp('[\\\\\\r\\n\\"]',"g")),j=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)?","g")
return r.prototype.here=function(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)},r.prototype.formula=function(){return this._formula},r.prototype.loadStream=function(e){return this.loadBuf(e.read())},r.prototype.loadBuf=function(e){return this.startDoc(),this.feed(e),this.endDoc()},r.prototype.feed=function(e){for(var t=e.decode("utf-8"),r=0;r>=0;){var n=this.skipSpace(t,r)
if(n<0)return
var r=this.directiveOrStatement(t,n)
if(r<0)throw s(this._thisDoc,this.lines,t,n,"expected directive or statement")}},r.prototype.directiveOrStatement=function(e,t){var r=this.skipSpace(e,t)
if(r<0)return r
var n=this.directive(e,r)
if(n>=0)return this.checkDot(e,n)
var n=this.statement(e,r)
return n>=0?this.checkDot(e,n):n},r.prototype.tok=function(e,t,r){if("@"==p(t,r,r+1))var r=r+1
else if(o(this.keywords,e)<0)return-1
var n=r+d(e)
return p(t,r,n)==e&&_.indexOf(t.charAt(n))>=0?n:-1},r.prototype.directive=function(t,r){var n=this.skipSpace(t,r)
if(n<0)return n
var i=new f([]),n=this.tok("bind",t,r)
if(n>0)throw s(this._thisDoc,this.lines,t,r,"keyword bind is obsolete: use @prefix")
var n=this.tok("keywords",t,r)
if(n>0){var r=this.commaSeparatedList(t,n,i,!1)
if(r<0)throw s(this._thisDoc,this.lines,t,r,"'@keywords' needs comma separated list of words")
return this.setKeywords(p(i,null,null)),r}var n=this.tok("forAll",t,r)
if(n>0){var r=this.commaSeparatedList(t,n,i,!0)
if(r<0)throw s(this._thisDoc,this.lines,t,r,"Bad variable list after @forAll")
var a=new g(i)
try{for(;;){var u=a.next();(o(this._variables,u)<0||o(this._parentVariables,u)>=0)&&(this._variables[u]=this._context.newUniversal(u))}}catch(e){if(e!=v)throw e}return r}var n=this.tok("forSome",t,r)
if(n>0){var r=this.commaSeparatedList(t,n,i,this.uri_ref2)
if(r<0)throw s(this._thisDoc,this.lines,t,r,"Bad variable list after @forSome")
var a=new g(i)
try{for(;;){var u=a.next()
this._context.declareExistential(u)}}catch(e){if(e!=v)throw e}return r}var n=this.tok("prefix",t,r)
if(n>=0){var l=new f([]),r=this.qname(t,n,l)
if(r<0)throw s(this._thisDoc,this.lines,t,n,"expected qname after @prefix")
var n=this.uri_ref2(t,r,l)
if(n<0)throw s(this._thisDoc,this.lines,t,r,"expected <uriref> after @prefix _qname_")
var c=l[1].uri
if(this._baseURI)var c=w(this._baseURI,c)
else y(c.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS")
return y(c.indexOf(":")>=0),this._bindings[l[0][0]]=c,this.bind(l[0][0],e(c)),n}var n=this.tok("base",t,r)
if(n>=0){var l=new f([]),r=this.uri_ref2(t,n,l)
if(r<0)throw s(this._thisDoc,this.lines,t,n,"expected <uri> after @base ")
var c=l[0].uri
if(!this._baseURI)throw s(this._thisDoc,this.lines,t,n,"With no previous base URI, cannot use relative URI in @base  <"+c+">")
var c=w(this._baseURI,c)
return y(c.indexOf(":")>=0),this._baseURI=c,r}return-1},r.prototype.bind=function(e,t){""==e||this._store.setPrefixForURI(e,t)},r.prototype.setKeywords=function(e){null==e?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)},r.prototype.startDoc=function(){},r.prototype.endDoc=function(){return this._formula},r.prototype.makeStatement=function(e){e[0].add(e[2],e[1],e[3],this.source),this.statementCount+=1},r.prototype.statement=function(e,t){var r=new f([]),t=this.object(e,t,r)
if(t<0)return t
var n=this.property_list(e,t,r[0])
if(n<0)throw s(this._thisDoc,this.lines,e,t,"expected propertylist")
return n},r.prototype.subject=function(e,t,r){return this.item(e,t,r)},r.prototype.verb=function(e,t,r){var n=this.skipSpace(e,t)
if(n<0)return n
var i=new f([]),n=this.tok("has",e,t)
if(n>=0){var t=this.prop(e,n,i)
if(t<0)throw s(this._thisDoc,this.lines,e,n,"expected property after 'has'")
return r.push(new c(["->",i[0]])),t}var n=this.tok("is",e,t)
if(n>=0){var t=this.prop(e,n,i)
if(t<0)throw s(this._thisDoc,this.lines,e,n,"expected <property> after 'is'")
var n=this.skipSpace(e,t)
if(n<0)throw s(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'")
var t=n,n=this.tok("of",e,t)
if(n<0)throw s(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>")
return r.push(new c(["<-",i[0]])),n}var n=this.tok("a",e,t)
if(n>=0)return r.push(new c(["->",this._store.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")])),n
if("<="==p(e,t,t+2))return r.push(new c(["<-",this._store.sym(l+"implies")])),t+2
if("="==p(e,t,t+1))return">"==p(e,t+1,t+2)?(r.push(new c(["->",this._store.sym(l+"implies")])),t+2):(r.push(new c(["->",this._store.sym("http://www.w3.org/2002/07/owl#sameAs")])),t+1)
if(":="==p(e,t,t+2))return r.push(new c(["->",l+"becomes"])),t+2
var n=this.prop(e,t,i)
if(n>=0)return r.push(new c(["->",i[0]])),n
if(">-"==p(e,t,t+2)||"<-"==p(e,t,t+2))throw s(this._thisDoc,this.lines,e,n,">- ... -> syntax is obsolete.")
return-1},r.prototype.prop=function(e,t,r){return this.item(e,t,r)},r.prototype.item=function(e,t,r){return this.path(e,t,r)},r.prototype.blankNode=function(e){return this._context.bnode(e,this._reason2)},r.prototype.path=function(e,t,r){var n=this.nodeOrLiteral(e,t,r)
if(n<0)return n
for(;"!^.".indexOf(p(e,n,n+1))>=0;){var i=p(e,n,n+1)
if("."==i){var o=p(e,n+1,n+2)
if(!o||T.indexOf(o)>=0&&":?<[{(".indexOf(o)<0)break}var a=r.pop(),u=this.blankNode(this.here(n)),n=this.node(e,n+1,r)
if(n<0)throw s(this._thisDoc,this.lines,e,n,"EOF found in middle of path syntax")
var l=r.pop()
"^"==i?this.makeStatement(new c([this._context,l,u,a])):this.makeStatement(new c([this._context,l,a,u])),r.push(u)}return n},r.prototype.anonymousNode=function(e){var t=this._anonymousNodes[e]
if(t)return t
var t=this._store.bnode(this._context,this._reason2)
return this._anonymousNodes[e]=t,t},r.prototype.node=function(e,t,r,n){void 0===n&&(n=null)
var i=n,o=this.skipSpace(e,t)
if(o<0)return o
var t=o,a=p(e,t,t+1)
if("["==a){var u=this.here(t),o=this.skipSpace(e,t+1)
if(o<0)throw s(this._thisDoc,this.lines,e,t,"EOF after '['")
if("="==p(e,o,o+1)){var t=o+1,l=new f([]),o=this.objectList(e,t,l)
if(!(o>=0))throw s(this._thisDoc,this.lines,e,t,"objectList expected after [= ")
var i=l[0]
if(d(l)>1){var m=new g(l)
try{for(;;){var y=m.next()
this.makeStatement(new c([this._context,this._store.sym("http://www.w3.org/2002/07/owl#sameAs"),i,y]))}}catch(e){if(e!=v)throw e}}var o=this.skipSpace(e,o)
if(o<0)throw s(this._thisDoc,this.lines,e,t,"EOF when objectList expected after [ = ")
if(";"==p(e,o,o+1))var o=o+1}if(null==i)var i=this.blankNode(u)
var t=this.property_list(e,o,i)
if(t<0)throw s(this._thisDoc,this.lines,e,o,"property_list expected")
var o=this.skipSpace(e,t)
if(o<0)throw s(this._thisDoc,this.lines,e,t,"EOF when ']' expected after [ <propertyList>")
if("]"!=p(e,o,o+1))throw s(this._thisDoc,this.lines,e,o,"']' expected")
return r.push(i),o+1}if("{"==a){var b=p(e,t+1,t+2)
if("$"==b){t+=1
for(var o=t+1,w=new f([]),x=!0;;){var t=this.skipSpace(e,o)
if(t<0)throw s(this._thisDoc,this.lines,e,t,"needed '$}', found end.")
if("$}"==p(e,t,t+2)){var o=t+2
break}if(x)var x=!1
else{if(","!=p(e,t,t+1))throw s(this._thisDoc,this.lines,e,t,"expected: ','")
t+=1}var _=new f([]),o=this.item(e,t,_)
if(o<0)throw s(this._thisDoc,this.lines,e,t,"expected item in set or '$}'")
w.push(_[0])}return r.push(this._store.newSet(w,this._context)),o}var o=t+1,T=this._parentContext
this._parentContext=this._context
var k=this._anonymousNodes,N=this._parentVariables
this._parentVariables=this._variables,this._anonymousNodes=new h([]),this._variables=this._variables.slice()
var E=this._reason2
if(this._reason2=null,null==i)var i=this._store.formula()
for(this._context=i;;){var t=this.skipSpace(e,o)
if(t<0)throw s(this._thisDoc,this.lines,e,t,"needed '}', found end.")
if("}"==p(e,t,t+1)){var o=t+1
break}var o=this.directiveOrStatement(e,t)
if(o<0)throw s(this._thisDoc,this.lines,e,t,"expected statement or '}'")}return this._anonymousNodes=k,this._variables=this._parentVariables,this._parentVariables=N,this._context=this._parentContext,this._reason2=E,this._parentContext=T,r.push(i.close()),o}if("("==a){var j=this._store.list,b=p(e,t+1,t+2)
if("$"==b){var j=this._store.newSet
t+=1}for(var o=t+1,w=new f([]);;){var t=this.skipSpace(e,o)
if(t<0)throw s(this._thisDoc,this.lines,e,t,"needed ')', found end.")
if(")"==p(e,t,t+1)){var o=t+1
break}var _=new f([]),o=this.item(e,t,_)
if(o<0)throw s(this._thisDoc,this.lines,e,t,"expected item in list or ')'")
w.push(_[0])}return r.push(j(w,this._context)),o}var o=this.tok("this",e,t)
if(o>=0)throw s(this._thisDoc,this.lines,e,t,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.")
var o=this.tok("true",e,t)
if(o>=0)return r.push(!0),o
var o=this.tok("false",e,t)
if(o>=0)return r.push(!1),o
if(null==i){var o=this.uri_ref2(e,t,r)
if(o>=0)return o}return-1},r.prototype.property_list=function(e,t,r){for(;;){var n=this.skipSpace(e,t)
if(n<0)throw s(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list")
if(":-"!=p(e,n,n+2)){var t=n,i=new f([]),n=this.verb(e,t,i)
if(n<=0)return t
var o=new f([]),t=this.objectList(e,n,o)
if(t<0)throw s(this._thisDoc,this.lines,e,n,"objectList expected")
var a=new g(o)
try{for(;;){var u=a.next(),l=i[0],h=l[0],d=l[1]
"->"==h?this.makeStatement(new c([this._context,d,r,u])):this.makeStatement(new c([this._context,d,u,r]))}}catch(e){if(e!=v)throw e}var n=this.skipSpace(e,t)
if(n<0)throw s(this._thisDoc,this.lines,e,n,"EOF found in list of objects")
if(";"!=p(e,t,t+1))return t
var t=t+1}else{var t=n+2,m=new f([]),n=this.node(e,t,m,r)
if(n<0)throw s(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ")
var t=n}}},r.prototype.commaSeparatedList=function(e,t,r,n){var i=this.skipSpace(e,t)
if(i<0)throw s(this._thisDoc,this.lines,e,i,"EOF found expecting comma sep list")
if("."==e.charAt(i))return t
if(n)var i=this.uri_ref2(e,i,r)
else var i=this.bareWord(e,i,r)
if(i<0)return-1
for(;;){var t=this.skipSpace(e,i)
if(t<0)return t
var o=p(e,t,t+1)
if(","!=o)return"."!=o?-1:t
if(n)var i=this.uri_ref2(e,t+1,r)
else var i=this.bareWord(e,t+1,r)
if(i<0)throw s(this._thisDoc,this.lines,e,i,"bad list content")}},r.prototype.objectList=function(e,t,r){var t=this.object(e,t,r)
if(t<0)return-1
for(;;){var n=this.skipSpace(e,t)
if(n<0)throw s(this._thisDoc,this.lines,e,n,"EOF found after object")
if(","!=p(e,n,n+1))return n
var t=this.object(e,n+1,r)
if(t<0)return t}},r.prototype.checkDot=function(e,t){var r=this.skipSpace(e,t)
if(r<0)return r
if("."==p(e,r,r+1))return r+1
if("}"==p(e,r,r+1))return r
if("]"==p(e,r,r+1))return r
throw s(this._thisDoc,this.lines,e,r,"expected '.' or '}' or ']' at end of statement")},r.prototype.uri_ref2=function(e,t,r){var n=new f([]),i=this.qname(e,t,n)
if(i>=0){var a=n[0],u=a[0],l=a[1]
if(null==u){y(0,"not used?")
var c=this._baseURI+"#"}else{var c=this._bindings[u]
if(!c){if("_"==u)return r.push(this.anonymousNode(l)),i
throw s(this._thisDoc,this.lines,e,t,"Prefix "+u+" not bound.")}}var h=this._store.sym(c+l)
return o(this._variables,h)>=0?r.push(this._variables[h]):r.push(h),i}var t=this.skipSpace(e,t)
if(t<0)return-1
if("?"==e.charAt(t)){var v=new f([]),i=this.variable(e,t,v)
return i>0?(r.push(v[0]),i):-1}if("<"==e.charAt(t)){for(var t=t+1,g=t;t<d(e);){if(">"==e.charAt(t)){var m=p(e,g,t)
if(this._baseURI)var m=w(this._baseURI,m)
else y(m.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs")
if("#"==p(e,t-1,t)&&"#"!=p(m,-1,null))var m=m+"#"
var h=this._store.sym(m)
return o(this._variables,h)>=0?r.push(this._variables[h]):r.push(h),t+1}var t=t+1}throw s(this._thisDoc,this.lines,e,i,"unterminated URI reference")}if(this.keywordsSet){var v=new f([]),i=this.bareWord(e,t,v)
if(i<0)return-1
if(o(this.keywords,v[0])>=0)throw s(this._thisDoc,this.lines,e,t,'Keyword "'+v[0]+'" not allowed here.')
return r.push(this._store.sym(this._bindings[""]+v[0])),i}return-1},r.prototype.skipSpace=function(e,t){for(var r=" \n\r\t\f\v            ​\u2028\u2029　",n=t||0;n<e.length;n++){var i=e.charAt(n)
if(r.indexOf(i)<0){if("#"!==e.charAt(n))return n
for(;;n++){if(n===e.length)return-1
if("\n"===e.charAt(n)){this.lines=this.lines+1
break}}}else"\n"===e.charAt(n)&&(this.lines=this.lines+1)}return-1},r.prototype.variable=function(e,t,r){var n=this.skipSpace(e,t)
if(n<0)return-1
if("?"!=p(e,n,n+1))return-1
var n=n+1,t=n
if("0123456789-".indexOf(e.charAt(n))>=0)throw s(this._thisDoc,this.lines,e,n,"Varible name can't start with '"+e.charAt(n)+"s'")
for(;t<d(e)&&T.indexOf(e.charAt(t))<0;)var t=t+1
if(null==this._parentContext)throw s(this._thisDoc,this.lines,e,n,"Can't use ?xxx syntax for variable in outermost level: "+p(e,n-1,t))
return r.push(this._store.variable(p(e,n,t))),t},r.prototype.bareWord=function(e,t,r){var n=this.skipSpace(e,t)
if(n<0)return-1
var i=e.charAt(n)
if("0123456789-".indexOf(i)>=0)return-1
if(T.indexOf(i)>=0)return-1
for(var t=n;t<d(e)&&T.indexOf(e.charAt(t))<0;)var t=t+1
return r.push(p(e,n,t)),t},r.prototype.qname=function(e,t,r){var t=this.skipSpace(e,t)
if(t<0)return-1
var n=e.charAt(t)
if("0123456789-+".indexOf(n)>=0)return-1
if(T.indexOf(n)<0)for(var i=n,t=t+1;t<d(e);){var n=e.charAt(t)
if(!(T.indexOf(n)<0))break
var i=i+n,t=t+1}else var i=""
if(t<d(e)&&":"==e.charAt(t)){for(var a=i,t=t+1,i="";t<d(e);){var n=e.charAt(t)
if(!(T.indexOf(n)<0))break
var i=i+n,t=t+1}return r.push(new c([a,i])),t}return i&&this.keywordsSet&&o(this.keywords,i)<0?(r.push(new c(["",i])),t):-1},r.prototype.object=function(e,t,r){var n=this.subject(e,t,r)
if(n>=0)return n
var n=this.skipSpace(e,t)
if(n<0)return-1
var t=n
if('"'==e.charAt(t)){if('"""'==p(e,t,t+3))var i='"""'
else var i='"'
var t=t+d(i),o=this.strconst(e,t,i),n=o[0],a=o[1]
return r.push(this._store.literal(a)),n}return-1},r.prototype.nodeOrLiteral=function(e,t,r){var n=this.node(e,t,r)
if(n>=0)return n
var n=this.skipSpace(e,t)
if(n<0)return-1
var t=n
if("-+0987654321".indexOf(e.charAt(t))>=0){N.lastIndex=0
var i=N.exec(e.slice(t))
if(null!=i){var o=i[0]
n=t+o.length,o.indexOf("T")>=0?r.push(this._store.literal(o,void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#dateTime"))):r.push(this._store.literal(o,void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#date")))}else{k.lastIndex=0
var i=k.exec(e.slice(t))
if(null==i)throw s(this._thisDoc,this.lines,e,t,"Bad number or date syntax")
n=t+k.lastIndex
var o=p(e,t,n)
o.indexOf("e")>=0?r.push(this._store.literal(parseFloat(o),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#double"))):p(e,t,n).indexOf(".")>=0?r.push(this._store.literal(parseFloat(o),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#decimal"))):r.push(this._store.literal(parseInt(o),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#integer")))}return n}if('"'==e.charAt(t)){if('"""'==p(e,t,t+3))var a='"""'
else var a='"'
var t=t+d(a),u=null,l=this.strconst(e,t,a),n=l[0],c=l[1],h=null
if("@"==p(e,n,n+1)){j.lastIndex=0
var i=j.exec(e.slice(n+1))
if(null==i)throw s(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @")
var t=j.lastIndex+n+1,h=p(e,n+1,t),n=t}if("^^"==p(e,n,n+2))var v=new f([]),n=this.uri_ref2(e,n+2,v),u=v[0]
return r.push(this._store.literal(c,h,u)),n}return-1},r.prototype.strconst=function(e,t,r){for(var n=t,i="",o=this.lines;n<d(e);){var t=n+d(r)
if(p(e,n,t)==r)return new c([t,i])
if('"'!=e.charAt(n)){E.lastIndex=0
if(!E.exec(e.slice(n)))throw s(this._thisDoc,o,e,n,"Closing quote missing in string at ^ in "+p(e,n-20,n)+"^"+p(e,n,n+20))
var t=n+E.lastIndex-1,i=i+p(e,n,t),a=e.charAt(t)
if('"'!=a)if("\r"!=a){if("\n"==a){if('"'==r)throw s(this._thisDoc,o,e,t,"newline found in string literal")
this.lines=this.lines+1
var i=i+a,n=t+1
this.previousLine=this.startOfLine,this.startOfLine=n}else if("\\"==a){var n=t+1,a=p(e,n,n+1)
if(!a)throw s(this._thisDoc,o,e,t,"unterminated string literal (2)")
var u=m('abfrtvn\\"',a)
if(u>=0)var l='a\b\f\r\t\v\n\\"'.charAt(u),i=i+l,n=n+1
else if("u"==a)var f=this.uEscape(e,n+1,o),n=f[0],a=f[1],i=i+a
else{if("U"!=a)throw s(this._thisDoc,this.lines,e,t,"bad escape")
var f=this.UEscape(e,n+1,o),n=f[0],a=f[1],i=i+a}}}else var n=t+1
else var n=t}else var i=i+'"',n=n+1}throw s(this._thisDoc,this.lines,e,t,"unterminated string literal")},r.prototype.uEscape=function(e,t,r){for(var n=t,i=0,o=0;i<4;){var a=p(e,n,n+1),u=a.toLowerCase(),n=n+1
if(""==u)throw s(this._thisDoc,r,e,t,"unterminated string literal(3)")
var l=m("0123456789abcdef",u)
if(l<0)throw s(this._thisDoc,r,e,t,"bad string literal hex escape")
var o=16*o+l,i=i+1}var f=String.fromCharCode(o)
return new c([n,f])},r.prototype.UEscape=function(e,t,r){for(var n=t,i=0,o="\\U";i<8;){var a=p(e,n,n+1),u=a.toLowerCase(),n=n+1
if(""==u)throw s(this._thisDoc,r,e,t,"unterminated string literal(3)")
if(m("0123456789abcdef",u)<0)throw s(this._thisDoc,r,e,t,"bad string literal hex escape")
var o=o+u,i=i+1}var l=b("0x"+p(o,2,10)-0)
return new c([n,l])},a.prototype.toString=function(){var e=this._str,t=this._i,r=0
if(t>60)var n="...",r=t-60
else var n=""
if(d(e)-t>60)var i="..."
else var i=""
return'Line %i of <%s>: Bad syntax (%s) at ^ in:\n"%s%s^%s%s"'%new c([this.lines+1,this._uri,this._why,n,p(e,r,t),p(e,t,t+60),i])},t}()
t.exports=a},{"./uri":72,"./util":73}],57:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./class-order"),u=e("./node"),l=function(e){function t(e){n(this,t)
var r=i(this,Object.getPrototypeOf(t).call(this))
return r.termType=t.termType,e.indexOf(":")<0&&console.log("Warning: NamedNode URI must be absolute. Relative URIs will fail in future versions"),r.value=e,r}return o(t,e),a(t,[{key:"dir",value:function(){var e=this.uri.split("#")[0],r=e.slice(0,-1).lastIndexOf("/"),n=e.indexOf("//")
return n>=0&&r<n+2||r<0?null:new t(e.slice(0,r+1))}},{key:"doc",value:function(){return this.uri.indexOf("#")<0?this:new t(this.uri.split("#")[0])}},{key:"toString",value:function(){return"<"+this.uri+">"}},{key:"uri",get:function(){return this.value},set:function(e){this.value=e}}],[{key:"fromValue",value:function(e){return void 0===e||null===e?e:e&&e.termType?e:new t(e)}}]),t}(u)
l.termType="NamedNode",l.prototype.classOrder=s.NamedNode,l.prototype.isVar=0,t.exports=l},{"./class-order":44,"./node":59}],58:[function(e,t,r){"use strict"
function n(e){return function(t){return new i(e+(t||""))}}var i=e("./named-node")
t.exports=n},{"./named-node":57}],59:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,[{key:"substitute",value:function(e){return this}},{key:"compareTerm",value:function(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}},{key:"equals",value:function(e){return!!e&&(this.termType===e.termType&&this.value===e.value)}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(e){return this.equals(e)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}]),e}()
t.exports=o,o.fromValue=function(t){var r=e("./collection"),n=e("./literal")
e("./named-node")
return void 0===t||null===t?t:t&&t.termType?t:Array.isArray(t)?new r(t):n.fromValue(t)}},{"./collection":45,"./literal":54,"./named-node":57}],60:[function(e,t,r){"use strict"
function n(e,t,r,n,p){function v(){p&&p(null,t)}function g(e,r){e&&p(e,t)
try{x.parse(r,m)}catch(e){p(e,t)}}function m(e,r,n){if(e&&p(e,t),r)_.push(r)
else{for(var i=0;i<_.length;i++)y(t,_[i])
p(null,t)}}function y(e,t){var r=b(t.subject),n=b(t.predicate),i=b(t.object),o=null
t.graph&&(o=b(t.graph)),e.add(r,n,i,o)}function b(e){var t
if(s.Util.isLiteral(e)){t=s.Util.getLiteralValue(e)
var r=s.Util.getLiteralLanguage(e),n=new l(s.Util.getLiteralType(e))
return new a(t,r,n)}return s.Util.isIRI(e)?new l(e):s.Util.isBlank(e)?(t=e.substring(2,e.length),new i(t)):null}try{if("text/n3"===n||"text/turtle"===n){u(t,t,r,r,null,null,"",null).loadBuf(e),v()}else if("application/rdf+xml"===n){var w=new f(t)
w.parse(d.parseXML(e),r,t.sym(r)),v()}else if("application/xhtml+xml"===n)c(d.parseXML(e,{contentType:"application/xhtml+xml"}),t,r),v()
else if("text/html"===n)c(d.parseXML(e,{contentType:"text/html"}),t,r),v()
else if("application/sparql-update"===n)h(e,t,r),v()
else{if("application/ld+json"!==n&&"application/nquads"!==n&&"application/n-quads"!==n)throw new Error("Don't know how to parse "+n+" yet")
var x=s.Parser(),_=[]
if("application/ld+json"===n){var T
try{T=JSON.parse(e)}catch(e){p(e,null)}o.toRDF(T,{format:"application/nquads"},g)}else g(null,e)}}catch(e){!function(e){if("application/ld+json"!==n||"application/nquads"!==n||"application/n-quads"!==n){if(!p)throw new Error("Error trying to parse <"+r+"> as "+n+":\n"+e+":\n"+e.stack)
p(e,t)}}(e)}}t.exports=n
var i=e("./blank-node"),o=e("jsonld"),a=e("./literal"),s=e("n3"),u=e("./n3parser"),l=e("./named-node"),c=e("./rdfaparser").parseRDFaDOM,f=e("./rdfxmlparser"),h=e("./patch-parser"),d=e("./util")},{"./blank-node":43,"./literal":54,"./n3parser":56,"./named-node":57,"./patch-parser":61,"./rdfaparser":64,"./rdfxmlparser":65,"./util":73,jsonld:30,n3:32}],61:[function(e,t,r){"use strict"
function n(e,t,r){var n,a,s,u=["INSERT","DELETE","WHERE"],l=o("http://www.w3.org/ns/pim/patch#"),c=i(t,t,r,r,null,null,"",null),f={},h=function(e,t,r,n,i){return"Line "+(t+1)+" of <"+e+">: Bad syntax:\n   "+i+'\n   at: "'+r.slice(n,n+30)+'"'}
n=0
var d=t.sym(r+"#query")
for(f.query=d;;){if((a=c.skipSpace(e,n))<0)return f
if(";"===e[a]){if((n=c.skipSpace(e,a+1))<0)return f
a=n}var p=!1
for(s=0;s<u.length;s++){var v=u[s]
if(e.slice(a,a+v.length)===v){if((n=c.skipSpace(e,a+v.length))<0)throw h(c._thisDoc,c.lines,e,a+v.length,"found EOF, needed {...} after "+v)
if(("INSERT"===v||"DELETE"===v)&&"DATA"===e.slice(n,n+4)){if((a=c.skipSpace(e,n+4))<0)throw h(c._thisDoc,c.lines,e,n+4,"needed {...} after INSERT DATA "+v)
n=a}var g=[]
if((a=c.node(e,n,g))<0)throw h(c._thisDoc,c.lines,e,n,"bad syntax or EOF in {...} after "+v)
f[v.toLowerCase()]=g[0],t.add(d,l(v.toLowerCase()),g[0]),p=!0,n=a}}if(!p&&"@prefix"===e.slice(a,a+7)){if((n=c.directive(e,a))<0)throw h(c._thisDoc,c.lines,e,n,"bad syntax or EOF after @prefix ")
n=c.checkDot(e,n),p=!0}if(!p)throw h(c._thisDoc,c.lines,e,a,"Unknown syntax at start of statememt: '"+e.slice(a).slice(0,20)+"'")}}t.exports=n
var i=e("./n3parser"),o=e("./namespace")},{"./n3parser":56,"./namespace":58}],62:[function(e,t,r){"use strict"
function n(e){function t(e){for(var t=s()+"SELECT ",r=0;r<e.vars.length;r++)t+=e.vars[r]+" "
return t+="\n"}function r(e){var t="",r=e.statements
for(var n in r)i.debug("Found statement: "+r),t+=s()+r[n]+"\n"
return t}function n(e){var t=""
for(var r in e.constraints){var n=e.constraints[r]
t+=s()+"FILTER ( "+n.describe(r)+" ) \n"}return t}function o(e){for(var t="",a=0;a<e.optional.length;a++)i.debug("Found optional query"),t+=s()+"OPTIONAL { \n",u++,t+=r(e.optional[a]),t+=n(e.optional[a]),t+=o(e.optional[a]),u--,t+=s()+"}\n"
return t}function a(e){var t=s()+"WHERE \n{ \n"
return u++,t+=r(e),t+=n(e),t+=o(e),u--,t+="}"}function s(){for(var e="",t=0;t<u;t++)e+="    "
return e}var u=0
return function(e){return t(e)+a(e.pat)}(e)}var i=e("./log")
t.exports=n},{"./log":55}],63:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r,n){function i(e,t){return e.nvars!==t.nvars?e.nvars-t.nvars:e.index.length-t.index.length}var o=function(e){var t,r=""
for(t in e)e.hasOwnProperty(t)&&(r+="    "+t+" -> "+e[t])
return r},u=function(e){var t,r="Bindings: ",n=e.length
for(t=0;t<n;t++)r+=o(e[t][0])+";\n\t"
return r},l=function(e,t,r,n){var i=r[e]
if(void 0===i){if(e.isVar){var o=[]
return o[e]=t,[[o,null]]}i=e}if(!i.complexType)return n.redirections[i]&&(i=n.redirections[i]),n.redirections[t]&&(t=n.redirections[t]),i.sameTerm(t)?[[[],null]]:[]
if(e instanceof Array)return t instanceof Array?c(e,t,r):[]
throw new Error("query.js: oops - code not written yet")},c=function e(t,r,n,i){var o
if(t.length!==r.length)return[]
if(!t.length)return[[[],null]]
var a=l(t[0],r[0],n,i)
if(0===a.length)return a
var s,u,c,f,h,d,p,v=[],g=a.length
for(s=0;s<g;s++){u=a[s][0],p=[]
for(h in u)u.hasOwnProperty(h)&&(p[h]=u[h])
for(h in n)n.hasOwnProperty(h)&&(p[h]=n[h])
for(o=e(t.slice(1),r.slice(1),p,i),f=o.length,c=0;c<f;c++){d=o[c][0]
for(h in u)u.hasOwnProperty(h)&&(d[h]=u[h])
v.push([d,null])}}return v},f=function(e,t){var r=t[e]
return void 0===r?e:r},h=function(e,t){var r,n={}
for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r])
for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r])
return n},d=function(e,t){return this.trunkBindings=t,this.originalCallback=e,this.branches=[],this}
d.prototype.checkAllDone=function(){var e
for(e=0;e<this.branches.length;e++)if(!this.branches[e].done)return
a.debug("OPTIONAL BIDNINGS ALL DONE:"),this.doCallBacks(this.branches.length-1,this.trunkBindings)},d.prototype.doCallBacks=function(e,t){var r
if(e<0)return this.originalCallback(t)
for(r=0;r<this.branches[e].results.length;r++)this.doCallBacks(e-1,h(t,this.branches[e].results[r]))}
var p=function(e,t){return this.count=0,this.success=!1,this.done=!1,this.callback=e,this.onDone=t,this}
p.prototype.reportMatch=function(e){this.callback(e),this.success=!0},p.prototype.reportDone=function(){this.done=!0,a.info("Mandatory query branch finished.***"),void 0!==this.onDone&&this.onDone()}
var v=function(e){return this.count=0,this.done=!1,this.results=[],this.junction=e,e.branches.push(this),this}
v.prototype.reportMatch=function(e){this.results.push(e)},v.prototype.reportDone=function(){a.debug("Optional branch finished - results.length = "+this.results.length),0===this.results.length&&(this.results.push({}),a.debug("Optional branch FAILED - that's OK.")),this.done=!0,this.junction.checkAllDone()}
var g=function(e,t,r){var n,i,o,a,s
for(t.nvars=0,t.index=null,i=[t.subject,t.predicate,t.object],s=[e.subjectIndex,e.predicateIndex,e.objectIndex],a=0;a<3;a++)if(i[a].isVar&&void 0===r[i[a]])t.nvars++
else{if(n=f(i[a],r),e.redirections[n.hashString()]&&(n=e.redirections[n.hashString()]),!(o=s[a][n.hashString()]))return t.index=[],!1;(null===t.index||t.index.length>o.length)&&(t.index=o)}return null===t.index&&(t.index=e.statements),!0},m=0,y=function e(r,n,i,u,l,c,f){a.debug("Match begins, Branch count now: "+f.count+" for "+f.pattern_debug)
var h=r.fetcher?r.fetcher:null,p=n.statements
if(0===p.length){if(a.debug("FOUND MATCH WITH BINDINGS:"+o(i)),0===n.optional.length)f.reportMatch(i)
else{a.debug("OPTIONAL: "+n.optional)
var g,y=new d(t,i),b=[]
for(g=0;g<n.optional.length;g++)b[g]=new v(y),b[g].pattern_debug=n.optional[g]
for(g=0;g<n.optional.length;g++)b[g].count=b[g].count+1,e(r,n.optional[g],i,"",l,t,b[g])}return f.count--,void a.debug("Match ends -- success , Branch count now: "+f.count+" for "+f.pattern_debug)}var x,_,T=p.length
if(h){var k=(m++,function(t,o){var a=t.uri.split("#")[0]
h.nowOrWhenFetched(a,void 0,function(o,a,s){o&&console.log("Error following link to <"+t.uri+"> in query: "+a),e(r,n,i,u,l,c,f)})})
for(_=0;_<T;_++){if(x=p[_],void 0!==i[x.subject]&&i[x.subject].uri&&h&&"unrequested"===h.getState(s(i[x.subject].uri)))return void k(i[x.subject])
if(void 0!==i[x.object]&&i[x.object].uri&&h&&"unrequested"===h.getState(s(i[x.object].uri)))return void k(i[x.object])}}w(r,n,i,u,l,c,f)},b=function(e,t){var r,n,i=!0
for(r in e)e.hasOwnProperty(r)&&t[r]&&(n=t[r].test)&&!n(e[r])&&(i=!1)
return i},w=function(e,t,r,n,s,l,f){var h,d,p,v,m,w,x,_=t.statements,T=_.length
for(h=0;h<T;h++)x=_[h],a.info("match2: item="+x+", bindingsSoFar="+o(r)),g(e,x,r)
_.sort(i),x=_[0]
var k=e.formula()
k.optional=t.optional,k.constraints=t.constraints,k.statements=_.slice(1),a.debug(n+"match2 searching "+x.index.length+" for "+x+"; bindings so far="+o(r))
var N,E,j,S=x.index.length,I=0
for(N=0;N<S;N++)for(j=x.index[N],E=c([x.subject,x.predicate,x.object],[j.subject,j.predicate,j.object],r,e),a.info(n+" From first: "+E.length+": "+u(E)),p=E.length,d=0;d<p;d++)if(m=[],w=E[d][0],b(w,t.constraints)){for(v in w)w.hasOwnProperty(v)&&(m[v]=w[v])
for(v in r)r.hasOwnProperty(v)&&(m[v]=r[v])
f.count++,I++,y(e,k,m,n+"  ",s,l,f)}else a.debug("Branch count CS: "+f.count)
f.count--,0===I&&a.debug("Match2 fails completely on "+x),a.debug("Match2 ends, Branch count: "+f.count+" for "+f.pattern_debug),0===f.count&&(a.debug("Branch finished."),f.reportDone())},x=this
a.debug("Query on "+this.statements.length)
var _=new p(t,n)
_.count++,setTimeout(function(){y(x,e.pat,e.pat.initBindings,"",r,t,_)},0)}var o=e("./indexed-formula"),a=e("./log"),s=e("./uri").docpart,u=function e(t,r){n(this,e),this.pat=new o,this.vars=[],this.name=t,this.id=r}
t.exports.Query=u,t.exports.indexedFormulaQuery=i},{"./indexed-formula":52,"./log":55,"./uri":72}],64:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./blank-node"),a=e("./literal"),s=e("./data-factory"),u=e("./named-node"),l=e("./uri"),c=e("./util")
if(void 0===f)var f={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}
var h=function(){function e(t,r){n(this,e),this.options=r||{},this.kb=t,this.target=r.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+(new Date).getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return i(e,[{key:"addTriple",value:function(e,t,r,n){var i,o,a,u
i=void 0===t?s.namedNode(this.options.base):this.toRDFNodeObject(t),a=this.toRDFNodeObject(r),o=this.toRDFNodeObject(n),u=s.namedNode(this.options.base),this.kb.add(i,a,o,u)}},{key:"ancestorPath",value:function(e){for(var t="";e&&e.nodeType!==f.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode
return t}},{key:"copyMappings",value:function(e){var t={}
for(var r in e)t[r]=e[r]
return t}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(t){for(var r=0;r<e.dateTimeTypes.length;r++){var n=e.dateTimeTypes[r].pattern.exec(t)
if(n&&n[0].length===t.length)return e.dateTimeTypes[r].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return"_:"+ ++this.blankCounter}},{key:"newSubjectOrigin",value:function(e,t){}},{key:"parseCURIE",value:function(t,r,n){var i,o=t.indexOf(":")
if(o>=0){var a=t.substring(0,o)
if(""===a)return i=r[""],i?i+t.substring(o+1):null
if("_"===a)return"_:"+t.substring(o+1)
if(e.NCNAME.test(a)&&(i=r[a]))return i+t.substring(o+1)}return null}},{key:"parseCURIEOrURI",value:function(e,t,r){var n=this.parseCURIE(e,t,r)
return n||this.resolveAndNormalize(r,e)}},{key:"parsePredicate",value:function(e,t,r,n,i,o){if(""===e)return null
var a=this.parseTermOrCURIEOrAbsURI(e,t,o?null:r,n,i)
return a&&0===a.indexOf("_:")?null:a}},{key:"parsePrefixMappings",value:function(e,t){for(var r=this.tokenize(e),n=null,i=0;i<r.length;i++)":"===r[i][r[i].length-1]?n=r[i].substring(0,r[i].length-1):n&&(t[n]=this.options.base?l.join(r[i],this.options.base):r[i],n=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(e,t,r){return e=this.trim(e),"["===e.charAt(0)&&"]"===e.charAt(e.length-1)?(e=e.substring(1,e.length-1),e=e.trim(e),0===e.length?null:"_:"===e?this.theOne:this.parseCURIE(e,t,r)):this.parseCURIEOrURI(e,t,r)}},{key:"parseTermOrCURIEOrAbsURI",value:function(e,t,r,n,i){e=this.trim(e)
var o=this.parseCURIE(e,n,i)
if(o)return o
if(r){if(t&&!this.absURIRE.exec(e))return t+e
var a=r[e]
if(a)return a
if(a=r[e.toLowerCase()])return a}return this.absURIRE.exec(e)?this.resolveAndNormalize(i,e):null}},{key:"parseTermOrCURIEOrURI",value:function(e,t,r,n,i){e=this.trim(e)
var o=this.parseCURIE(e,n,i)
if(o)return o
var a=r[e]
return a||((a=r[e.toLowerCase()])?a:t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(i,e))}},{key:"parseURI",value:function(e){return e}},{key:"process",value:function(t,r){var n
t.nodeType===f.DOCUMENT_NODE?(n=t.baseURI,t=t.documentElement,t.baseURI=n,this.setContext(t)):t.parentNode.nodeType===f.DOCUMENT_NODE&&this.setContext(t)
var i=[],o=function(e){if(!e&&r&&r.baseURI)return r.baseURI
var t=e.indexOf("#")
return t>=0&&(e=e.substring(0,t)),r&&r.baseURIMap&&(e=r.baseURIMap(e)),e}
for(i.push({current:t,context:this.push(null,o(t.baseURI))});i.length>0;){var a=i.shift()
if(a.parent){if(a.context.parent&&a.context.parent.listMapping===a.listMapping)continue
for(var s in a.listMapping){var u=a.listMapping[s]
if(0!==u.length){for(var c=[],h=0;h<u.length;h++)c.push(this.newBlankNode())
for(var d=0;d<c.length;d++)this.addTriple(a.parent,c[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",u[d]),this.addTriple(a.parent,c[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:e.objectURI,value:d+1<c.length?c[d+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})
this.addTriple(a.parent,a.subject,s,{type:e.objectURI,value:c[0]})}else this.addTriple(a.parent,a.subject,s,{type:e.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}}else{var p=a.current,v=a.context,g=!1,m=null,y=null,b=null,w=v.prefixes,x=!1,_=[],T=v.listMapping,k=!v.parent,N=v.language,E=v.vocabulary
n=this.parseURI(o(p.baseURI)),p.item=null
var j=p.getAttributeNode("vocab")
if(j){var S=this.trim(j.value)
if(S.length>0){E=S
var I=n.spec
this.addTriple(p,I,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:e.objectURI,value:E})}else E=this.vocabulary}for(var R=0;R<p.attributes.length;R++){var O=p.attributes[R]
if("x"===O.nodeName.charAt(0)&&0===O.nodeName.indexOf("xmlns:")){x||(w=this.copyMappings(w),x=!0)
var C=O.nodeName.substring(6),L=e.trim(O.value)
w[C]=this.options.base?l.join(L,this.options.base):L}}var D=p.getAttributeNode("prefix")
D&&(x||(w=this.copyMappings(w),x=!0),this.parsePrefixMappings(D.value,w))
for(var A=null,M=0;!A&&M<this.langAttributes.length;M++)A=p.getAttributeNodeNS(this.langAttributes[M].namespaceURI,this.langAttributes[M].localName)
if(A){var U=e.trim(A.value)
N=U.length>0?U:null}var P,q,F=p.getAttributeNode("rel"),B=p.getAttributeNode("rev"),H=p.getAttributeNode("typeof"),z=p.getAttributeNode("property"),X=p.getAttributeNode("datatype"),V=this.inHTMLMode?p.getAttributeNode("datetime"):null,W=p.getAttributeNode("content"),J=p.getAttributeNode("about"),$=p.getAttributeNode("src"),Y=p.getAttributeNode("resource"),Q=p.getAttributeNode("href"),G=p.getAttributeNode("inlist"),Z=[]
if(F){q=this.tokenize(F.value)
for(var K=0;K<q.length;K++)(P=this.parsePredicate(q[K],E,v.terms,w,n,this.inHTMLMode&&null!==z))&&Z.push(P)}var ee=[]
if(B){q=this.tokenize(B.value)
for(var te=0;te<q.length;te++)(P=this.parsePredicate(q[te],E,v.terms,w,n,this.inHTMLMode&&z))&&ee.push(P)}if(this.inHTMLMode&&(F||B)&&z&&(0===Z.length&&(F=null),0===ee.length&&(B=null)),F||B?(J&&(m=this.parseSafeCURIEOrCURIEOrURI(J.value,w,n)),H&&(b=m),m||(p.parentNode.nodeType===f.DOCUMENT_NODE?m=o(p.baseURI):v.parentObject&&(m=o(p.parentNode.baseURI)===v.parentObject?o(p.baseURI):v.parentObject)),Y&&(y=this.parseSafeCURIEOrCURIEOrURI(Y.value,w,n)),y||(Q?y=this.resolveAndNormalize(n,encodeURI(Q.value)):$?y=this.resolveAndNormalize(n,encodeURI($.value)):!H||J||this.inXHTMLMode&&("head"===p.localName||"body"===p.localName)||(y=this.newBlankNode())),!H||J||!this.inXHTMLMode||"head"!==p.localName&&"body"!==p.localName?H&&!J&&(b=y):b=m):!z||W||X?(J&&(m=this.parseSafeCURIEOrCURIEOrURI(J.value,w,n)),!m&&Y&&(m=this.parseSafeCURIEOrCURIEOrURI(Y.value,w,n)),!m&&Q&&(m=this.resolveAndNormalize(n,encodeURI(Q.value))),!m&&$&&(m=this.resolveAndNormalize(n,encodeURI($.value))),m||(p.parentNode.nodeType===f.DOCUMENT_NODE?m=o(p.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!==p.localName&&"body"!==p.localName?H?m=this.newBlankNode():v.parentObject&&(m=o(p.parentNode.baseURI)===v.parentObject?o(p.baseURI):v.parentObject,z||(g=!0)):m=o(p.parentNode.baseURI)===v.parentObject?o(p.baseURI):v.parentObject),H&&(b=m)):(J&&(m=this.parseSafeCURIEOrCURIEOrURI(J.value,w,n),H&&(b=m)),m||p.parentNode.nodeType!==f.DOCUMENT_NODE?!m&&v.parentObject&&(m=o(p.parentNode.baseURI)===v.parentObject?o(p.baseURI):v.parentObject):(m=o(p.baseURI),H&&(b=m)),H&&!b&&(Y&&(b=this.parseSafeCURIEOrCURIEOrURI(Y.value,w,n)),!b&&Q&&(b=this.resolveAndNormalize(n,encodeURI(Q.value))),!b&&$&&(b=this.resolveAndNormalize(n,encodeURI($.value))),b||!this.inXHTMLMode&&!this.inHTMLMode||"head"!==p.localName&&"body"!==p.localName||(b=m),b||(b=this.newBlankNode()),y=b)),m&&(J||Y||b)){var re=m
H&&!J&&!Y&&y&&(re=y),this.newSubjectOrigin(p,re)}if(b){q=this.tokenize(H.value)
for(var ne=0;ne<q.length;ne++){var ie=this.parseTermOrCURIEOrAbsURI(q[ne],E,v.terms,w,n)
ie&&this.addTriple(p,b,e.typeURI,{type:e.objectURI,value:ie})}}if(m&&m!==v.parentObject&&(T={},k=!0),y){if(F&&G)for(var oe=0;oe<Z.length;oe++){var ae=T[Z[oe]]
ae||(ae=[],T[Z[oe]]=ae),ae.push({type:e.objectURI,value:y})}else if(F)for(var se=0;se<Z.length;se++)this.addTriple(p,m,Z[se],{type:e.objectURI,value:y})
if(B)for(var ue=0;ue<ee.length;ue++)this.addTriple(p,y,ee[ue],{type:e.objectURI,value:m})}else{if(m&&!y&&(F||B)&&(y=this.newBlankNode()),F&&G)for(var le=0;le<Z.length;le++){var ce=T[Z[le]]
ce||(ce=[],T[P]=ce),_.push({predicate:Z[le],list:ce})}else if(F)for(var fe=0;fe<Z.length;fe++)_.push({predicate:Z[fe],forward:!0})
if(B)for(var he=0;he<ee.length;he++)_.push({predicate:ee[he],forward:!1})}if(z){var de=null,pe=null
X?(de=""===X.value?e.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(X.value,E,v.terms,w,n),pe=V&&!W?V.value:de===e.XMLLiteralURI||de===e.HTMLLiteralURI?null:W?W.value:p.textContent):W?(de=e.PlainLiteralURI,pe=W.value):V?(pe=V.value,(de=e.deriveDateTimeType(pe))||(de=e.PlainLiteralURI)):F||B||(Y&&(pe=this.parseSafeCURIEOrCURIEOrURI(Y.value,w,n)),!pe&&Q?pe=this.resolveAndNormalize(n,encodeURI(Q.value)):!pe&&$&&(pe=this.resolveAndNormalize(n,encodeURI($.value))),pe&&(de=e.objectURI)),de||(H&&!J?(de=e.objectURI,pe=b):(pe=p.textContent,this.inHTMLMode&&"time"===p.localName&&(de=e.deriveDateTimeType(pe)),de||(de=e.PlainLiteralURI))),q=this.tokenize(z.value)
for(var ve=0;ve<q.length;ve++){var ge=this.parsePredicate(q[ve],E,v.terms,w,n)
if(ge)if(G){var me=T[ge]
me||(me=[],T[ge]=me),me.push(de===e.XMLLiteralURI||de===e.HTMLLiteralURI?{type:de,value:p.childNodes}:{type:de||e.PlainLiteralURI,value:pe,language:N})}else de===e.XMLLiteralURI||de===e.HTMLLiteralURI?this.addTriple(p,m,ge,{type:de,value:p.childNodes}):this.addTriple(p,m,ge,{type:de||e.PlainLiteralURI,value:pe,language:N})}}if(m&&!g)for(var ye=0;ye<v.incomplete.length;ye++)v.incomplete[ye].list?v.incomplete[ye].list.push({type:e.objectURI,value:m}):v.incomplete[ye].forward?this.addTriple(p,v.subject,v.incomplete[ye].predicate,{type:e.objectURI,value:m}):this.addTriple(p,m,v.incomplete[ye].predicate,{type:e.objectURI,value:v.subject})
var be=null,we=m
g?(be=this.push(v,v.subject),be.parentObject=o(p.parentNode.baseURI)===v.parentObject?o(p.baseURI):v.parentObject,be.incomplete=v.incomplete,be.language=N,be.prefixes=w,be.vocabulary=E):(be=this.push(v,m),be.parentObject=y||(m||v.subject),be.prefixes=w,be.incomplete=_,y&&(we=y,T={},k=!0),be.listMapping=T,be.language=N,be.vocabulary=E),k&&i.unshift({parent:p,context:v,subject:we,listMapping:T})
for(var xe=p.lastChild;xe;xe=xe.previousSibling)xe.nodeType===f.ELEMENT_NODE&&(xe.baseURI=p.baseURI,i.unshift({current:xe,context:be}))}}this.inHTMLMode&&this.copyProperties()
for(var _e=0;_e<this.finishedHandlers.length;_e++)this.finishedHandlers[_e](t)}},{key:"push",value:function(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(e,t){return l.join(t,e)}},{key:"setContext",value:function(e){"html"===e.localName&&"XHTML+RDFa 1.1"===e.getAttribute("version")?this.setXHTMLContext():"html"===e.localName||"http://www.w3.org/1999/xhtml"===e.namespaceURI?"undefined"!=typeof document&&document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"===document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"toRDFNodeObject",value:function(t){if(void 0!==t){if("string"==typeof t)return"_:"===t.substring(0,2)?(void 0===this.blankNodes[t.substring(2)]&&(this.blankNodes[t.substring(2)]=new o(t.substring(2))),this.blankNodes[t.substring(2)]):s.namedNode(t)
switch(t.type){case e.objectURI:return"_:"===t.value.substring(0,2)?(void 0===this.blankNodes[t.value.substring(2)]&&(this.blankNodes[t.value.substring(2)]=new o(t.value.substring(2))),this.blankNodes[t.value.substring(2)]):s.namedNode(t.value)
case e.PlainLiteralURI:return new a(t.value,t.language||"")
case e.XMLLiteralURI:case e.HTMLLiteralURI:var r=""
return Object.keys(t.value).forEach(function(e){r+=c.domToString(t.value[e],this.htmlOptions)}),new a(r,"",new u(t.type))
default:return new a(t.value,"",new u(t.type))}}}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(t,r,n){var i=new e(r,{base:n})
t.baseURI=n,i.process(t)}}]),e}()
h.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",h.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",h.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",h.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",h.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",h.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",h.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",h.NCNAME=new RegExp("^"+h.nameStartChar+h.nameChar+"*$"),h.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}],t.exports=h},{"./blank-node":43,"./data-factory":47,"./literal":54,"./named-node":57,"./uri":72,"./util":73}],65:[function(e,t,r){"use strict"
var n=e("./uri"),i=function(e){var t={}
t.ns={RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"},t.nodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},this.frameFactory=function(e,r,i){return{NODE:1,ARC:2,parent:r,parser:e,store:e.store,element:i,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(e,t){t=n.join(t,this.base),this.node=this.store.sym(t),this.nodeType=e},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var e=this.store.sym(n.join("#"+this.parent.rdfid,this.base))
this.store.add(e,this.store.sym(t.ns.RDF+"type"),this.store.sym(t.ns.RDF+"Statement"),this.parser.why),this.store.add(e,this.store.sym(t.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(e,this.store.sym(t.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(e,this.store.sym(t.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(e){this.addSymbol(this.NODE,e),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(e){null!=e?null!=this.parser.bnodes[e]?this.node=this.parser.bnodes[e]:this.node=this.parser.bnodes[e]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(e){e===t.ns.RDF+"li"&&(e=t.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,e)},addLiteral:function(e){this.parent.datatype?this.node=this.store.literal(e,"",this.store.sym(this.parent.datatype)):this.node=this.store.literal(e,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}},this.getAttributeNodeNS=function(e,t,r){var n=null
if(e.getAttributeNodeNS)n=e.getAttributeNodeNS(t,r)
else for(var i,o=e.attributes,a=0;a<o.length;++a)if(i=o[a],i.namespaceURI===t&&(i.prefix?i.prefix+":"+r:r)===i.nodeName){n=i
break}return n},this.store=e,this.bnodes={},this.why=null,this.reify=!1,this.parse=function(e,r,n){var i=e.childNodes
this.cleanParser()
var o
if(e.nodeType===t.nodeType.DOCUMENT){for(var a=0;a<i.length;a++)if(i[a].nodeType===t.nodeType.ELEMENT){o=i[a]
break}}else{if(e.nodeType!==t.nodeType.ELEMENT)throw new Error("RDFParser: can't find root in "+r+". Halting. ")
o=e}this.why=n
var s=this.frameFactory(this)
return this.base=r,s.base=r,s.lang=null,this.parseDOM(this.buildFrame(s,o)),!0},this.parseDOM=function(e){for(var r,i=function(e){var t=""
if(null==e.namespaceURI)throw new Error("RDF/XML syntax error: No namespace for "+e.localName+" in "+this.base)
return e.namespaceURI&&(t+=e.namespaceURI),e.localName?t+=e.localName:e.nodeName&&(e.nodeName.indexOf(":")>=0?t+=e.nodeName.split(":")[1]:t+=e.nodeName),t}.bind(this),o=!0;e.parent;){var a=e.element,s=a.attributes
if(a.nodeType===t.nodeType.TEXT||a.nodeType===t.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(t.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(a.nodeValue)
else if(i(a)!==t.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),e.parent&&e.parent.nodeType&&e.parent.nodeType!==e.ARC){e.addArc(i(a)),this.reify&&(r=this.getAttributeNodeNS(a,t.ns.RDF,"ID"))&&(e.rdfid=r.nodeValue,a.removeAttributeNode(r))
var u=this.getAttributeNodeNS(a,t.ns.RDF,"parseType"),l=this.getAttributeNodeNS(a,t.ns.RDF,"datatype")
if(l&&(e.datatype=l.nodeValue,a.removeAttributeNode(l)),u){var c=u.nodeValue
"Literal"===c?(e.datatype=t.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(a),o=!1):"Resource"===c?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):"Collection"===c&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),a.removeAttributeNode(u)}if(0!==s.length){var f=this.getAttributeNodeNS(a,t.ns.RDF,"resource"),h=this.getAttributeNodeNS(a,t.ns.RDF,"nodeID")
e=this.buildFrame(e),f?(e.addNode(f.nodeValue),a.removeAttributeNode(f)):h?(e.addBNode(h.nodeValue),a.removeAttributeNode(h)):e.addBNode()
for(var d=s.length-1;d>=0;d--){var p=this.buildFrame(e)
p.addArc(i(s[d])),i(s[d])===t.ns.RDF+"type"?this.buildFrame(p).addNode(s[d].nodeValue):this.buildFrame(p).addLiteral(s[d].nodeValue)}}else 0===a.childNodes.length&&this.buildFrame(e).addLiteral("")}else{var v=this.getAttributeNodeNS(a,t.ns.RDF,"about")
if(r=this.getAttributeNodeNS(a,t.ns.RDF,"ID"),v&&r)throw new Error("RDFParser: "+a.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.")
if(!v&&r)e.addNode("#"+r.nodeValue),a.removeAttributeNode(r)
else if(null==v&&null==r){var g=this.getAttributeNodeNS(a,t.ns.RDF,"nodeID")
g?(e.addBNode(g.nodeValue),a.removeAttributeNode(g)):e.addBNode()}else e.addNode(v.nodeValue),a.removeAttributeNode(v)
var m=this.getAttributeNodeNS(a,t.ns.RDF,"type")
t.ns.RDF+"Description"!==i(a)&&(m={nodeValue:i(a)}),null!=m&&(this.store.add(e.node,this.store.sym(t.ns.RDF+"type"),this.store.sym(n.join(m.nodeValue,e.base)),this.why),m.nodeName&&a.removeAttributeNode(m))
for(var y=s.length-1;y>=0;y--)this.store.add(e.node,this.store.sym(i(s[y])),this.store.literal(s[y].nodeValue,e.lang),this.why)}for(a=e.element;e.parent;){for(var b=e;null==a;)e=e.parent,a=e.element
var w=a.childNodes&&a.childNodes[e.lastChild]
if(w&&o){if((w.nodeType===t.nodeType.ELEMENT||w.nodeType===t.nodeType.TEXT||w.nodeType===t.nodeType.CDATA_SECTION)&&(w.nodeType!==t.nodeType.TEXT&&w.nodeType!==t.nodeType.CDATA_SECTION||1===a.childNodes.length)){e.lastChild++,e=this.buildFrame(b,a.childNodes[e.lastChild-1])
break}e.lastChild++}else{if(e.terminateFrame(),!(e=e.parent))break
a=e.element,o=!0}}}},this.cleanParser=function(){this.bnodes={},this.why=null},this.buildFrame=function(e,r){var i=this.frameFactory(this,e,r)
if(e&&(i.base=e.base,i.lang=e.lang),!r||r.nodeType===t.nodeType.TEXT||r.nodeType===t.nodeType.CDATA_SECTION)return i
var o=r.attributes,a=r.getAttributeNode("xml:base")
null!=a&&(i.base=a.nodeValue,r.removeAttribute("xml:base"))
var s=r.getAttributeNode("xml:lang")
null!=s&&(i.lang=s.nodeValue,r.removeAttribute("xml:lang"))
for(var u=o.length-1;u>=0;u--)if("xml"===o[u].nodeName.substr(0,3)){if("xmlns:"===o[u].name.slice(0,6)){var l=o[u].nodeValue
this.base&&(l=n.join(l,this.base)),this.store.setPrefixForURI(o[u].name.slice(6),l)}r.removeAttributeNode(o[u])}return i}}
t.exports=i},{"./uri":72}],66:[function(e,t,r){"use strict"
function n(e,t,r,n,a){function s(e,t){return a?void a(e,t):t}var u=null
try{var l,c=o(t),f=t.statementsMatching(void 0,void 0,void 0,e)
switch(c.suggestNamespaces(t.namespaces),c.setBase(r),n){case"application/rdf+xml":return u=c.statementsToXML(f),s(null,u)
case"text/n3":case"application/n3":return u=c.statementsToN3(f),s(null,u)
case"text/turtle":case"application/x-turtle":return c.setFlags("si"),u=c.statementsToN3(f),s(null,u)
case"application/ld+json":l=c.statementsToN3(f),i.convertToJson(l,a)
break
case"application/n-quads":case"application/nquads":l=c.statementsToN3(f),u=i.convertToNQuads(l,a)
break
default:throw new Error("Serialize: Content-type "+n+" not supported for data write.")}}catch(e){if(a)return a(e)
throw e}}t.exports=n
var i=e("./convert"),o=e("./serializer")},{"./convert":46,"./serializer":67}],67:[function(e,t,r){"use strict"
var n=e("./named-node"),i=e("./uri"),o=e("./util"),a=e("./xsd"),s=function(){function e(e){return encodeURI(e)}function t(e){for(var t,r="",n=0;n<e.length;n++)t=e.charCodeAt(n),r+=t>65535?"\\U"+("00000000"+t.toString(16)).slice(-8):t>126?"\\u"+("0000"+t.toString(16)).slice(-4):e[n]
return r}var r=function(e){this.flags="",this.base=null,this.prefixes=[],this.namespaces=[],this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e}
return r.prototype.setBase=function(e){this.base=e},r.prototype.setFlags=function(e){this.flags=e||""},r.prototype.toStr=function(e){var t=e.toNT()
return"formula"==e.termType&&(this.formulas[t]=e),t},r.prototype.fromStr=function(e){if("{"==e[0]){var t=this.formulas[e]
return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)},r.prototype.suggestPrefix=function(e,t){"default"!==e.slice(0,7)&&"ns"!==e.slice(0,2)&&e&&t&&(e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))},r.prototype.suggestNamespaces=function(e){for(var t in e)this.suggestPrefix(t,e[t])},r.prototype.checkIntegrity=function(){var e,t
for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw"Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!"
for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw"Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!"},r.prototype.makeUpPrefix=function(e){function t(t){return!!r.prototype.validPrefix.test(t)&&("ns"!==t&&(!(t in this.namespaces)&&(this.prefixes[e]=t,this.namespaces[t]=e,n=t,!0)))}var n,i=e
t=t.bind(this),"#/".indexOf(i[i.length-1])>=0&&(i=i.slice(0,-1))
var o=i.lastIndexOf("/")
o>=0&&(i=i.slice(o+1))
for(var a=0;a<i.length&&this.prefixchars.indexOf(i[a]);)a++
if(i=i.slice(0,a),i.length<6&&t(i))return n
if(t(i.slice(0,3)))return n
if(t(i.slice(0,2)))return n
if(t(i.slice(0,4)))return n
if(t(i.slice(0,1)))return n
if(t(i.slice(0,5)))return n
r.prototype.validPrefix.test(i)||(i="n")
for(var a=0;;a++)if(t(i.slice(0,3)+a))return n},r.prototype.rootSubjects=function(e){for(var t={},r={},n={},i=0;i<e.length;i++){var o=e[i];[o.subject,o.predicate,o.object].map(function(e){"BlankNode"==e.termType&&(n[e.toNT()]=!0)})
var a=e[i].object
t.hasOwnProperty(a)||(t[a]=[]),t[a].push(o.subject)
var s=r[this.toStr(o.subject)]
s||(s=[]),s.push(o),r[this.toStr(o.subject)]=s}var u=[]
for(var l in r)if(r.hasOwnProperty(l)){var a=this.fromStr(l)
"BlankNode"==a.termType&&t[a]&&1==t[a].length||u.push(a)}this.incoming=t
for(var c={},i=0;i<u.length;i++)c[u[i].toNT()]=!0
return{roots:u,subjects:r,rootsHash:c,incoming:t}},r.prototype.toN3=function(e){return this.statementsToN3(e.statements)},r.prototype._notQNameChars="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~",r.prototype._notNameChars=r.prototype._notQNameChars+":",r.prototype.statementsToN3=function(n){function o(e){for(var t=this.rootSubjects(e),r=t.roots,n=[],i=0;i<r.length;i++){var o=r[i]
n.push(a(o,t))}return n}function a(e,t){return"BlankNode"!=e.termType||t.incoming[e]?[l(e,t)].concat([s(e,t)]).concat(["."]):u(e,t,!0).concat(["."])}function s(e,t){var r=[],n=null,i=t.subjects[this.toStr(e)]
if(void 0===i)throw"Cant find statements for "+e
i.sort()
for(var o=[],a=0;a<i.length;a++){var s=i[a]
s.predicate.uri==n?o.push(","):(n&&(r=r.concat([o]).concat([";"]),o=[]),r.push(h[s.predicate.uri]?h[s.predicate.uri]:l(s.predicate,t))),n=s.predicate.uri,o.push(u(s.object,t))}return r=r.concat([o])}function u(e,t,r){return"BlankNode"==e.termType&&t.subjects[this.toStr(e)]&&(r||void 0==t.rootsHash[e.toNT()])?["["].concat(s(e,t)).concat(["]"]):l(e,t)}function l(e,t){var r
switch(e.termType){case"formula":var n=["{"]
return n=n.concat(o(e.statements)),n.concat(["}"])
case"collection":var n=["("]
for(r=0;r<e.elements.length;r++)n.push([u(e.elements[r],t)])
return n.push(")"),n
default:return this.atomicTermToN3(e)}}function c(r){return"<"+(r=v.flags.indexOf("r")<0&&this.base?i.refTo(v.base,r):v.flags.indexOf("u")>=0?t(r):e(r))+">"}function f(){var e=""
this.defaultNamespace&&(e+="@prefix : <"+this.defaultNamespace+">.\n")
for(var t in this.prefixes)this.prefixes.hasOwnProperty(t)&&this.namespacesUsed[t]&&(e+="@prefix "+this.prefixes[t]+": "+c(t)+".\n")
return e+"\n"}var h={}
this.flags.indexOf("s")<0&&(h["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(h["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(h["http://www.w3.org/2000/10/swap/log#implies"]="=>")
var d=function(e){for(var t="",r=0;r<e;r++)t+=" "
return t},p=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n],o="string"==typeof i?i:e(i)
0!=n&&","!=o&&";"!=o&&(r+=" "),r+=o}return r}
o=o.bind(this),s=s.bind(this),u=u.bind(this),r.prototype.termToN3=l,l=l.bind(this)
var v=this,f=f.bind(this),g=o(n)
return f()+function e(t,r){var n="",i=1e5
r||(r=0)
for(var o=0;o<t.length;o++){var a=t[o]
if("string"!=typeof a){var s=e(a,r+1)
if(s.length<10*(80-4*r)&&s.indexOf('"""')<0){var u=p(a)
u.length<80-4*r&&(a="   "+u,s="")}s&&(i=1e4),n+=s}if("string"==typeof a){if("1"==a.length&&"\n"==n.slice(-1)){if(",.;".indexOf(a)>=0){n=n.slice(0,-1)+a+"\n",i+=1
continue}if("])}".indexOf(a)>=0){n=n.slice(0,-1)+" "+a+"\n",i+=2
continue}}if(i<4*r+4)n=n.slice(0,-1)+" "+a+"\n",i+=a.length+1
else{var u=d(4*r)+a
n+=u+"\n",i=u.length}}}return n}(g,-1)},r.prototype.atomicTermToN3=function(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT()
case"Literal":if(e.datatype)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return e.value.toString()
case"http://www.w3.org/2001/XMLSchema#boolean":return e.value?"true":"false"}var r=this.stringToN3(e.value)
return e.language?r+="@"+e.language:e.datatype.equals(a.string)||(r+="^^"+this.termToN3(e.datatype,t)),r
case"NamedNode":return this.symbolToN3(e)
default:throw"Internal: atomicTermToN3 cannot handle "+e+" of termType+"+e.termType}},r.prototype.validPrefix=new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/),r.prototype.forbidden1=new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm),r.prototype.forbidden3=new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm),r.prototype.stringToN3=function(e,t){t||(t="e")
var n,i,o="",a=0,s=0
e.length>20&&'"'!=e.slice(-1)&&t.indexOf("n")<0&&(e.indexOf("\n")>0||e.indexOf('"')>0)?(n='"""',i=r.prototype.forbidden3):(n='"',i=r.prototype.forbidden1)
for(var a=0;a<e.length;){i.lastIndex=0
if(null==i.exec(e.slice(a)))break
s=a+i.lastIndex-1,o+=e.slice(a,s)
var u=e[s]
if('"'==u&&'"""'==n&&'"""'!=e.slice(s,s+3))o+=u
else{var l='\b\f\r\t\v\n\\"'.indexOf(u)
l>=0?o+="\\"+'bfrtvn\\"'[l]:t.indexOf("e")>=0?o+="\\u"+("000"+u.charCodeAt(0).toString(16).toLowerCase()).slice(-4):o+=u}a=s+1}return n+o+e.slice(a)+n},r.prototype.symbolToN3=function(e){var t=e.uri,n=t.indexOf("#")
if(n<0&&this.flags.indexOf("/")<0&&(n=t.lastIndexOf("/")),n>=0&&this.flags.indexOf("p")<0&&(0===t.indexOf("http")||0===t.indexOf("ws")||0===t.indexOf("file"))){for(var i=!0,o=n+1;o<t.length;o++)if(r.prototype._notNameChars.indexOf(t[o])>=0){i=!1
break}if(t.slice(0,n+1)==this.base+"#")return"<#"+t.slice(n+1)+">"
if(i){var a=t.slice(n+1),s=t.slice(0,n+1)
if(this.defaultNamespace&&this.defaultNamespace==s&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(a)<0?a:":"+a
this.checkIntegrity()
var u=this.prefixes[s]
if(u||(u=this.makeUpPrefix(s)),u)return this.namespacesUsed[s]=!0,u+":"+a}}return explicitURI(t)},r.prototype.writeStore=function(e){var t=this.store,r=t.fetcher,n=r&&r.appNode,i=this.store.index[3]
for(var o in i){var a=t.fromNT(o)
n&&a.sameTerm(n)||e("\n"+this.atomicTermToN3(a)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,a))+" }.\n")}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(r){e("\n<"+r.object.value+"> log:metadata {\n")
var n=t.statementsMatching(void 0,void 0,void 0,r.subject)
e(this.statementsToN3(this.statementsToN3(n))),e("}.\n")})
var s=[]
n&&s.push(n)
var u=[]
s.map(function(e){u=u.concat(t.statementsMatching(void 0,void 0,void 0,e))}),e(this.statementsToN3(u))},r.prototype.statementsToXML=function(e){function t(e){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#")
for(var t=this.rootSubjects(e),r=t.roots,n=[],i=0;i<r.length;i++){var o=r[i]
n.push(u(o,t))}return n}function i(e){return void 0===e?"@@@undefined@@@@":e.replace(/[&<"]/g,function(e){switch(e[0]){case"&":return"&amp;"
case"<":return"&lt;"
case'"':return"&quot;"}})}function s(e){return i(this.base?o.uri.refTo(this.base,e.uri):e.uri)}function u(e,t){var r,o,c,h,p=[],v=t.subjects[this.toStr(e)]
if(void 0===v)throw"Serializing XML - Cant find statements for "+e
v.sort(function(e,t){var r=e.predicate.uri,n=t.predicate.uri
if(r.substring(0,d.length)==d||n.substring(0,d.length)==d)return r.localeCompare(n)
var i=r.substring(d.length),o=n.substring(d.length),a=parseInt(i),s=parseInt(o)
return isNaN(a)||isNaN(s)||a!=i||s!=o?r.localeCompare(n):a-s})
for(var g=0;g<v.length;g++)if(c=v[g],"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"!=c.predicate.uri||r||"symbol"!=c.object.termType){if(h=c.predicate,h.uri.substr(0,d.length)==d){var m=h.uri.substr(d.length),y=parseInt(m)
m==y.toString()&&(h=new n("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(o=f(h),c.object.termType){case"BlankNode":p=1==t.incoming[c.object].length?p.concat(["<"+o+">",u(c.object,t),"</"+o+">"]):p.concat(["<"+o+' rdf:nodeID="'+c.object.toNT().slice(2)+'"/>'])
break
case"NamedNode":p=p.concat(["<"+o+' rdf:resource="'+s(c.object)+'"/>'])
break
case"Literal":p=p.concat(["<"+o+(c.object.datatype.equals(a.string)?"":' rdf:datatype="'+i(c.object.datatype.uri)+'"')+(c.object.language?' xml:lang="'+c.object.language+'"':"")+">"+i(c.object.value)+"</"+o+">"])
break
case"collection":p=p.concat(["<"+o+' rdf:parseType="Collection">',l(c.object,t),"</"+o+">"])
break
default:throw"Can't serialize object of type "+c.object.termType+" into XML"}}else r=c.object
var b=r?f(r):"rdf:Description",w=""
return"BlankNode"==e.termType?t.incoming[e]&&1==t.incoming[e].length||(w=' rdf:nodeID="'+e.toNT().slice(2)+'"'):w=' rdf:about="'+s(e)+'"',["<"+b+w+">"].concat([p]).concat(["</"+b+">"])}function l(e,t){for(var r=[],n=0;n<e.elements.length;n++)r.push(u(e.elements[n],t))
return r}function c(e,t){var r=[],n=t.subjects[this.toStr(e)]
if(void 0==n)return r
n.sort()
for(var o=0;o<n.length;o++){var u=n[o]
switch(u.object.termType){case"BlankNode":r=t.rootsHash[u.object.toNT()]?r.concat(["<"+f(u.predicate)+' rdf:nodeID="'+u.object.toNT().slice(2)+'">',"</"+f(u.predicate)+">"]):r.concat(["<"+f(u.predicate)+' rdf:parseType="Resource">',c(u.object,t),"</"+f(u.predicate)+">"])
break
case"NamedNode":r=r.concat(["<"+f(u.predicate)+' rdf:resource="'+s(u.object)+'"/>'])
break
case"Literal":r=r.concat(["<"+f(u.predicate)+(u.object.datatype.equals(a.string)?"":' rdf:datatype="'+i(u.object.datatype.value)+'"')+(u.object.language?' xml:lang="'+u.object.language+'"':"")+">"+i(u.object.value)+"</"+f(u.predicate)+">"])
break
case"collection":r=r.concat(["<"+f(u.predicate)+' rdf:parseType="Collection">',l(u.object,t),"</"+f(u.predicate)+">"])
break
default:throw"Can't serialize object of type "+u.object.termType+" into XML"}}return r}function f(e){var t=e.uri,n=t.indexOf("#")
if(n<0&&this.flags.indexOf("/")<0&&(n=t.lastIndexOf("/")),n<0)throw"Cannot make qname out of <"+t+">"
for(var i=n+1;i<t.length;i++)if(r.prototype._notNameChars.indexOf(t[i])>=0)throw'Invalid character "'+t[i]+'" cannot be in XML qname for URI: '+t
var o=t.slice(n+1),a=t.slice(0,n+1)
if(this.defaultNamespace&&this.defaultNamespace==a&&this.flags.indexOf("d")<0)return o
var s=this.prefixes[a]
return s||(s=this.makeUpPrefix(a)),h[a]=!0,s+":"+o}var h=[]
h["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0
var d="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",p=function(e){for(var t="",r=0;r<e;r++)t+=" "
return t},v=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n]
r+="string"==typeof i?i:e(i)}return r}
t=t.bind(this),s=s.bind(this),u=u.bind(this),c=c.bind(this),f=f.bind(this)
var g=t(e),m="<rdf:RDF"
this.defaultNamespace&&(m+=' xmlns="'+i(this.defaultNamespace)+'"')
for(var y in h)h.hasOwnProperty(y)&&(m+="\n xmlns:"+this.prefixes[y]+'="'+i(y)+'"')
m+=">"
var b=[m,g,"</rdf:RDF>"]
return function e(t,r){var n="",i=1e5
r||(r=0)
for(var o=0;o<t.length;o++){var a=t[o]
if("string"!=typeof a){var s=e(a,r+1)
if(s.length<10*(80-4*r)&&s.indexOf('"""')<0){var u=v(a)
u.length<80-4*r&&(a="   "+u,s="")}s&&(i=1e4),n+=s}if("string"==typeof a)if(i<4*r+4)n=n.slice(0,-1)+" "+a+"\n",i+=a.length+1
else{var u=p(4*r)+a
n+=u+"\n",i=u.length}}return n}(b,-1)},function(e){return new r(e)}}()
t.exports=s},{"./named-node":57,"./uri":72,"./util":73,"./xsd":75}],68:[function(e,t,r){"use strict"
function n(e,t,r){function n(e){if(I[e])return I[e]
var t=r.variable(e)
return I[e]=t,t}function a(e){return"string"==typeof e&&e.match(/[^ \n\t]/)}function s(e){return"string"==typeof e&&e.match(/^[\?\$]/)}function u(e){return"string"==typeof e?e.replace(/^&lt;/,"<").replace(/&gt;$/,">"):e}function l(e){return"string"==typeof e&&e.match(/^<[^>]*>$/)}function c(e){return"string"==typeof e&&(e.match(/^_:/)||e.match(/^$/))}function f(e){return"string"==typeof e&&e.match(/:$/)}function h(e){return"string"==typeof e&&e.match(/^:|^[^_][^:]*:/)}function d(e){return e.split(":")[0]}function p(e){return e.split(":")[1]}function v(e){return l(e)?e.slice(1,e.length-1):e}function g(e){var t=-1===e.indexOf("'")?null:e.indexOf("'"),n=-1===e.indexOf('"')?null:e.indexOf('"')
if(!t&&!n){var o=new Array(1)
return o[0]=e,o}var a,s,u=new Array(2)
if(!t||n&&n<t)a='"',s=n
else{if(n&&!(t&&t<n))return i.error("SQARQL QUERY OOPS!"),u
a="'",s=t}u[0]=e.slice(0,s)
var l=e.slice(s+1).indexOf(a)
if(-1===l)return i.error("SPARQL parsing error: no matching parentheses in literal "+e),e
var c
return e.slice(l+s+2).match(/^\^\^/)?(c=e.slice(l+s+2).indexOf(" "),u[1]=r.literal(e.slice(s+1,s+1+l),"",r.sym(v(e.slice(s+4+l,s+2+l+c)))),u=u.concat(g(e.slice(l+s+3+c)))):e.slice(l+s+2).match(/^@/)?(c=e.slice(l+s+2).indexOf(" "),u[1]=r.literal(e.slice(s+1,s+1+l),e.slice(s+3+l,s+2+l+c),null),u=u.concat(g(e.slice(l+s+2+c)))):(u[1]=r.literal(e.slice(s+1,s+1+l),"",null),i.info("Literal found: "+u[1]),u=u.concat(g(e.slice(l+s+2)))),u}function m(e){e=e.replace(/\(/g," ( ").replace(/\)/g," ) ").replace(/</g," <").replace(/>/g,"> ").replace(/{/g," { ").replace(/}/g," } ").replace(/[\t\n\r]/g," ").replace(/; /g," ; ").replace(/\. /g," . ").replace(/, /g," , "),i.info("New str into spaceDelimit: \n"+e)
var t=[],r=e.split(" ")
for(var n in r)a(r[n])&&(t=t.concat(r[n]))
return t}function y(e){for(var t=e,r=0;r<t.length;r++)if("a"===t[r]&&(t[r]="<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"),"is"===t[r]&&"of"===t[r+2]){t.splice(r,1),t.splice(r+1,1)
var n=t[r-1]
t[r-1]=t[r+1],t[r+1]=n}return t}function b(e){for(var t=[],o=0;o<e.length;o++)"string"==typeof e[o]?(e[o]=u(e[o]),s(e[o])?t[o]=n(e[o].slice(1)):c(e[o])?(i.info(e[o]+" was identified as a bnode."),t[o]=r.bnode()):l(e[o])?(i.info(e[o]+" was identified as a symbol."),t[o]=r.sym(v(e[o]))):h(e[o])?(i.info(e[o]+" was identified as a prefixed symbol"),C[d(e[o])]?t[o]=r.sym(e[o]=C[d(e[o])]+p(e[o])):(i.error("SPARQL error: "+e[o]+" with prefix "+d(e[o])+" does not have a correct prefix entry."),t[o]=e[o])):t[o]=e[o]):t[o]=e[o]
return t}function w(e,t){for(var r=0;r<t.length;r++)if("string"==typeof t[r]&&t[r].toLowerCase()===e.toLowerCase())return r
return null}function x(e,t){for(var r=[],n=0;n<t.length;n++)"string"==typeof t[n]&&t[n].toLowerCase()===e.toLowerCase()&&r.push(n)
return r}function _(e,t,r){i.info("Looking for a close bracket of type "+r+" in "+e)
for(var n=0,o=0;o<e.length;o++)if(e[o]===t&&n++,e[o]===r&&n--,n<0)return o
return i.error("Statement had no close parenthesis in SPARQL query"),0}function T(e){return this.describe=function(t){return t+" = "+e.toNT()},this.test=function(t){return e.sameTerm(t)},this}function k(e){this.describe=function(t){return"REGEXP( '"+e+"' , "+t+" )"},this.test=function(t){var r=e,n=new RegExp(r)
return!!t.value&&n.test(t.value)}}function N(e,t){3!==e.length||"Variable"!==e[0].termType||"NamedNode"!==e[2].termType&&"Literal"!==e[2].termType?6===e.length&&"string"==typeof e[0]&&"regexp"===e[0].toLowerCase()&&"("===e[1]&&")"===e[5]&&","===e[3]&&"Variable"===e[4].termType&&"Literal"===e[2].termType&&(i.debug("Constraint added: "+e),t.constraints[e[4]]=new k(e[2].value)):"="===e[1]?(i.debug("Constraint added: "+e),t.constraints[e[0]]=new T(e[2])):">"===e[1]?(i.debug("Constraint added: "+e),t.constraints[e[0]]=new T(e[2])):"<"===e[1]?(i.debug("Constraint added: "+e),t.constraints[e[0]]=new T(e[2])):i.warn("I don't know how to handle the constraint: "+e)}function E(e,t){i.debug("Optional query: "+e+" not yet implemented.")
var n=r.formula()
j(e,n),t.optional.push(n)}function j(e,t){var r,n=b(e)
i.debug("WHERE: "+n)
for(var o;w("OPTIONAL",n);)o=w("OPTIONAL",n),i.debug("OPT: "+o+" "+n[o]+" in "+n),"{"!==n[o+1]&&i.warn("Bad optional opening bracket in word "+o),r=_(n.slice(o+2),"{","}"),-1===r?i.error("No matching bracket in word "+o):(E(n.slice(o+2,o+2+r),t),o=w("OPTIONAL",n),r=_(n.slice(o+2),"{","}"),n.splice(o,r+3))
for(i.debug("WHERE after optionals: "+n);w("FILTER",n);){var a=w("FILTER",n)
"("!==n[a+1]&&i.warn("Bad filter opening bracket in word "+a),r=_(n.slice(a+2),"(",")"),-1===r?i.error("No matching bracket in word "+a):(N(n.slice(a+2,a+2+r),t),a=w("FILTER",n),r=_(n.slice(a+2),"(",")"),n.splice(a,r+3))}i.debug("WHERE after filters and optionals: "+n),S(n,t)}function S(e,t){var r=new Array(1)
r[0]=-1
for(var n=r.concat(x(".",e)),o=[],a=0;a<n.length-1;a++)o[a]=e.slice(n[a]+1,n[a+1])
for(a in o){i.info("s+p+o "+a+" = "+o[a])
var s=o[a][0]
o[a].splice(0,1)
var u=r.concat(x(";",o[a]))
u.push(o[a].length)
for(var l=[],c=0;c<u.length-1;c++)l[c]=o[a].slice(u[c]+1,u[c+1])
for(a in l){i.info("p+o "+a+" = "+o[a])
var f=l[a][0]
l[a].splice(0,1)
var h=r.concat(x(",",l[a]))
h.push(l[a].length)
var d=[]
for(c=0;c<h.length-1;c++)d[c]=l[a].slice(h[c]+1,h[c+1])
for(a in d){var p=d[a][0]
i.info("Subj="+s+" Pred="+f+" Obj="+p),t.add(s,f,p)}}}}var I=[]
i.info("SPARQL input: \n"+e)
var R=new o,O=function(e){var t=g(e),r=[]
for(var n in t)r="string"==typeof t[n]?r.concat(m(t[n])):r.concat(t[n])
return r=y(r),i.info("SPARQL Tokens: "+r),r}(e),C=function(e){var t=x("PREFIX",e),r=[]
for(var n in t){var o=e[t[n]+1],a=e[t[n]+2]
if(f(o))if(l(a)){i.info("Prefix found: "+o+" -> "+a)
var s=d(o),u=v(a)
r[s]=u}else i.error("Invalid SPARQL symbol: "+a)
else i.error("Invalid SPARQL prefix: "+o)}return r}(O)
C.rdf||(C.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"),C.rdfs||(C.rdfs="http://www.w3.org/2000/01/rdf-schema#")
var L=w("SELECT",O),D=w("WHERE",O)
if(L<0||D<0||L>D)return i.error("Invalid or nonexistent SELECT and WHERE tags in SPARQL query"),!1
if(function(e,t){i.info("SPARQL vars: "+e)
for(var r in e)if(s(e[r])){i.info("Added "+e[r]+" to query variables from SPARQL")
var o=n(e[r].slice(1))
t.vars.push(o),o.label=e[r].slice(1)}else i.warn("Incorrect SPARQL variable in SELECT: "+e[r])}(O.slice(L+1,D),R),j(O.slice(D+2,O.length-1),R.pat),t)return R
for(var A in R.pat.statements){var M=R.pat.statements[A]
"NamedNode"===M.subject.termType&&r.fetcher&&r.fetcher.lookUpThing(M.subject,"sparql:"+M.subject),"NamedNode"===M.object.termType&&r.fetcher&&r.fetcher.lookUpThing(M.object,"sparql:"+M.object)}return R}var i=e("./log"),o=e("./query").Query
t.exports=n},{"./log":55,"./query":63}],69:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./node"),a=function(){function e(t,r,i,a){n(this,e),this.subject=o.fromValue(t),this.predicate=o.fromValue(r),this.object=o.fromValue(i),this.why=a}return i(e,[{key:"equals",value:function(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}},{key:"substitute",value:function(t){return new e(this.subject.substitute(t),this.predicate.substitute(t),this.object.substitute(t),this.why)}},{key:"toCanonical",value:function(){var e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()]
return this.graph&&"DefaultGraph"!==this.graph.termType&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}},{key:"graph",get:function(){return this.why},set:function(e){this.why=e}}]),e}()
t.exports=a},{"./node":59}],70:[function(e,t,r){"use strict"
var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=e("./uri").docpart,o=e("./fetcher"),a=e("./data-factory").graph,s=e("./indexed-formula"),u=e("./data-factory").namedNode,l=e("./namespace"),c=e("./serializer"),f=e("./uri").join,h=e("./util"),d=function(){var e=function(e){if(this.store=e,e.updater)throw new Error("You can't have two UpdateManagers for the same store")
e.fetcher||new o(e),e.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=l("http://www.w3.org/2007/ont/link#"),this.ns.http=l("http://www.w3.org/2007/ont/http#"),this.ns.httph=l("http://www.w3.org/2007/ont/httph#"),this.ns.ldp=l("http://www.w3.org/ns/ldp#"),this.ns.rdf=l("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.rdfs=l("http://www.w3.org/2000/01/rdf-schema#"),this.ns.rdf=l("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.owl=l("http://www.w3.org/2002/07/owl#"),this.patchControl=[]}
return e.prototype.patchControlFor=function(e){return this.patchControl[e.uri]||(this.patchControl[e.uri]=[]),this.patchControl[e.uri]},e.prototype.editable=function(e,t){if(!e)return!1
if(t||(t=this.store),"file:///"===e.slice(0,8)){if(t.holds(t.sym(e),u("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),u("http://www.w3.org/2007/ont/link#MachineEditableDocument")))return"LOCALFILE"
var r=t.statementsMatching(t.sym(e),void 0,void 0)
return console.log("sparql.editable: Not MachineEditableDocument file "+e+"\n"),console.log(r.map(function(e){return e.toNT()}).join("\n")),!1}var n,o=!1,a=t.each(void 0,this.ns.link("requestedURI"),i(e))
if(t.holds(u(e),this.ns.rdf("type"),this.ns.ldp("Resource")))return"SPARQL"
for(var s,l,c=0;c<a.length;c++)if(void 0!==(n=a[c])){var f=t.any(n,this.ns.link("response"))
if(void 0!==n){var h=t.each(f,this.ns.httph("accept-patch"))
if(h.length)for(s=0;s<h.length;s++)if(l=h[s].value.trim(),l.indexOf("application/sparql-update")>=0)return"SPARQL"
var d=t.each(f,this.ns.httph("ms-author-via"))
if(d.length)for(s=0;s<d.length;s++){if(l=d[s].value.trim(),l.indexOf("SPARQL")>=0)return"SPARQL"
if(l.indexOf("DAV")>=0)return"DAV"}var p=t.each(f,this.ns.http("status"))
if(p.length)for(s=0;s<p.length;s++)200!==p[s]&&404!==p[s]||(o=!0)}else console.log("sparql.editable: No response for "+e+"\n")}if(0===a.length)console.log("sparql.editable: No request for "+e+"\n")
else if(o)return!1
console.log("sparql.editable: inconclusive for "+e+"\n")},e.prototype.anonymize=function(e){return"_:"===e.toNT().substr(0,2)&&this._mentioned(e)?"?"+e.toNT().substr(2):e.toNT()},e.prototype.anonymizeNT=function(e){return this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+" ."},e.prototype._statement_bnodes=function(e){return[e.subject,e.predicate,e.object].filter(function(e){return e.isBlank})},e.prototype._statement_array_bnodes=function(e){for(var t=[],r=0;r<e.length;r++)t=t.concat(this._statement_bnodes(e[r]))
t.sort()
for(var n=[],i=0;i<t.length;i++)0!==i&&t[i].sameTerm(t[i-1])||n.push(t[i])
return n},e.prototype._cache_ifps=function(){this.ifps={}
for(var e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("InverseFunctionalProperty")),t=0;t<e.length;t++)this.ifps[e[t].uri]=!0
for(this.fps={},e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("FunctionalProperty")),t=0;t<e.length;t++)this.fps[e[t].uri]=!0},e.prototype._bnode_context2=function(e,t,r){for(var n,i,o=this.store.statementsMatching(void 0,void 0,e,t),a=0;a<o.length;a++)if(this.fps[o[a].predicate.uri]){if(n=o[a].subject,!n.isBlank)return[o[a]]
if(r&&(i=this._bnode_context2(n,t,r-1)))return i.concat([o[a]])}for(o=this.store.statementsMatching(e,void 0,void 0,t),a=0;a<o.length;a++)if(this.ifps[o[a].predicate.uri]){if(n=o[a].object,!n.isBlank)return[o[a]]
if(r&&(i=this._bnode_context2(n,t,r-1)))return i.concat([o[a]])}return null},e.prototype._bnode_context_1=function(e,t){for(var r=0;r<3;r++){var n=this._bnode_context2(e,t,r)
if(null!==n)return n}throw new Error("Unable to uniquely identify bnode: "+e.toNT())},e.prototype._mentioned=function(e){return 0!==this.store.statementsMatching(e).length||0!==this.store.statementsMatching(void 0,e).length||0!==this.store.statementsMatching(void 0,void 0,e).length},e.prototype._bnode_context=function(e,t){var r=[]
if(e.length){this._cache_ifps()
for(var n=0;n<e.length;n++){var i=e[n]
this._mentioned(i)&&(r=r.concat(this._bnode_context_1(i,t)))}}return r},e.prototype._statement_context=function(e){var t=this._statement_bnodes(e)
return this._bnode_context(t,e.why)},e.prototype._context_where=function(e){var t=this
return e&&0!==e.length?"WHERE { "+e.map(function(e){return t.anonymizeNT(e)}).join("\n")+" }\n":""},e.prototype._fire=function(e,t,r){if(!e)throw new Error("No URI given for remote editing operation: "+t)
console.log("sparql: sending update to <"+e+">")
var n=h.XMLHTTPFactory()
n.options={},n.onreadystatechange=function(){if(4===n.readyState){var i=!n.status||n.status>=200&&n.status<300
i?console.log("sparql: update Ok for <"+e+">"):console.log("sparql: update failed for <"+e+"> status="+n.status+", "+n.statusText+", body length="+n.responseText.length+"\n   for query: "+t),r(e,i,n.responseText,n)}},n.open("PATCH",e,!0),n.setRequestHeader("Content-type","application/sparql-update"),n.send(t)},e.prototype.update_statement=function(e){if(!e||e.why){var t=this,r=this._statement_context(e)
return{statement:e?[e.subject,e.predicate,e.object,e.why]:void 0,statementNT:e?this.anonymizeNT(e):void 0,where:t._context_where(r),set_object:function(e,r){var n=this.where
n+="DELETE DATA { "+this.statementNT+" } ;\n",n+="INSERT DATA { "+this.anonymize(this.statement[0])+" "+this.anonymize(this.statement[1])+" "+this.anonymize(e)+"  . }\n",t._fire(this.statement[3].uri,n,r)}}}},e.prototype.insert_statement=function(e,t){var r=e instanceof Array?e[0]:e,n=this._context_where(this._statement_context(r))
if(e instanceof Array){for(var i="",o=0;o<e.length;o++)i+=e[o]+"\n"
n+="INSERT DATA { "+i+" }\n"}else n+="INSERT DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+"  . }\n"
this._fire(r.why.uri,n,t)},e.prototype.delete_statement=function(e,t){var r=e instanceof Array?e[0]:e,n=this._context_where(this._statement_context(r))
if(e instanceof Array){for(var i="",o=0;o<e.length;o++)i+=e[o]+"\n"
n+="DELETE DATA { "+i+" }\n"}else n+="DELETE DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+"  . }\n"
this._fire(r.why.uri,n,t)},e.prototype.requestDownstreamAction=function(e,t){var r=this.patchControlFor(e)
if(r.pendingUpstream){if(r.downstreamAction){if(r.downstreamAction===t)return
throw new Error("Can't wait for > 1 differnt downstream actions")}r.downstreamAction=t}else t(e)},e.prototype.clearUpstreamCount=function(e){this.patchControlFor(e).upstreamCount=0},e.prototype.getUpdatesVia=function(e){var t=this.store.fetcher.getHeader(e,"updates-via")
return t&&t.length?t[0].trim():null},e.prototype.addDownstreamChangeListener=function(e,t){var r=this.patchControlFor(e)
r.downstreamChangeListeners||(r.downstreamChangeListeners=[]),r.downstreamChangeListeners.push(t)
var n=this
this.setRefreshHandler(e,function(e){n.reloadAndSync(e)})},e.prototype.reloadAndSync=function(e){var t=this.patchControlFor(e),r=this
if(t.reloading)return void console.log("   Already reloading - stop")
t.reloading=!0
var n=1e3
!function i(){console.log("try reload - timeout = "+n),r.reload(r.store,e,function(r,o,a){if(t.reloading=!1,r){if(t.downstreamChangeListeners)for(var s=0;s<t.downstreamChangeListeners.length;s++)console.log("        Calling downstream listener "+s),t.downstreamChangeListeners[s]()}else 0===a.status?(console.log("Network error refreshing the data. Retrying in "+n/1e3),t.reloading=!0,n*=2,setTimeout(i,n)):console.log("Error "+a.status+"refreshing the data:"+o+". Stopped"+e)})}()},e.prototype.setRefreshHandler=function(e,t){var r=this.getUpdatesVia(e),n=t,i=this,o=this,a=1500,s=0
if(!r)return console.log("Server doies not support live updates thoughUpdates-Via :-("),!1
r=f(r,e.uri),r=r.replace(/^http:/,"ws:").replace(/^https:/,"wss:"),console.log("Web socket URI "+r)
return function t(){var u
if("undefined"!=typeof WebSocket)u=new WebSocket(r)
else if("undefined"!=typeof Services)u=Services.wm.getMostRecentWindow("navigator:browser").WebSocket(r)
else{if("undefined"==typeof window||!window.WebSocket)return void console.log("Live update disabled, as WebSocket not supported by platform :-(")
u=window.WebSocket(r)}u.onopen=function(){console.log("    websocket open"),a=1500,this.send("sub "+e.uri),s&&(console.log("Web socket has been down, better check for any news."),o.requestDownstreamAction(e,n))}
var l=i.patchControlFor(e)
l.upstreamCount=0,u.onclose=function(e){console.log("*** Websocket closed with code "+e.code+", reason '"+e.reason+"' clean = "+e.clean),a*=2,s+=1,console.log("Retrying in "+a+"ms"),setTimeout(function(){console.log("Trying websocket again"),t()},a)},u.onmessage=function(t){if(t.data&&"pub"===t.data.slice(0,3)){if("upstreamCount"in l&&(l.upstreamCount-=1,l.upstreamCount>=0))return void console.log("just an echo: "+l.upstreamCount)
console.log("Assume a real downstream change: "+l.upstreamCount+" -> 0"),l.upstreamCount=0,i.requestDownstreamAction(e,n)}}}(),!0},e.prototype.update=function(e,t,r){try{var i=this.store,o=e?e instanceof s?e.statements:e instanceof Array?e:[e]:[],a=t?t instanceof s?t.statements:t instanceof Array?t:[t]:[]
if(!(o instanceof Array))throw new Error("Type Error "+(void 0===o?"undefined":n(o))+": "+o)
if(!(a instanceof Array))throw new Error("Type Error "+(void 0===a?"undefined":n(a))+": "+a)
if(0===o.length&&0===a.length)return r(null,!0)
var u=o.length?o[0].why:a[0].why,l=this.patchControlFor(u),d=Date.now(),p=["subject","predicate","object","why"],v={delete:o,insert:a};["insert","delete"].map(function(e){v[e].map(function(e){if(!u.sameTerm(e.why))throw new Error("update: destination "+u+" inconsistent with delete quad "+e.why)
p.map(function(t){if(void 0===e[t])throw new Error("update: undefined "+t+" of statement.")})})})
var g=this.editable(u.uri,i)
if(!g)throw new Error("Can't make changes in uneditable "+u)
var m,y,b,w
if(g.indexOf("SPARQL")>=0){var x=[]
o.length&&(x=this._statement_array_bnodes(o)),a.length&&(x=x.concat(this._statement_array_bnodes(a)))
var _=this._bnode_context(x,u),T=this._context_where(_),k=""
if(T.length){if(o.length){for(k+="DELETE { ",m=0;m<o.length;m++)k+=this.anonymizeNT(o[m])+"\n"
k+=" }\n"}if(a.length){for(k+="INSERT { ",m=0;m<a.length;m++)k+=this.anonymizeNT(a[m])+"\n"
k+=" }\n"}k+=T}else{if(o.length){for(k+="DELETE DATA { ",m=0;m<o.length;m++)k+=this.anonymizeNT(o[m])+"\n"
k+=" } \n"}if(a.length){for(o.length&&(k+=" ; "),k+="INSERT DATA { ",m=0;m<a.length;m++)k+=this.anonymizeNT(a[m])+"\n"
k+=" }\n"}}l.pendingUpstream=l.pendingUpstream?l.pendingUpstream+1:1,"upstreamCount"in l&&(l.upstreamCount+=1,console.log("upstream count up to : "+l.upstreamCount)),this._fire(u.uri,k,function(e,t,n,s){if(s.elapsedTime_ms=Date.now()-d,console.log("    sparql: Return "+(t?"success":"FAILURE "+s.status)+" elapsed "+s.elapsedTime_ms+"ms"),t){try{i.remove(o)}catch(e){t=!1,n="Remote Ok BUT error deleting "+o.length+" from store!!! "+e}for(var c=0;c<a.length;c++)i.add(a[c].subject,a[c].predicate,a[c].object,u)}if(r(e,t,n,s),l.pendingUpstream-=1,0===l.pendingUpstream&&l.downstreamAction){var f=l.downstreamAction
delete l.downstreamAction,console.log("delayed downstream action:"),f(u)}})}else if(g.indexOf("DAV")>=0){var N=i.any(u,this.ns.link("request"))
if(!N)throw new Error("No record of our HTTP GET request for document: "+u)
var E=i.any(N,this.ns.link("response"))
if(!E)return null
var j=i.the(E,this.ns.httph("content-type")).value
for(y=i.statementsMatching(void 0,void 0,void 0,u).slice(),m=0;m<o.length;m++)h.RDFArrayRemove(y,o[m])
for(m=0;m<a.length;m++)y.push(a[m])
switch(w=c(i),w.suggestNamespaces(i.namespaces),w.setBase(u.uri),j){case"application/rdf+xml":b=w.statementsToXML(y)
break
case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":b=w.statementsToN3(y)
break
default:throw new Error("Content-type "+j+" not supported for data write")}var S,I=i.the(E,this.ns.httph("content-location"))
I&&(S=f(I.value,S))
var R=h.XMLHTTPFactory()
R.options={},R.onreadystatechange=function(){if(4===R.readyState){var e=!R.status||R.status>=200&&R.status<300
if(e){for(var t=0;t<o.length;t++)i.remove(o[t])
for(t=0;t<a.length;t++)i.add(a[t].subject,a[t].predicate,a[t].object,u)}r(u.uri,e,R.responseText)}},R.open("PUT",S,!0),R.setRequestHeader("Content-type",j),R.send(b)}else{if(!(g.indexOf("LOCALFILE")>=0))throw new Error("Unhandled edit method: '"+g+"' for "+u)
try{for(console.log("Writing back to local file\n"),y=i.statementsMatching(void 0,void 0,void 0,u).slice(),m=0;m<o.length;m++)h.RDFArrayRemove(y,o[m])
for(m=0;m<a.length;m++)y.push(a[m])
w=c(i),w.suggestNamespaces(i.namespaces),w.setBase(u.uri)
var O=u.uri.lastIndexOf(".")
if(O<1)throw new Error("Rewriting file: No filename extension: "+u.uri)
var C=u.uri.slice(O+1)
switch(C){case"rdf":case"owl":case"xml":b=w.statementsToXML(y)
break
case"n3":case"nt":case"ttl":b=w.statementsToN3(y)
break
default:throw new Error("File extension ."+C+" not supported for data write")}console.log("Writing back: <<<"+b+">>>")
var L=u.uri.slice(7),D=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile)
if(D.initWithPath(L),!D.exists())throw new Error("Rewriting file <"+u.uri+"> but it does not exist!")
var A=Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream)
for(A.init(D,42,parseInt("0666",8),0),A.write(b,b.length),A.close(),m=0;m<o.length;m++)i.remove(o[m])
for(m=0;m<a.length;m++)i.add(a[m].subject,a[m].predicate,a[m].object,u)
r(u.uri,!0,"")}catch(e){r(u.uri,!1,"Exception trying to write back file <"+u.uri+">\n")}}}catch(e){r(void 0,!1,"Exception in update: "+e)}},e.prototype.put=function(e,t,r,i){var o,a=this.store
if((void 0===t?"undefined":n(t))===n(""))o=t
else{var s=c(a)
switch(s.suggestNamespaces(a.namespaces),s.setBase(e.uri),r){case"application/rdf+xml":o=s.statementsToXML(t)
break
case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":o=s.statementsToN3(t)
break
default:throw new Error("Content-type "+r+" not supported for data PUT")}}var u=h.XMLHTTPFactory()
u.options={},u.onreadystatechange=function(){if(4===u.readyState){var r=!u.status||u.status>=200&&u.status<300
r&&"string"!=typeof t&&t.map(function(e){a.addStatement(e)}),r&&(delete a.fetcher.nonexistant[e.uri],delete a.fetcher.requested[e.uri]),i(e.uri,r,u.responseText,u)}},u.open("PUT",e.uri,!0),u.setRequestHeader("Content-type",r),u.send(o)},e.prototype.reload=function(e,t,r){var n=Date.now()
e.fetcher.nowOrWhenFetched(t.uri,{force:!0,noMeta:!0,clearPreviousData:!0},function(e,i,o){if(e)if(o.onErrorWasCalled||200!==o.status)console.log("    Non-HTTP error reloading data! onErrorWasCalled="+o.onErrorWasCalled+" status: "+o.status),r(!1,"Non-HTTP error reloading data: "+i,o)
else{var a=Date.now()-n
t.reloadTime_total||(t.reloadTime_total=0),t.reloadTime_count||(t.reloadTime_count=0),t.reloadTime_total+=a,t.reloadTime_count+=1,console.log("    Fetch took "+a+"ms, av. of "+t.reloadTime_count+" = "+t.reloadTime_total/t.reloadTime_count+"ms."),r(!0)}else console.log("    ERROR reloading data: "+i),r(!1,"Error reloading data: "+i,o)})},e.prototype.oldReload=function(e,t,r){var n=a(),i=fetcher(n),o=Date.now()
i.nowOrWhenFetched(t.uri,{force:!0,noMeta:!0,clearPreviousData:!0},function(i,a,s){if(i)if(s.onErrorWasCalled||200!==s.status)console.log("    Non-HTTP error reloading data! onErrorWasCalled="+s.onErrorWasCalled+" status: "+s.status),r(!1,"Non-HTTP error reloading data: "+a,s)
else{var u=e.statementsMatching(void 0,void 0,void 0,t).slice(),l=n.statementsMatching(void 0,void 0,void 0,t).slice()
console.log("    replacing "+u.length+" with "+l.length+" out of total statements "+e.statements.length),e.remove(u),e.add(l)
var c=Date.now()-o
0===l.length&&console.log("????????????????? 0000000"),t.reloadTime_total||(t.reloadTime_total=0),t.reloadTime_count||(t.reloadTime_count=0),t.reloadTime_total+=c,t.reloadTime_count+=1,console.log("    fetch took "+c+"ms, av. of "+t.reloadTime_count+" = "+t.reloadTime_total/t.reloadTime_count+"ms."),r(!0)}else console.log("    ERROR reloading data: "+a),r(!1,"Error reloading data: "+a,s)})},e}()
t.exports=d},{"./data-factory":47,"./fetcher":50,"./indexed-formula":52,"./namespace":58,"./serializer":67,"./uri":72,"./util":73}],71:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./data-factory").namedNode,a=function(){function e(t,r){n(this,e),this.parent=t,this.via=r,this.connected=!1,this.pending={},this.subscribed={},this.socket={}
try{this.socket=new WebSocket(r),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onmessage=this.onMessage,this.socket.onerror=this.onError}catch(e){this.onError(e)}}return i(e,[{key:"_decode",value:function(e){var t,r,n,i,o,a,s
i={},o=function(){var r,n,i,o
for(i=e.split("&"),o=[],r=0,n=i.length;r<n;r++)t=i[r],o.push(t.split("="))
return o}()
for(r in o)t=o[r],a=[decodeURIComponent(t[0]),decodeURIComponent(t[1])],n=a[0],s=a[1],null==i[n]&&(i[n]=[]),i[n].push(s)
return i}},{key:"_send",value:function(e,t,r){var n,i
return i=[e,t,r].join(" "),"function"==typeof(n=this.socket).send?n.send(i):void 0}},{key:"_subscribe",value:function(e){return this._send("sub",e,""),this.subscribed[e]=!0,this.subscribed[e]}},{key:"onClose",value:function(e){var t
this.connected=!1
for(t in this.subscribed)this.pending[t]=!0
return this.subscribed={},this.subscribed}},{key:"onError",value:function(e){throw new Error("onError"+e)}},{key:"onMessage",value:function(e){var t,r
return r=e.data.split(" "),"ping"===r[0]?"function"==typeof(t=this.socket).send?t.send("pong "+r.slice(1).join(" ")):void 0:"pub"===r[0]?this.parent.onUpdate(r[1],this._decode(r[2])):void 0}},{key:"onOpen",value:function(e){var t,r
this.connected=!0,t=[]
for(r in this.pending)delete this.pending[r],t.push(this._subscribe(r))
return t}},{key:"subscribe",value:function(e){return this.connected?this._subscribe(e):(this.pending[e]=!0,this.pending[e])}}]),e}(),s=function(){function e(t){n(this,e),this.fetcher=t,this.graph={},this.via={},this.fetcher.addCallback("headers",this.onHeaders)}return i(e,[{key:"onHeaders",value:function(e){var t,r,n
return null==e.headers||("undefined"==typeof WebSocket||null===WebSocket||(t=e.headers.etag,n=e.headers["updates-via"],r=e.uri,t&&n&&(this.graph[r]={etag:t,via:n},this.register(n,r)),!0))}},{key:"onUpdate",value:function(e,t){return this.fetcher.refresh(o(e))}},{key:"register",value:function(e,t){return null==this.via[e]&&(this.via[e]=new a(this,e)),this.via[e].subscribe(t)}}]),e}()
t.exports.UpdatesSocket=a,t.exports.UpdatesVia=s},{"./data-factory":47}],72:[function(e,t,r){"use strict"
function n(e){var t
return t=e.indexOf("#"),t<0?e:e.slice(0,t)}function i(e){return c(n(e.uri))}function o(e){var t=/[^\/]*\/\/([^\/]*)\//.exec(e)
return t?t[1]:""}function a(e,t){var r,n,i,o,a,s=t.indexOf("#")
if(s>0&&(t=t.slice(0,s)),0===e.length)return t
if(0===e.indexOf("#"))return t+e
if(e.indexOf(":")>=0)return e
if(r=t.indexOf(":"),0===t.length)return e
if(r<0)return l("Invalid base: "+t+" in join with given: "+e),e
if(n=t.slice(0,+r+1||9e9),0===e.indexOf("//"))return n+e
if(t.indexOf("//",r)===r+1){if((i=t.indexOf("/",r+3))<0)return t.length-r-3>0?t+"/"+e:n+e}else if((i=t.indexOf("/",r+1))<0)return t.length-r-1>0?t+"/"+e:n+e
if(0===e.indexOf("/"))return t.slice(0,i)+e
if(a=t.slice(i),(o=a.lastIndexOf("/"))<0)return n+e
for(o>=0&&o<a.length-1&&(a=a.slice(0,+o+1||9e9)),a+=e;a.match(/[^\/]*\/\.\.\//);)a=a.replace(/[^\/]*\/\.\.\//,"")
return a=a.replace(/\.\//g,""),a=a.replace(/\/\.$/,"/"),t.slice(0,i)+a}function s(e){var t
return t=e.indexOf(":"),t<0?null:e.slice(0,t)}function u(e,t){var r,n,i,o,a,s,u,l,c,f,h,d,p=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$")
if(!e)return t
if(e===t)return""
for(r=u=0,o=t.length;u<o&&t[r]===e[r];r=++u);if(e.slice(0,r).match(p)&&(n=t.indexOf("//"),n<0&&(n=-2),i=t.indexOf("/",n+2),"/"!==t[i+1]&&"/"!==e[i+1]&&t.slice(0,i)===e.slice(0,i)))return t.slice(i)
if("#"===t[r]&&e.length===r)return t.slice(r)
for(;r>0&&"/"!==t[r-1];)r--
if(r<3)return t
if(e.indexOf("//",r-2)>0||t.indexOf("//",r-2)>0)return t
if(e.indexOf(":",r)>0)return t
for(s=0,f=e.slice(r),l=0,a=f.length;l<a;l++)"/"===f[l]&&s++
if(0===s&&r<t.length&&"#"===t[r])return"./"+t.slice(r)
if(0===s&&r===t.length)return"./"
if(d="",s>0)for(c=1,h=s;h>=1?c<=h:c>=h;h>=1?++c:--c)d+="../"
return d+t.slice(r)}var l=l||console.log
t.exports.docpart=n,t.exports.document=i,t.exports.hostpart=o,t.exports.join=a,t.exports.protocol=s,t.exports.refTo=u
var c=e("./data-factory").namedNode},{"./data-factory":47}],73:[function(e,t,r){"use strict"
function n(e,t,r){var n=null
if(void 0!==e.fetcher&&(n=e.fetcher,"NamedNode"===t.termType)){var i,o=b(t.uri)
if(t.uri.indexOf("#")<0){if(g(t.uri,"http://dbpedia.org/resource/Category:"))return
g(t.uri,"http://purl.org/dc/elements/1.1/")||g(t.uri,"http://purl.org/dc/terms/")?i="http://dublincore.org/2005/06/13/dcq":g(t.uri,"http://xmlns.com/wot/0.1/")?i="http://xmlns.com/wot/0.1/index.rdf":g(t.uri,"http://web.resource.org/cc/")&&(i="http://web.resource.org/cc/schema.rdf")}i&&(o=i),n&&"unrequested"!==n.getState(o)||(i&&w.warn("Assuming server still broken, faking redirect of <"+t.uri+"> to <"+o+">"),n.requestURI(o,r))}}function i(e,t,r){r||(r=0)
var n=e.length
for(r<0&&(r=n+r);r<n;r++)if(e[r]===t)return r
return-1}function o(e,t){e.callbacks={}
for(var r=t.length-1;r>=0;r--)e.callbacks[t[r]]=[]
e.addHook=function(t){e.callbacks[t]||(e.callbacks[t]=[])},e.addCallback=function(t,r){e.callbacks[t].push(r)},e.removeCallback=function(t,r){for(var n=0;n<e.callbacks[t].length;n++)if(e.callbacks[t][n].name===r)return e.callbacks[t].splice(n,1),!0
return!1},e.insertCallback=function(t,r){e.callbacks[t].unshift(r)},e.fireCallbacks=function(t,r){var n,i=[],o=[],a=e.callbacks[t].length
for(n=a-1;n>=0;n--)e.callbacks[t][n].apply(e,r)&&i.push(e.callbacks[t][n])
for(n=i.length-1;n>=0;n--)o.push(i[n])
for(n=a;n<e.callbacks[t].length;n++)o.push(e.callbacks[t][n])
e.callbacks[t]=o}}function a(){return tabulator&&tabulator.isExtension?Components.classes["@mozilla.org/xmlextras/domparser;1"].getService(Components.interfaces.nsIDOMParser):window.DOMParser?new DOMParser:!!window.ActiveXObject&&new ActiveXObject("Microsoft.XMLDOM")}function s(e,t){t=t||{}
var r=[]
"selfClosing"in t&&t.selfClosing.split(" ").forEach(function(e){r[e]=!0})
var n=[]
return"skipAttributes"in t&&t.skipAttributes.split(" ").forEach(function(e){n[e]=!0}),u(e,t,r,n)}function u(e,t,r,n){var i,o="",a=[!1]
if(void 0===e.nodeType)return o
if(1===e.nodeType){if(e.hasAttribute("class")&&"classWithChildText"in t&&e.matches(t.classWithChildText.class))o+=e.querySelector(t.classWithChildText.element).textContent
else if(!("skipNodeWithClass"in t&&e.matches("."+t.skipNodeWithClass))){var s=e.nodeName.toLowerCase()
o+="<"+s
var l=[]
for(i=e.attributes.length-1;i>=0;i--){var c=e.attributes[i]
if(!(n.length>0&&n[c.name])&&!/^\d+$/.test(c.name)){if("class"===c.name&&"replaceClassItemWith"in t&&c.value.split(" ").indexOf(t.replaceClassItemWith.source)>-1){var f=new RegExp(t.replaceClassItemWith.source,"g")
c.value=c.value.replace(f,t.replaceClassItemWith.target).trim()}"class"===c.name&&"skipClassWithValue"in t&&t.skipClassWithValue===c.value||l.push(c.name+"='"+c.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(l.length>0&&("sortAttributes"in t&&t.sortAttributes&&l.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),o+=" "+l.join(" ")),r[s])o+=" />"
else{for(o+=">",o+="html"===s?"\n  ":"",a.push("style"===s||"script"===s),i=0;i<e.childNodes.length;i++)o+=u(e.childNodes[i])
a.pop(),o+="body"===s?"</"+s+">\n":"</"+s+">"}}}else if(8===e.nodeType)o+="\x3c!--"+e.nodeValue+"--\x3e"
else if(3===e.nodeType||4===e.nodeType){var h=e.nodeValue.replace(/\n+$/,"")
o+=a[a.length-1]?h:h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+e.nodeType),console.log(e)
return o}function l(){var e=new Date,t=e.getYear()+1900,r=e.getMonth()+1,n=e.getDate(),i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getSeconds()
return r<10&&(r="0"+r),n<10&&(n="0"+n),i<10&&(i="0"+i),o<10&&(o="0"+o),a<10&&(a="0"+a),t+"-"+r+"-"+n+"T"+i+":"+o+":"+a+"Z"}function c(e){for(var t,r=e.getAllResponseHeaders().split("\n"),n={},i=0;i<r.length;i++)if(r[i].length>0){var o=r[i].split(": ")
void 0===o[1]?n[t]+="\n"+o[0]:(t=o[0].toLowerCase(),n[t]=o[1])}return n}function f(e,t,r){var n=function(e){return"BlankNode"===e.termType?null:e},i=function(t){var i=r.statementsMatching(e).map(function(e){return n(e.subject)+" "+n(e.predicate)+" "+n(e.object)}).concat(r.statementsMatching(void 0,void 0,e).map(function(e){return n(e.subject)+" "+n(e.predicate)+" "+n(e.object)}))
return i.sort(),i.join("\n")}
return"BlankNode"===e.termType||"BlankNode"===t.termType?0===e.compareTerm(t)?0:i()>i()?1:i()<i()?-1:e.compareTerm(t):e.compareTerm(t)}function h(e,t,r){var n=f(e.subject,t.subject,r)
return n||((n=f(e.predicate,t.predicate,r))||f(e.object,t.object,r))}function d(e){var t=document.createElement("div")
t.textContent=e,document.body.appendChild(t)}function p(r,n){var i
if(n=n||{},"undefined"!=typeof tabulator&&tabulator.isExtension)i=Components.classes["@mozilla.org/xmlextras/domparser;1"].getService(Components.interfaces.nsIDOMParser)
else{if(void 0!==t&&t&&t.exports){var o=e("xmldom").DOMParser
return(new o).parseFromString(r,n.contentType||"application/xhtml+xml")}i="undefined"!=typeof window&&window.DOMParser?new window.DOMParser:new o}return i.parseFromString(r,"application/xml")}function v(e,t){for(var r=0;r<e.length;r++)if(e[r].subject.sameTerm(t.subject)&&e[r].predicate.sameTerm(t.predicate)&&e[r].object.sameTerm(t.object)&&e[r].why.sameTerm(t.why))return void e.splice(r,1)
throw new Error("RDFArrayRemove: Array did not contain "+t+" "+t.why)}function g(e,t){return e.slice(0,t.length)===t}function m(e,t){for(var r=e.split("%s"),n="",i=0;i<t.length;i++)t[i]+="",n+=r[i]+t[i]
return n+r.slice(t.length).join()}function y(){if("undefined"!=typeof tabulator&&tabulator.isExtension)return Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance().QueryInterface(Components.interfaces.nsIXMLHttpRequest)
if("undefined"!=typeof window&&"XMLHttpRequest"in window)return new(0,window.XMLHttpRequest)
if(void 0!==t&&t&&t.exports)return new(0,e("xmlhttprequest").XMLHttpRequest)
if(!window.ActiveXObject)return!1
try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}}var b=e("./uri").docpart,w=e("./log")
t.exports.AJAR_handleNewTerm=n,t.exports.ArrayIndexOf=i,t.exports.callbackify=o,t.exports.dtstamp=l,t.exports.DOMParserFactory=a,t.exports.domToString=s,t.exports.dumpNode=u,t.exports.getHTTPHeaders=c,t.exports.heavyCompare=f,t.exports.heavyCompareSPO=h,t.exports.output=d,t.exports.parseXML=p,t.exports.RDFArrayRemove=v,t.exports.string_startswith=g,t.exports.string={},t.exports.string.template=m,t.exports.uri=e("./uri"),t.exports.XMLHTTPFactory=y,t.exports.log=w,t.exports.mediaTypeClass=function(e){return $rdf.sym("http://www.w3.org/ns/iana/media-types/"+e+"#Resource")}},{"./log":55,"./uri":72,xmldom:40,xmlhttprequest:void 0}],74:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./class-order"),u=e("./node"),l=e("./uri"),c=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0]
n(this,t)
var r=i(this,Object.getPrototypeOf(t).call(this))
return r.termType=t.termType,r.value=e,r.base="varid:",r.uri=l.join(e,r.base),r}return o(t,e),a(t,[{key:"equals",value:function(e){return!!e&&(this.termType===e.termType&&this.value===e.value)}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(e){var t
return null!=(t=e[this.toNT()])?t:this}},{key:"toString",value:function(){return this.uri.slice(0,this.base.length)===this.base?"?"+this.uri.slice(this.base.length):"?"+this.uri}}]),t}(u)
c.termType="Variable",c.prototype.classOrder=s.Variable,c.prototype.isVar=1,t.exports=c},{"./class-order":44,"./node":59,"./uri":72}],75:[function(e,t,r){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e("./named-node"),o=function e(){n(this,e)}
o.boolean=new i("http://www.w3.org/2001/XMLSchema#boolean"),o.dateTime=new i("http://www.w3.org/2001/XMLSchema#dateTime"),o.decimal=new i("http://www.w3.org/2001/XMLSchema#decimal"),o.float=new i("http://www.w3.org/2001/XMLSchema#float"),o.integer=new i("http://www.w3.org/2001/XMLSchema#integer"),o.langString=new i("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),o.string=new i("http://www.w3.org/2001/XMLSchema#string"),t.exports=o},{"./named-node":57}],rdflib:[function(e,t,r){"use strict"
var n={BlankNode:e("./blank-node"),Collection:e("./collection"),convert:e("./convert"),DataFactory:e("./data-factory"),Empty:e("./empty"),Fetcher:e("./fetcher"),Formula:e("./formula"),IndexedFormula:e("./indexed-formula"),jsonParser:e("./jsonparser"),Literal:e("./literal"),log:e("./log"),N3Parser:e("./n3parser"),NamedNode:e("./named-node"),Namespace:e("./namespace"),Node:e("./node"),parse:e("./parse"),Query:e("./query").Query,queryToSPARQL:e("./query-to-sparql"),RDFaProcessor:e("./rdfaparser"),RDFParser:e("./rdfxmlparser"),serialize:e("./serialize"),Serializer:e("./serializer"),SPARQLToQuery:e("./sparql-to-query"),sparqlUpdateParser:e("./patch-parser"),Statement:e("./statement"),term:e("./node").fromValue,UpdateManager:e("./update-manager"),UpdatesSocket:e("./updates-via").UpdatesSocket,UpdatesVia:e("./updates-via").UpdatesVia,uri:e("./uri"),Util:e("./util"),Variable:e("./variable")}
n.NextId=n.BlankNode.nextId,n.fromNT=n.Formula.prototype.fromNT,n.fetcher=n.DataFactory.fetcher,n.graph=n.DataFactory.graph,n.lit=n.DataFactory.lit,n.st=n.DataFactory.st,n.sym=n.DataFactory.namedNode,n.variable=n.DataFactory.variable,n.blankNode=n.DataFactory.blankNode,n.defaultGraph=n.DataFactory.defaultGraph,n.literal=n.DataFactory.literal,n.namedNode=n.DataFactory.namedNode,n.quad=n.DataFactory.quad,n.triple=n.DataFactory.triple,t.exports=n},{"./blank-node":43,"./collection":45,"./convert":46,"./data-factory":47,"./empty":49,"./fetcher":50,"./formula":51,"./indexed-formula":52,"./jsonparser":53,"./literal":54,"./log":55,"./n3parser":56,"./named-node":57,"./namespace":58,"./node":59,"./parse":60,"./patch-parser":61,"./query":63,"./query-to-sparql":62,"./rdfaparser":64,"./rdfxmlparser":65,"./serialize":66,"./serializer":67,"./sparql-to-query":68,"./statement":69,"./update-manager":70,"./updates-via":71,"./uri":72,"./util":73,"./variable":74}]},{},[])("rdflib")})
